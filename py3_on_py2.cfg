# --------------------------------
# Running the Python-3 PLIP on py2
# --------------------------------
#
# This config `py3_on_py2.cfg` only re-adds AT-dependecies dropped in py3.cfg
#
#
# Clone coredev and use branch 5.2::
#
#     $ git clone git@github.com:plone/buildout.coredev.git coredev_py3_on_py2
#     $ cd coredev_py3_on_py2
#     $ git checkout 5.2
#
# Create py2 virtualenv::
#
#     $ virtualenv .
#
# Install buildout::
#
#     $ ./bin/pip install -r requirements.txt
#
# Run buildout::
#
#     $ ./bin/buildout -c py3_on_py2.cfg
#
# Start Plone::
#
#     $ ./bin/instance fg
#


[buildout]
extends = py3.cfg

eggs +=
    archetypes.multilingual
    archetypes.schemaextender
    plone.app.blob
    plone.app.collection
    plone.app.folder
    plone.app.imaging
    plone.app.referenceablebehavior
    Products.Archetypes
    Products.ATContentTypes
    Products.contentmigration
    Products.Marshall
    Products.validation
    ZServer

test-eggs +=
    archetypes.multilingual [test]
    archetypes.schemaextender
    plone.app.blob [test]
    plone.app.collection [test]
    plone.app.folder [test]
    plone.app.imaging [test]
    plone.app.referenceablebehavior
    plone.formwidget.recurrence [archetypes,z3cform,test]
    Products.Archetypes [test]
    Products.ATContentTypes [test]
    Products.contentmigration
    Products.Marshall
    Products.validation

# re-add those removed in py3.cfg
auto-checkout +=
    archetypes.schemaextender
    archetypes.multilingual
    archetypes.referencebrowserwidget
    archetypes.schemaextender
    plone.app.blob
    plone.app.collection
    plone.app.folder
    plone.app.imaging
    plone.formwidget.recurrence
    Products.Archetypes
    Products.ATContentTypes
    plone.resource

parts +=
    alltests-at

[sources]
# https://github.com/plone/archetypes.schemaextender/pull/5
archetypes.schemaextender = git ${remotes:plone}/archetypes.schemaextender.git pushurl=${remotes:plone_push}/archetypes.schemaextender.git branch=testlayer
plone.resource = git ${remotes:plone}/plone.resource.git pushurl=${remotes:plone_push}/plone.resource.git branch=fix_testisolation

[versions]
