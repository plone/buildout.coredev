# https://dev.plone.org/ticket/10359
# Convert control panels to use z3c.form

[buildout]
extends = plipbase.cfg
parts +=
    test
    omelette
    coverage-test
    coverage-report

auto-checkout =
    plone.app.controlpanel
    plone.app.discussion
    plone.app.registry
    plone.app.testing
    Products.CMFPlone
jenkins-test-eggs = plone.app.controlpanel
jenkins-test-directories = src/plone.app.controlpanel/plone/app/controlpanel

[test]
eggs =
    plone.app.controlpanel [test]
    plone.app.discussion [test]

[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}
packages = ${instance:location}/lib/python ./

[coverage-test]
recipe = zc.recipe.testrunner
eggs = ${test:eggs}
defaults = ['--coverage', '../../coverage', '-v', '--auto-progress']

[coverage-report]
recipe = zc.recipe.egg
eggs = z3c.coverage
scripts = coverage=coverage-report
arguments = ('coverage', 'report')

[sources]
plone.app.controlpanel = git git://github.com/plone/plone.app.controlpanel.git pushurl=${remotes:plone_push}/plone.app.controlpanel.git branch=plip10359-z3cform

