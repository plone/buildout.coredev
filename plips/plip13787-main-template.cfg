# https://dev.plone.org/ticket/13787
# Main Template

[buildout]
extends =
    plip13476-mockup-dev.cfg
    https://raw.github.com/plone/buildout.jenkins/master/jenkins.cfg

parts -=
    alltests
    alltests-at
parts +=
    jenkins-alltests
    themetest

auto-checkout +=
    Products.CMFPlone
    plonetheme.barceloneta
    collective.themetest
    plone.app.portlets
    plone.app.vocabularies
    mockup

eggs +=
    plonetheme.barceloneta
    mockup

test-eggs +=
    plonetheme.barceloneta
    plone.app.content

jenkins-test-eggs = ${buildout:test-eggs}

[test]
eggs -=
    plonetheme.sunburst


[jenkins-alltests]
recipe = plone.recipe.alltests
package-map = ${alltests-base:package-map}
groups = ${alltests-base:groups}
exclude = ${alltests-base:exclude}
test-script = ${buildout:bin-directory}/jenkins-test

[mockup]
recipe = collective.recipe.cmd
on_install = true
on_update = true
nix_path=~/.nix-defexpr/channels/
cmds =
    cd ${buildout:sources-dir}/mockup
    npm install grunt
    PATH=$PATH:${buildout:sources-dir}/mockup/node_modules/grunt-cli/bin/ make bootstrap NIX_PATH=${:nix_path}

[themetest]
recipe = zc.recipe.egg
eggs =
    ${test:eggs}
    Sphinx
    sphinx-rtd-theme
    plone.app.robotframework
    sphinxcontrib-robotframework [docs]
scripts =
    sphinx-build


[sources]
Products.Archetypes = git ${remotes:plone}/Products.Archetypes.git pushurl=${remotes:plone_push}/Products.Archetypes.git branch=remove-dt-dl-dd
Products.ATContentTypes = git ${remotes:plone}/Products.ATContentTypes.git pushurl=${remotes:plone_push}/Products.ATContentTypes.git branch=remove-dt-dl-dd
Products.CMFDefault = git ${remotes:plone}/Products.CMFDefault.git pushurl=${remotes:plone_push}/Products.CMFDefault.git branch=remove-dt-dl-dd
Products.CMFPlone = git ${remotes:plone}/Products.CMFPlone.git pushurl=${remotes:plone_push}/Products.CMFPlone.git branch=main_template-remove
Products.PloneTestCase = git ${remotes:plone}/Products.PloneTestCase.git pushurl=${remotes:plone_push}/Products.PloneTestCase.git branch=barceloneta
collective.themetest = git https://github.com/collective/collective.themetest egg=false
plonetheme.barceloneta = git ${remotes:plone}/plonetheme.barceloneta.git pushurl=${remotes:plone_push}/plonetheme.barceloneta.git branch=master
plone.app.caching = git ${remotes:plone}/plone.app.caching.git pushurl=${remotes:plone_push}/plone.app.caching.git branch=remove-dt-dl-dd
plone.app.content = git ${remotes:plone}/plone.app.content.git pushurl=${remotes:plone_push}/plone.app.content.git branch=barceloneta
plone.app.contentmenu = git ${remotes:plone}/plone.app.contentmenu.git pushurl=${remotes:plone_push}/plone.app.contentmenu.git branch=barceloneta
plone.app.contentrules = git ${remotes:plone}/plone.app.contentrules.git pushurl=${remotes:plone_push}/plone.app.contentrules.git branch=remove-dt-dl-dd
plone.app.contenttypes = git ${remotes:plone}/plone.app.contenttypes.git pushurl=${remotes:plone_push}/plone.app.contenttypes.git branch=remove-dt-dl-dd
plone.app.controlpanel = git ${remotes:plone}/plone.app.controlpanel.git pushurl=${remotes:plone_push}/plone.app.controlpanel.git branch=plip10359-barceloneta-search-control-panel
plone.app.dexterity = git ${remotes:plone}/plone.app.dexterity.git pushurl=${remotes:plone_push}/plone.app.dexterity.git branch=remove-dt-dl-dd
plone.app.discussion = git ${remotes:plone}/plone.app.discussion.git pushurl=${remotes:plone_push}/plone.app.discussion.git branch=remove-dt-dl-dd
plone.app.event = git ${remotes:plone}/plone.app.event.git pushurl=${remotes:plone_push}/plone.app.event.git branch=remove-dt-dl-dd
plone.app.form = git ${remotes:plone}/plone.app.form.git pushurl=${remotes:plone_push}/plone.app.form.git branch=remove-dt-dl-dd
plone.app.iterate = git ${remotes:plone}/plone.app.iterate.git pushurl=${remotes:plone_push}/plone.app.iterate.git branch=remove-dt-dl-dd
plone.app.layout = git ${remotes:plone}/plone.app.layout.git pushurl=${remotes:plone_push}/plone.app.layout.git branch=barceloneta
plone.app.linkintegrity = git ${remotes:plone}/plone.app.linkintegrity.git pushurl=${remotes:plone_push}/plone.app.linkintegrity.git branch=remove-dt-dl-dd
plone.app.portlets = git ${remotes:plone}/plone.app.portlets.git pushurl=${remotes:plone_push}/plone.app.portlets.git branch=barcelona
plone.app.testing = git ${remotes:plone}/plone.app.testing.git pushurl=${remotes:plone_push}/plone.app.testing.git branch=barceloneta
plone.app.theming = git ${remotes:plone}/plone.app.theming.git pushurl=${remotes:plone_push}/plone.app.theming.git branch=remove-dt-dl-dd
plone.app.upgrade = git ${remotes:plone}/plone.app.upgrade.git pushurl=${remotes:plone_push}/plone.app.upgrade.git branch=barceloneta
plone.app.vocabularies = git ${remotes:plone}/plone.app.vocabularies.git pushurl=${remotes:plone_push}/plone.app.vocabularies.git branch=barceloneta
plone.app.z3cform = git ${remotes:plone}/plone.app.z3cform.git pushurl=${remotes:plone_push}/plone.app.z3cform.git branch=barceloneta
plone.portlet.collection = git ${remotes:plone}/plone.portlet.collection.git pushurl=${remotes:plone_push}/plone.portlet.collection.git branch=remove-dt-dl-dd
