diff -u --exclude-from=/home/xen/.exclude /home/xen/src/plone-coredev/plips/plipbase-review-tests.txt /home/xen/src/plone-coredev/plips/plip9310-review-tests.txt
--- /home/xen/src/plone-coredev/plips/plipbase-review-tests.txt	2009-09-08 22:29:37.000000000 -0700
+++ /home/xen/src/plone-coredev/plips/plip9310-review-tests.txt	2009-09-08 23:19:52.000000000 -0700
@@ -1,7 +1,9 @@
-$ bin/alltests
+$ bin/alltests 
 #### Running tests for group ATCT ####
 Running Products.CMFTestCase.layer.CMFSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.CMFTestCase.layer.ZCML in # seconds.
   Set up Products.CMFTestCase.layer.CMFSite in # seconds.
   Running:
@@ -26,7 +28,9 @@
 Failed to import ZPsycopgDA
 Failed to import ZMySQLDA
 Running Testing.ZopeTestCase.layer.ZopeLite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Running:
                   
   Ran 36 tests with 0 failures and 0 errors in # seconds.
@@ -204,7 +208,7 @@
     article.CreationDate()
 Differences (ndiff with -expected +actual):
     - '2004-01-01 00:02:04'
-    + '2009-09-08 17:21:05'
+    + '2009-09-08 18:45:05'
 ----------------------------------------------------------------------
 File "/.../plone-coredev/src/Products.Marshall/Products/Marshall/doc/README.txt", line 143, in README.txt
 Failed example:
@@ -456,7 +460,9 @@
 
 #### Running tests for group CMFEditions ####
 Running Testing.ZopeTestCase.layer.ZopeLite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Running:
                   
   Ran 27 tests with 0 failures and 0 errors in # seconds.
@@ -500,6 +506,8 @@
 #### Finished tests for group CMFEditions ####
 
 #### Running tests for group Plone ####
+/.../plone-coredev/src/Plone/Products/CMFPlone/InterfaceTool.py:13: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
 Running Testing.ZopeTestCase.layer.ZopeLite tests:
   Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
   Running:
@@ -521,7 +529,136 @@
 Running Products.PloneTestCase.layer.PloneSite tests:
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
-    878/1777 (49.4%)
+    53/1869 (2.8%)
+
+Failure in test test_MembershipTool_deleteMembers (Products.CMFPlone.tests.testCSRFProtection.AuthenticatorTestCase)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 101, in test_MembershipTool_deleteMembers
+    'member_ids:list=%s' % ptc.default_user)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 33, in checkAuthenticator
+    self.assertEqual(response.getStatus(), status)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 200
+
+    55/1869 (2.9%)
+
+Failure in test test_PloneTool_acquireLocalRoles (Products.CMFPlone.tests.testCSRFProtection.AuthenticatorTestCase)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 51, in test_PloneTool_acquireLocalRoles
+    'use_acquisition:int=1', status=302)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 33, in checkAuthenticator
+    self.assertEqual(response.getStatus(), status)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 302
+
+    291/1869 (15.6%)
+
+Error in test test_bug4333_delete_user_remove_memberdata (Products.CMFPlone.tests.testControlPanelScripts.TestPrefsUserManage)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 140, in test_bug4333_delete_user_remove_memberdata
+    self.portal.prefs_user_manage(delete=['barney'])
+  File "/.../plone-coredev/src/Products.CMFFormController/Products/CMFFormController/FSControllerPythonScript.py", line 105, in __call__
+    result = FSControllerPythonScript.inheritedAttribute('__call__')(self, *args, **kwargs)
+  File "/.../plone-coredev/src/Products.CMFFormController/Products/CMFFormController/Script.py", line 145, in __call__
+    return BaseFSPythonScript.__call__(self, *args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/FSPythonScript.py", line 130, in __call__
+    return Script.__call__(self, *args, **kw)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Shared/DC/Scripts/Bindings.py", line 324, in __call__
+    return self._bindAndExec(args, kw, None)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Shared/DC/Scripts/Bindings.py", line 361, in _bindAndExec
+    return self._exec(bound_data, args, kw)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Products/PythonScripts/PythonScript.py", line 344, in _exec
+    result = f(*args, **kw)
+  File "Script (Python)", line 37, in prefs_user_manage
+   - Line 37
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
+    300/1869 (16.1%)
+
+Failure in test test_prefsUserManager (Products.CMFPlone.tests.testControlPanelScripts.TestNoGETControlPanel)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 80, in test_prefsUserManager
+    self._onlyPOST(path, qstring,success=302)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 38, in _onlyPOST
+    self.assertEqual(response.getStatus(), success)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 302
+
+    416/1869 (22.3%)
+
+Error in test testDoUpgrades (Products.CMFPlone.tests.testMigrationTool.TestMigrationTool)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testMigrationTool.py", line 57, in testDoUpgrades
+    self.setup.manage_doUpgrades(request=request)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 880, in manage_doUpgrades
+    step.doStep(self)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/upgrade.py", line 141, in doStep
+    self.handler(tool)
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v25/__init__.py", line 11, in final_two51
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v25:2.5final-2.5.1')
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/utils.py", line 104, in loadMigrationProfile
+    context.runAllImportStepsFromProfile(profile, purge_old=False)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 337, in runAllImportStepsFromProfile
+    self._createReport(name, result['steps'], result['messages'])
+   - __traceback_info__: profile-plone.app.upgrade.v25:2.5final-2.5.1
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 1153, in _createReport
+    self._setObject(name, file)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/OFS/ObjectManager.py", line 332, in _setObject
+    v = self._checkId(id)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/OFS/ObjectManager.py", line 116, in checkValidId
+    'The id "%s" is invalid - it is already in use.' % id)
+BadRequest: The id "import-all-profile-plone.app.upgrade.v25_2.5final-2.5.1-20090909015706.log" is invalid - it is already in use.
+
+    510/1869 (27.3%)
+
+Error in test test_bug9141 (Products.CMFPlone.tests.testMigrations.TestMigrations_v3_3)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testMigrations.py", line 2510, in test_bug9141
+    self.migration._upgrade('3.3rc3')
+AttributeError: _upgrade
+
+    943/1869 (50.5%)
+
+Failure in test testHaveHead (Products.CMFPlone.tests.testS5.TestS5)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testS5.py", line 42, in testHaveHead
+    assert view.enabled() == True
+AssertionError
+
+    970/1869 (51.9%)
 
 Failure in test testProcessLatin1 (Products.CMFPlone.tests.testUnicodeSplitter.TestSplitter)
 Traceback (most recent call last):
@@ -533,7 +670,7 @@
     (msg or '%r != %r' % (first, second))
 AssertionError: ['ffin', 'foo'] != ['\xc4ffin', 'foo']
 
-    881/1777 (49.6%)
+    973/1869 (52.1%)
 
 Failure in test testNormalizeLatin1 (Products.CMFPlone.tests.testUnicodeSplitter.TestCaseNormalizer)
 Traceback (most recent call last):
@@ -545,8 +682,290 @@
     (msg or '%r != %r' % (first, second))
 AssertionError: ['\xc4ffin'] != ['\xe4ffin']
 
+    1103/1869 (59.0%)
+
+Failure in test /.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt
+Failed doctest test for csrf.txt
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 0
+
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 100, in csrf.txt
+Failed example:
+    browser.getControl('Register').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 100, example 28]>", line 1, in <module>
+        browser.getControl('Register').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 624, in click
+        self.browser._clickSubmit(self.mech_form, self.mech_control, (1,1))
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 411, in _clickSubmit
+        id=control.id, name=control.name, label=label, coord=coord))
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 500: Internal Server Error
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 101, in csrf.txt
+Failed example:
+    browser.contents
+Expected:
+    '...Welcome!...You have been registered...'
+Got:
+    '\n\n\n<!DOCTYPE html PUBLIC\n  "-//W3C//DTD XHTML 1.0 Transitional//EN"\n  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n\n  \n    \n    \n    \n    \n    \n\n  \n\n  <head>\n\n    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\n    <meta name="generator" content="Plone - http://plone.org" />\n\n    <!-- Internet Explorer fix, forces IE8 into newest possible rendering\n         engine even if it\'s on an intranet. This has to be defined before any\n         script/style tags. -->\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> \n\n    \n      <base href="http://nohost/plone/" /><!--[if lt IE 7]></base><![endif]-->\n    \n\n    <link rel="kss-base-url" href="http://nohost/plone/" />\n\n  \n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/jquery-cachekey1573.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/dropdown-cachekey2323.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/sarissa-cachekey2339.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcebase2-dom-fp-cachekey3240.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcekukit-cachekey9859.js"></script>\n\n  \n    <style type="text/css" media="screen">@import url(http://nohost/plone/portal_css/Plone%20Default/member-cachekey8186.css);</style>\n    <style type="text/css">@import url(http://nohost/plone/portal_css/Plone%20Default/base-cachekey5112.css);</style>\n    <style type="text/css" media="all">@import url(http://nohost/plone/portal_css/Plone%20Default/ploneCustom-cachekey2510.css);</style>\n\n  \n    <link rel="kinetic-stylesheet" type="text/css" href="http://nohost/plone/portal_kss/Plone%20Default/at-cachekey9726.kss" />\n\n<title>Plone site</title>\n\n    <!-- IE6 workaround CSS/JS  -->\n    <!-- [if lte IE7]>\n        <style type="text/css" media="all">@import url(http://nohost/plone/IEFixes.css);</style>\n        \n        <script type="text/javascript" src="http://nohost/plone/iefixes.js">\n        </script>\n        \n    <![endif]-->\n\n    \n    <link rel="author" href="http://nohost/plone/author/" title="Author information" />\n\n\n\n    <link rel="shortcut icon" type="image/x-icon" href="http://nohost/plone/favicon.ico" />\n\n\n\n    <link rel="home" href="http://nohost/plone" title="Front page" />\n\n    <link rel="contents" href="http://nohost/plone/sitemap" title="Site Map" />\n\n\n\n\n\n\n    <link rel="search" href="http://nohost/plone/search_form" title="Search this site" />\n\n\n\n    <!-- Disable IE6 image toolbar -->\n    <meta http-equiv="imagetoolbar" content="no" />\n    \n    \n    \n\n    \n    \n\n    \n    \n\n    \n    \n\n  </head>\n\n  <body class=" template-default_error_message" dir="ltr">\n    <div id="visual-portal-wrapper">\n\n      <div id="portal-top">\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-header">\n    <p xmlns="http://www.w3.org/1999/xhtml" class="hiddenStructure">\n  <a accesskey="2" href="http://nohost/plone/join_form#documentContent">Skip to content.</a> |\n\n  <a accesskey="6" href="http://nohost/plone/join_form#portlet-navigation-tree">Skip to navigation</a>\n</p>\n\n<ul xmlns="http://www.w3.org/1999/xhtml" id="portal-siteactions">\n\n    <li id="siteaction-sitemap"><a href="http://nohost/plone/sitemap" accesskey="3" title="Site Map">Site Map</a></li>\n    <li id="siteaction-accessibility"><a href="http://nohost/plone/accessibility-info" accesskey="0" title="Accessibility">Accessibility</a></li>\n    <li id="siteaction-contact"><a href="http://nohost/plone/contact-info" accesskey="9" title="Contact">Contact</a></li>\n    <li id="siteaction-plone_setup"><a href="http://nohost/plone/plone_control_panel" accesskey="" title="Site Setup">Site Setup</a></li>\n</ul>\n\n<div id="portal-searchbox">\n    <form name="searchform" action="http://nohost/plone/search">\n\n        <label for="searchGadget" class="hiddenStructure">Search Site</label>\n\n        <div class="LSBox">\n        <input name="SearchableText" type="text" size="18" title="Search Site" accesskey="4" class="inputLabel" id="searchGadget" />\n\n        <input class="searchButton" type="submit" value="Search" />\n    \n        <div class="searchSection">\n            <input id="searchbox_currentfolder_only" class="noborder" type="checkbox" name="path" value="/plone" />\n            <label for="searchbox_currentfolder_only" style="cursor: pointer">\n                only in current section\n            </label>\n        </div>\n\n        <div class="LSResult" id="LSResult" style=""><div class="LSShadow" id="LSShadow"></div></div>\n        </div>\n    </form>\n\n    <div id="portal-advanced-search" class="hiddenStructure">\n        <a href="http://nohost/plone/search_form" accesskey="5">\n            Advanced Search&hellip;\n        </a>\n    </div>\n\n</div>\n\n<a xmlns="http://www.w3.org/1999/xhtml" id="portal-logo" accesskey="1" href="http://nohost/plone">\n    <img src="http://nohost/plone/logo.jpg" alt="" title="Plone" height="57" width="252" /></a>\n\n\n    <h5 class="hiddenStructure">Sections</h5>\n\n    <ul id="portal-globalnav">\n        <li id="portaltab-index_html" class="selected"><a href="http://nohost/plone" title="">Home</a></li>\n        <li id="portaltab-Members" class="plain"><a href="http://nohost/plone/Members" title="Container for users\' home directories">Users</a></li>\n        <li id="portaltab-news" class="plain"><a href="http://nohost/plone/news" title="Site News">News</a></li>\n        <li id="portaltab-events" class="plain"><a href="http://nohost/plone/events" title="Site Events">Events</a></li>\n    </ul>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-personaltools-wrapper">\n\n<h5 class="hiddenStructure">Personal tools</h5>\n\n<ul id="portal-personaltools" class="visualInline">\n   \n       <li><a id="user-name" href="http://nohost/plone/dashboard"><img src="http://nohost/plone/user.gif" alt="" title="User" height="16" width="16" />\n            <span class="visualCaseSensitive">test_user_1_</span></a></li>\n   \n\n    \n        <li>\n            <a href="http://nohost/plone/logout">Log out</a>\n        </li>\n    \n\n</ul>\n</div>\n\n\n    \n\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-breadcrumbs">\n\n    <span id="breadcrumbs-you-are-here">You\nare here:</span>\n    <span id="breadcrumbs-home">\n        <a href="http://nohost/plone">Home</a>\n        \n    </span>\n\n</div>\n\n      </div>\n\n      <div class="visualClear" id="clear-space-before-wrapper-table"><!-- --></div>\n\n      <table id="portal-columns">\n        <tbody>\n          <tr>\n            \n            \n            \n\n            \n            <td id="portal-column-content">\n\n              \n                <div class="">\n\n                  \n\n\n                  <div id="region-content" class="documentContent">\n\n                    <span id="contentTopLeft"></span>\n                    <span id="contentTopRight"></span>\n                    \n                    <a name="documentContent"></a>\n\n                    \n\n    <dl class="portalMessage info" id="kssPortalMessage" style="display:none">\n        <dt>Info</dt>\n        <dd></dd>\n    </dl>\n\n\n                    \n                    <div id="viewlet-above-content"></div>\n\n                    \n                    <div id="content">\n                      \n                      <div id="content">\n\n        \n\n        <div>\n\n            <h1 class="documentFirstHeading">\n                We&#8217;re sorry, but there seems to be an error&hellip;\n            </h1>\n\n            \n                \n                \n                \n            \n                <p>\n                Since you are a site administrator, you can\n                <span> <a href="http://nohost/plone/error_log/showEntry?id=1252461665.620.975311631269">see the full error message</a> </span>\n                </p>\n\n            \n\n            \n\n        </div>\n        \n\n</div>\n                    </div>\n                    \n\n                    \n                    \n                      \n\n                    \n                    \n\n                    <span id="contentBottomLeft"></span>\n                    <span id="contentBottomRight"></span>\n\n                  </div>\n\n                </div>\n\n              \n            </td>\n            \n\n            \n            \n            \n          </tr>\n        </tbody>\n      </table>\n      \n\n      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>\n      \n      \n\n      \n\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-footer">\n\n<p>\n    \n    The\n    <a href="http://plone.org">Plone<sup>&reg;</sup> CMS &mdash; Open Source Content Management System</a>\n    is\n    <acronym title="Copyright">&copy;</acronym>\n    2000-2009\n    by the\n    <a href="http://plone.org/foundation">Plone Foundation</a>\n    et al.\n    \n</p>\n\n<p>\n    \n    Plone<sup>&reg;</sup> and the Plone logo are registered trademarks of the\n        <a href="http://plone.org/foundation">Plone Foundation</a>.\n    \n\n    \n    Distributed under the\n        <a href="http://creativecommons.org/licenses/GPL/2.0/">GNU GPL license</a>.\n    \n</p>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-colophon">\n      \n\n      \n\n      <div class="colophonWrapper">\n      <ul>\n        <li>\n          <a href="http://plone.org" title="This site was built using Plone CMS, the Open Source Content Management System. Click for more information.">\n            Powered by Plone</a>\n        </li>\n        <li>\n          <a href="http://validator.w3.org/check/referer" title="This site is valid XHTML.">\n            Valid XHTML</a>\n        </li>\n        <li>\n          <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css3&amp;usermedium=all" title="This site was built with valid CSS.">\n            Valid CSS</a>\n        </li>\n        <li>\n          <a href="http://www.section508.gov" title="This site conforms to the US Government Section 508 Accessibility Guidelines.">\n            Section 508</a>\n        </li>\n        <li>\n          <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="This site conforms to the W3C-WAI Web Content Accessibility Guidelines.">\n            WCAG</a>\n        </li>\n      </ul>\n      </div>\n\n    </div>\n\n\n      \n\n      <div class="visualClear"><!-- --></div>\n    </div>\n<div id="kss-spinner"><img alt="" src="http://nohost/plone/spinner.png" /></div>\n</body>\n</html>\n'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 103, in csrf.txt
+Failed example:
+    self.failUnless(portal.acl_users.getUser('john'), 'user not found?')
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 103, example 30]>", line 1, in <module>
+        self.failUnless(portal.acl_users.getUser('john'), 'user not found?')
+      File "/usr/lib/python2.6/unittest.py", line 325, in failUnless
+        if not expr: raise self.failureException, msg
+    AssertionError: user not found?
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 194, in csrf.txt
+Failed example:
+    browser.contents
+Expected:
+    '...Info...User added...'
+Got:
+    '\n\n\n<!DOCTYPE html PUBLIC\n  "-//W3C//DTD XHTML 1.0 Transitional//EN"\n  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n\n  \n    \n    \n    \n    \n    \n\n  \n\n  <head>\n\n    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\n    <meta name="generator" content="Plone - http://plone.org" />\n\n    <!-- Internet Explorer fix, forces IE8 into newest possible rendering\n         engine even if it\'s on an intranet. This has to be defined before any\n         script/style tags. -->\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> \n\n    \n      <base href="http://nohost/plone/" /><!--[if lt IE 7]></base><![endif]-->\n    \n\n    <link rel="kss-base-url" href="http://nohost/plone/" />\n\n  \n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/jquery-cachekey1573.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/dropdown-cachekey2323.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/sarissa-cachekey2339.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcebase2-dom-fp-cachekey3240.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcekukit-cachekey9859.js"></script>\n\n  \n    <style type="text/css" media="screen">@import url(http://nohost/plone/portal_css/Plone%20Default/member-cachekey8186.css);</style>\n    <style type="text/css">@import url(http://nohost/plone/portal_css/Plone%20Default/base-cachekey5112.css);</style>\n    <style type="text/css" media="all">@import url(http://nohost/plone/portal_css/Plone%20Default/ploneCustom-cachekey2510.css);</style>\n\n  \n    <link rel="kinetic-stylesheet" type="text/css" href="http://nohost/plone/portal_kss/Plone%20Default/at-cachekey9726.kss" />\n\n<title>Plone site</title>\n\n    <!-- IE6 workaround CSS/JS  -->\n    <!-- [if lte IE7]>\n        <style type="text/css" media="all">@import url(http://nohost/plone/IEFixes.css);</style>\n        \n        <script type="text/javascript" src="http://nohost/plone/iefixes.js">\n        </script>\n        \n    <![endif]-->\n\n    \n    <link rel="author" href="http://nohost/plone/author/" title="Author information" />\n\n\n\n    <link rel="shortcut icon" type="image/x-icon" href="http://nohost/plone/favicon.ico" />\n\n\n\n    <link rel="home" href="http://nohost/plone" title="Front page" />\n\n    <link rel="contents" href="http://nohost/plone/sitemap" title="Site Map" />\n\n\n\n\n\n\n    <link rel="search" href="http://nohost/plone/search_form" title="Search this site" />\n\n\n\n    <!-- Disable IE6 image toolbar -->\n    <meta http-equiv="imagetoolbar" content="no" />\n    \n    \n    \n\n    \n    \n\n    \n    \n\n    \n    \n\n  </head>\n\n  <body class=" template-pageform.pt" dir="ltr">\n    <div id="visual-portal-wrapper">\n\n      <div id="portal-top">\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-header">\n    <p xmlns="http://www.w3.org/1999/xhtml" class="hiddenStructure">\n  <a accesskey="2" href="http://nohost/plone/@@join_form#documentContent">Skip to content.</a> |\n\n  <a accesskey="6" href="http://nohost/plone/@@join_form#portlet-navigation-tree">Skip to navigation</a>\n</p>\n\n<ul xmlns="http://www.w3.org/1999/xhtml" id="portal-siteactions">\n\n    <li id="siteaction-sitemap"><a href="http://nohost/plone/sitemap" accesskey="3" title="Site Map">Site Map</a></li>\n    <li id="siteaction-accessibility"><a href="http://nohost/plone/accessibility-info" accesskey="0" title="Accessibility">Accessibility</a></li>\n    <li id="siteaction-contact"><a href="http://nohost/plone/contact-info" accesskey="9" title="Contact">Contact</a></li>\n    <li id="siteaction-plone_setup"><a href="http://nohost/plone/plone_control_panel" accesskey="" title="Site Setup">Site Setup</a></li>\n</ul>\n\n<div id="portal-searchbox">\n    <form name="searchform" action="http://nohost/plone/search">\n\n        <label for="searchGadget" class="hiddenStructure">Search Site</label>\n\n        <div class="LSBox">\n        <input name="SearchableText" type="text" size="18" title="Search Site" accesskey="4" class="inputLabel" id="searchGadget" />\n\n        <input class="searchButton" type="submit" value="Search" />\n    \n        <div class="searchSection">\n            <input id="searchbox_currentfolder_only" class="noborder" type="checkbox" name="path" value="/plone" />\n            <label for="searchbox_currentfolder_only" style="cursor: pointer">\n                only in current section\n            </label>\n        </div>\n\n        <div class="LSResult" id="LSResult" style=""><div class="LSShadow" id="LSShadow"></div></div>\n        </div>\n    </form>\n\n    <div id="portal-advanced-search" class="hiddenStructure">\n        <a href="http://nohost/plone/search_form" accesskey="5">\n            Advanced Search&hellip;\n        </a>\n    </div>\n\n</div>\n\n<a xmlns="http://www.w3.org/1999/xhtml" id="portal-logo" accesskey="1" href="http://nohost/plone">\n    <img src="http://nohost/plone/logo.jpg" alt="" title="Plone" height="57" width="252" /></a>\n\n\n    <h5 class="hiddenStructure">Sections</h5>\n\n    <ul id="portal-globalnav">\n        <li id="portaltab-index_html" class="selected"><a href="http://nohost/plone" title="">Home</a></li>\n        <li id="portaltab-Members" class="plain"><a href="http://nohost/plone/Members" title="Container for users\' home directories">Users</a></li>\n        <li id="portaltab-news" class="plain"><a href="http://nohost/plone/news" title="Site News">News</a></li>\n        <li id="portaltab-events" class="plain"><a href="http://nohost/plone/events" title="Site Events">Events</a></li>\n    </ul>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-personaltools-wrapper">\n\n<h5 class="hiddenStructure">Personal tools</h5>\n\n<ul id="portal-personaltools" class="visualInline">\n   \n       <li><a id="user-name" href="http://nohost/plone/dashboard"><img src="http://nohost/plone/user.gif" alt="" title="User" height="16" width="16" />\n            <span class="visualCaseSensitive">John Doe</span></a></li>\n   \n\n    \n        <li>\n            <a href="http://nohost/plone/logout">Log out</a>\n        </li>\n    \n\n</ul>\n</div>\n\n\n    \n\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-breadcrumbs">\n\n    <span id="breadcrumbs-you-are-here">You\nare here:</span>\n    <span id="breadcrumbs-home">\n        <a href="http://nohost/plone">Home</a>\n        \n    </span>\n\n</div>\n\n      </div>\n\n      <div class="visualClear" id="clear-space-before-wrapper-table"><!-- --></div>\n\n      <table id="portal-columns">\n        <tbody>\n          <tr>\n            \n            \n            \n\n            \n            <td id="portal-column-content">\n\n              \n                <div class="documentEditable">\n\n                  \n\n    \n\n        <h5 class="hiddenStructure">Views</h5>\n\n        <ul class="contentViews" id="content-views">\n\n            \n              <li id="contentview-folderContents" class="plain">\n                <a href="http://nohost/plone/folder_contents">Contents</a>\n              </li>\n            \n            \n              <li id="contentview-view" class="selected">\n                <a href="http://nohost/plone">View</a>\n              </li>\n            \n            \n              <li id="contentview-edit" class="plain">\n                <a href="http://nohost/plone/edit">Edit</a>\n              </li>\n            \n            \n              <li id="contentview-contentrules" class="plain">\n                <a href="http://nohost/plone/@@manage-content-rules">Rules</a>\n              </li>\n            \n            \n              <li id="contentview-local_roles" class="plain">\n                <a href="http://nohost/plone/@@sharing">Sharing</a>\n              </li>\n            \n\n        </ul>\n        \n    \n\n\n<div class="contentActions">\n\n</div>\n\n                  <div id="region-content" class="documentContent">\n\n                    <span id="contentTopLeft"></span>\n                    <span id="contentTopRight"></span>\n                    \n                    <a name="documentContent"></a>\n\n                    \n\n    <dl class="portalMessage info" id="kssPortalMessage" style="display:none">\n        <dt>Info</dt>\n        <dd></dd>\n    </dl>\n\n    \n\n        <dl class="portalMessage error">\n            <dt>Error</dt>\n            <dd>REQUEST</dd>\n        </dl>\n\n    \n\n                    \n                    <div id="viewlet-above-content"></div>\n\n                    <div>\n\n<div>\n\n<form action="http://nohost/plone/@@join_form" method="post" enctype="multipart/form-data" id="zc.page.browser_form" class="kssattr-formname-join_form">\n\n<div id="viewspace">\n\n    \n\n  <h1 class="documentFirstHeading">Registration Form</h1>\n\n  <p></p>\n\n  \n\n    \n\n  \n\n  \n\n  <fieldset>\n    <legend>Personal Details</legend>\n  \n    <div class="field kssattr-fieldname-form.username " id="formfield-form-username">\n          <label for="form.username">\n            <span>User Name</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Enter a user name, usually something like \'jsmith\'. No spaces or special characters. Usernames and passwords are case sensitive, make sure the caps lock key is not enabled. This is the name used to log in.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.username" name="form.username" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.password " id="formfield-form-password">\n          <label for="form.password">\n            <span>Password</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Minimum 5 characters.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="passwordType" id="form.password" name="form.password" size="20" type="password" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.password_ctl " id="formfield-form-password_ctl">\n          <label for="form.password_ctl">\n            <span>Confirm password</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Re-enter the password. Make sure the passwords are identical.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="passwordType" id="form.password_ctl" name="form.password_ctl" size="20" type="password" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.mail_me " id="formfield-form-mail_me">\n          \n          \n          \n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="hiddenType" id="form.mail_me.used" name="form.mail_me.used" type="hidden" value="" />  <input class="checkboxType" id="form.mail_me" name="form.mail_me" type="checkbox" value="on"  /> <label for=\'form.mail_me\'>Send a mail with the password</label>\n</div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.fullname " id="formfield-form-fullname">\n          <label for="form.fullname">\n            <span>Full Name</span>\n          </label>\n          \n          <div class="formHelp">Enter full name, eg. John Smith.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.fullname" name="form.fullname" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.email " id="formfield-form-email">\n          <label for="form.email">\n            <span>E-mail</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Enter an email address. This is necessary in case the password is lost. We respect your privacy, and will not give the address away to any third parties or expose it anywhere.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.email" name="form.email" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.home_page " id="formfield-form-home_page">\n          <label for="form.home_page">\n            <span>Home page</span>\n          </label>\n          \n          <div class="formHelp">The URL for your external home page, if you have one.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.home_page" name="form.home_page" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.location " id="formfield-form-location">\n          <label for="form.location">\n            <span>Location</span>\n          </label>\n          \n          <div class="formHelp">Your location - either city and country - or in a company setting, where your office is located.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.location" name="form.location" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n\n  \n    <input type="hidden" name="_authenticator" value="1a686638547b459e05cdf0d89dd6687fb1f31b4f"/>\n  \n\n  \n<div id="actionsView">\n  <span class="actionButtons">\n    <input type="submit" id="form.actions.register" name="form.actions.register" value="Register" class="context" />\n  </span>\n</div>\n  </fieldset>\n</div>\n</form>\n\n\n\n\n</div>\n\n</div>\n\n                    \n                    \n                      \n\n                    \n                    \n\n                    <span id="contentBottomLeft"></span>\n                    <span id="contentBottomRight"></span>\n\n                  </div>\n\n                </div>\n\n              \n            </td>\n            \n\n            \n            <td id="portal-column-two">\n              <div class="visualPadding">\n                \n                  \n<div id="portletwrapper-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f706c6f6e650a6e657773" class="portletWrapper kssattr-portlethash-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f706c6f6e650a6e657773"><dl class="portlet portletNews" xmlns="http://www.w3.org/1999/xhtml">\n\n    <dt class="portletHeader">\n        <span class="portletTopLeft"></span>\n        <a href="http://nohost/plone/news" class="tile">News</a>\n        <span class="portletTopRight"></span>\n    </dt>\n\n    \n    <dd class="portletItem odd">\n\n        <a href="http://nohost/plone/Members/test_user_1_/important" class="tile" title="">\n            <img width="16" height="16" src="http://nohost/plone/newsitem_icon.png" alt="News Item" />\n            some important news!\n            <span class="portletItemDetails">Sep 08, 2009</span>\n        </a>\n    </dd>\n    \n\n    <dd class="portletFooter">\n        <span class="portletBottomLeft"></span>\n        <a href="http://nohost/plone/news">\n          More news&hellip;\n        </a>\n        <span class="portletBottomRight"></span>\n    </dd>\n    \n</dl>\n</div>\n\n\n<div class="managePortletsLink">\n  <a title="View portlet management screen" href="http://nohost/plone/@@manage-portlets">Manage portlets</a>\n</div>\n\n                \n                &nbsp;\n              </div>\n            </td>\n            \n          </tr>\n        </tbody>\n      </table>\n      \n\n      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>\n      \n      \n\n      \n\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-footer">\n\n<p>\n    \n    The\n    <a href="http://plone.org">Plone<sup>&reg;</sup> CMS &mdash; Open Source Content Management System</a>\n    is\n    <acronym title="Copyright">&copy;</acronym>\n    2000-2009\n    by the\n    <a href="http://plone.org/foundation">Plone Foundation</a>\n    et al.\n    \n</p>\n\n<p>\n    \n    Plone<sup>&reg;</sup> and the Plone logo are registered trademarks of the\n        <a href="http://plone.org/foundation">Plone Foundation</a>.\n    \n\n    \n    Distributed under the\n        <a href="http://creativecommons.org/licenses/GPL/2.0/">GNU GPL license</a>.\n    \n</p>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-colophon">\n      \n\n      \n\n      <div class="colophonWrapper">\n      <ul>\n        <li>\n          <a href="http://plone.org" title="This site was built using Plone CMS, the Open Source Content Management System. Click for more information.">\n            Powered by Plone</a>\n        </li>\n        <li>\n          <a href="http://validator.w3.org/check/referer" title="This site is valid XHTML.">\n            Valid XHTML</a>\n        </li>\n        <li>\n          <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css3&amp;usermedium=all" title="This site was built with valid CSS.">\n            Valid CSS</a>\n        </li>\n        <li>\n          <a href="http://www.section508.gov" title="This site conforms to the US Government Section 508 Accessibility Guidelines.">\n            Section 508</a>\n        </li>\n        <li>\n          <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="This site conforms to the W3C-WAI Web Content Accessibility Guidelines.">\n            WCAG</a>\n        </li>\n      </ul>\n      </div>\n\n    </div>\n\n\n      \n\n      <div class="visualClear"><!-- --></div>\n    </div>\n<div id="kss-spinner"><img alt="" src="http://nohost/plone/spinner.png" /></div>\n</body>\n</html>\n\n'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 197, in csrf.txt
+Failed example:
+    browser.getLink('Users and Groups').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 197, example 76]>", line 1, in <module>
+        browser.getLink('Users and Groups').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 198, in csrf.txt
+Failed example:
+    browser.getControl('Show all').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 198, example 77]>", line 1, in <module>
+        browser.getControl('Show all').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: label 'Show all'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 199, in csrf.txt
+Failed example:
+    browser.getControl(name='users.roles:list:records').value = ['Manager'] * 3
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 199, example 78]>", line 1, in <module>
+        browser.getControl(name='users.roles:list:records').value = ['Manager'] * 3
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.roles:list:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 200, in csrf.txt
+Failed example:
+    browser.getControl('Apply Changes').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 200, example 79]>", line 1, in <module>
+        browser.getControl('Apply Changes').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: label 'Apply Changes'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 201, in csrf.txt
+Failed example:
+    browser.contents
+Expected:
+    '...Info...Changes applied...'
+Got:
+    '\n\n\n<!DOCTYPE html PUBLIC\n  "-//W3C//DTD XHTML 1.0 Transitional//EN"\n  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n\n  \n    \n    \n    \n    \n    \n\n  \n\n  <head>\n\n    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\n    <meta name="generator" content="Plone - http://plone.org" />\n\n    <!-- Internet Explorer fix, forces IE8 into newest possible rendering\n         engine even if it\'s on an intranet. This has to be defined before any\n         script/style tags. -->\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> \n\n    \n      <base href="http://nohost/plone/" /><!--[if lt IE 7]></base><![endif]-->\n    \n\n    <link rel="kss-base-url" href="http://nohost/plone/" />\n\n  \n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/jquery-cachekey1573.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/dropdown-cachekey2323.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/sarissa-cachekey2339.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcebase2-dom-fp-cachekey3240.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcekukit-cachekey9859.js"></script>\n\n  \n    <style type="text/css" media="screen">@import url(http://nohost/plone/portal_css/Plone%20Default/member-cachekey8186.css);</style>\n    <style type="text/css">@import url(http://nohost/plone/portal_css/Plone%20Default/base-cachekey5112.css);</style>\n    <style type="text/css" media="all">@import url(http://nohost/plone/portal_css/Plone%20Default/ploneCustom-cachekey2510.css);</style>\n\n  \n    <link rel="kinetic-stylesheet" type="text/css" href="http://nohost/plone/portal_kss/Plone%20Default/at-cachekey9726.kss" />\n\n<title>Plone site</title>\n\n    <!-- IE6 workaround CSS/JS  -->\n    <!-- [if lte IE7]>\n        <style type="text/css" media="all">@import url(http://nohost/plone/IEFixes.css);</style>\n        \n        <script type="text/javascript" src="http://nohost/plone/iefixes.js">\n        </script>\n        \n    <![endif]-->\n\n    \n    <link rel="author" href="http://nohost/plone/author/" title="Author information" />\n\n\n\n    <link rel="shortcut icon" type="image/x-icon" href="http://nohost/plone/favicon.ico" />\n\n\n\n    <link rel="home" href="http://nohost/plone" title="Front page" />\n\n    <link rel="contents" href="http://nohost/plone/sitemap" title="Site Map" />\n\n\n\n\n\n\n    <link rel="search" href="http://nohost/plone/search_form" title="Search this site" />\n\n\n\n    <!-- Disable IE6 image toolbar -->\n    <meta http-equiv="imagetoolbar" content="no" />\n    \n    \n    \n\n    \n    \n\n    \n    \n\n    \n    \n\n  </head>\n\n  <body class=" template-pageform.pt" dir="ltr">\n    <div id="visual-portal-wrapper">\n\n      <div id="portal-top">\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-header">\n    <p xmlns="http://www.w3.org/1999/xhtml" class="hiddenStructure">\n  <a accesskey="2" href="http://nohost/plone/@@join_form#documentContent">Skip to content.</a> |\n\n  <a accesskey="6" href="http://nohost/plone/@@join_form#portlet-navigation-tree">Skip to navigation</a>\n</p>\n\n<ul xmlns="http://www.w3.org/1999/xhtml" id="portal-siteactions">\n\n    <li id="siteaction-sitemap"><a href="http://nohost/plone/sitemap" accesskey="3" title="Site Map">Site Map</a></li>\n    <li id="siteaction-accessibility"><a href="http://nohost/plone/accessibility-info" accesskey="0" title="Accessibility">Accessibility</a></li>\n    <li id="siteaction-contact"><a href="http://nohost/plone/contact-info" accesskey="9" title="Contact">Contact</a></li>\n    <li id="siteaction-plone_setup"><a href="http://nohost/plone/plone_control_panel" accesskey="" title="Site Setup">Site Setup</a></li>\n</ul>\n\n<div id="portal-searchbox">\n    <form name="searchform" action="http://nohost/plone/search">\n\n        <label for="searchGadget" class="hiddenStructure">Search Site</label>\n\n        <div class="LSBox">\n        <input name="SearchableText" type="text" size="18" title="Search Site" accesskey="4" class="inputLabel" id="searchGadget" />\n\n        <input class="searchButton" type="submit" value="Search" />\n    \n        <div class="searchSection">\n            <input id="searchbox_currentfolder_only" class="noborder" type="checkbox" name="path" value="/plone" />\n            <label for="searchbox_currentfolder_only" style="cursor: pointer">\n                only in current section\n            </label>\n        </div>\n\n        <div class="LSResult" id="LSResult" style=""><div class="LSShadow" id="LSShadow"></div></div>\n        </div>\n    </form>\n\n    <div id="portal-advanced-search" class="hiddenStructure">\n        <a href="http://nohost/plone/search_form" accesskey="5">\n            Advanced Search&hellip;\n        </a>\n    </div>\n\n</div>\n\n<a xmlns="http://www.w3.org/1999/xhtml" id="portal-logo" accesskey="1" href="http://nohost/plone">\n    <img src="http://nohost/plone/logo.jpg" alt="" title="Plone" height="57" width="252" /></a>\n\n\n    <h5 class="hiddenStructure">Sections</h5>\n\n    <ul id="portal-globalnav">\n        <li id="portaltab-index_html" class="selected"><a href="http://nohost/plone" title="">Home</a></li>\n        <li id="portaltab-Members" class="plain"><a href="http://nohost/plone/Members" title="Container for users\' home directories">Users</a></li>\n        <li id="portaltab-news" class="plain"><a href="http://nohost/plone/news" title="Site News">News</a></li>\n        <li id="portaltab-events" class="plain"><a href="http://nohost/plone/events" title="Site Events">Events</a></li>\n    </ul>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-personaltools-wrapper">\n\n<h5 class="hiddenStructure">Personal tools</h5>\n\n<ul id="portal-personaltools" class="visualInline">\n   \n       <li><a id="user-name" href="http://nohost/plone/dashboard"><img src="http://nohost/plone/user.gif" alt="" title="User" height="16" width="16" />\n            <span class="visualCaseSensitive">John Doe</span></a></li>\n   \n\n    \n        <li>\n            <a href="http://nohost/plone/logout">Log out</a>\n        </li>\n    \n\n</ul>\n</div>\n\n\n    \n\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-breadcrumbs">\n\n    <span id="breadcrumbs-you-are-here">You\nare here:</span>\n    <span id="breadcrumbs-home">\n        <a href="http://nohost/plone">Home</a>\n        \n    </span>\n\n</div>\n\n      </div>\n\n      <div class="visualClear" id="clear-space-before-wrapper-table"><!-- --></div>\n\n      <table id="portal-columns">\n        <tbody>\n          <tr>\n            \n            \n            \n\n            \n            <td id="portal-column-content">\n\n              \n                <div class="documentEditable">\n\n                  \n\n    \n\n        <h5 class="hiddenStructure">Views</h5>\n\n        <ul class="contentViews" id="content-views">\n\n            \n              <li id="contentview-folderContents" class="plain">\n                <a href="http://nohost/plone/folder_contents">Contents</a>\n              </li>\n            \n            \n              <li id="contentview-view" class="selected">\n                <a href="http://nohost/plone">View</a>\n              </li>\n            \n            \n              <li id="contentview-edit" class="plain">\n                <a href="http://nohost/plone/edit">Edit</a>\n              </li>\n            \n            \n              <li id="contentview-contentrules" class="plain">\n                <a href="http://nohost/plone/@@manage-content-rules">Rules</a>\n              </li>\n            \n            \n              <li id="contentview-local_roles" class="plain">\n                <a href="http://nohost/plone/@@sharing">Sharing</a>\n              </li>\n            \n\n        </ul>\n        \n    \n\n\n<div class="contentActions">\n\n</div>\n\n                  <div id="region-content" class="documentContent">\n\n                    <span id="contentTopLeft"></span>\n                    <span id="contentTopRight"></span>\n                    \n                    <a name="documentContent"></a>\n\n                    \n\n    <dl class="portalMessage info" id="kssPortalMessage" style="display:none">\n        <dt>Info</dt>\n        <dd></dd>\n    </dl>\n\n    \n\n        <dl class="portalMessage error">\n            <dt>Error</dt>\n            <dd>REQUEST</dd>\n        </dl>\n\n    \n\n                    \n                    <div id="viewlet-above-content"></div>\n\n                    <div>\n\n<div>\n\n<form action="http://nohost/plone/@@join_form" method="post" enctype="multipart/form-data" id="zc.page.browser_form" class="kssattr-formname-join_form">\n\n<div id="viewspace">\n\n    \n\n  <h1 class="documentFirstHeading">Registration Form</h1>\n\n  <p></p>\n\n  \n\n    \n\n  \n\n  \n\n  <fieldset>\n    <legend>Personal Details</legend>\n  \n    <div class="field kssattr-fieldname-form.username " id="formfield-form-username">\n          <label for="form.username">\n            <span>User Name</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Enter a user name, usually something like \'jsmith\'. No spaces or special characters. Usernames and passwords are case sensitive, make sure the caps lock key is not enabled. This is the name used to log in.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.username" name="form.username" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.password " id="formfield-form-password">\n          <label for="form.password">\n            <span>Password</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Minimum 5 characters.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="passwordType" id="form.password" name="form.password" size="20" type="password" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.password_ctl " id="formfield-form-password_ctl">\n          <label for="form.password_ctl">\n            <span>Confirm password</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Re-enter the password. Make sure the passwords are identical.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="passwordType" id="form.password_ctl" name="form.password_ctl" size="20" type="password" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.mail_me " id="formfield-form-mail_me">\n          \n          \n          \n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="hiddenType" id="form.mail_me.used" name="form.mail_me.used" type="hidden" value="" />  <input class="checkboxType" id="form.mail_me" name="form.mail_me" type="checkbox" value="on"  /> <label for=\'form.mail_me\'>Send a mail with the password</label>\n</div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.fullname " id="formfield-form-fullname">\n          <label for="form.fullname">\n            <span>Full Name</span>\n          </label>\n          \n          <div class="formHelp">Enter full name, eg. John Smith.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.fullname" name="form.fullname" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.email " id="formfield-form-email">\n          <label for="form.email">\n            <span>E-mail</span>\n          </label>\n          <span class="fieldRequired" title="Required">\n            (Required)\n          </span>\n          <div class="formHelp">Enter an email address. This is necessary in case the password is lost. We respect your privacy, and will not give the address away to any third parties or expose it anywhere.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.email" name="form.email" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.home_page " id="formfield-form-home_page">\n          <label for="form.home_page">\n            <span>Home page</span>\n          </label>\n          \n          <div class="formHelp">The URL for your external home page, if you have one.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.home_page" name="form.home_page" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n  \n    <div class="field kssattr-fieldname-form.location " id="formfield-form-location">\n          <label for="form.location">\n            <span>Location</span>\n          </label>\n          \n          <div class="formHelp">Your location - either city and country - or in a company setting, where your office is located.</div>\n\t  \n          <div class="fieldErrorBox"></div>\n          <div class="widget formlibInlineValidation"><input class="textType" id="form.location" name="form.location" size="20" type="text" value=""  /></div>\n          \n    </div>\n\n\n  \n    <input type="hidden" name="_authenticator" value="1a686638547b459e05cdf0d89dd6687fb1f31b4f"/>\n  \n\n  \n<div id="actionsView">\n  <span class="actionButtons">\n    <input type="submit" id="form.actions.register" name="form.actions.register" value="Register" class="context" />\n  </span>\n</div>\n  </fieldset>\n</div>\n</form>\n\n\n\n\n</div>\n\n</div>\n\n                    \n                    \n                      \n\n                    \n                    \n\n                    <span id="contentBottomLeft"></span>\n                    <span id="contentBottomRight"></span>\n\n                  </div>\n\n                </div>\n\n              \n            </td>\n            \n\n            \n            <td id="portal-column-two">\n              <div class="visualPadding">\n                \n                  \n<div id="portletwrapper-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f706c6f6e650a6e657773" class="portletWrapper kssattr-portlethash-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f706c6f6e650a6e657773"><dl class="portlet portletNews" xmlns="http://www.w3.org/1999/xhtml">\n\n    <dt class="portletHeader">\n        <span class="portletTopLeft"></span>\n        <a href="http://nohost/plone/news" class="tile">News</a>\n        <span class="portletTopRight"></span>\n    </dt>\n\n    \n    <dd class="portletItem odd">\n\n        <a href="http://nohost/plone/Members/test_user_1_/important" class="tile" title="">\n            <img width="16" height="16" src="http://nohost/plone/newsitem_icon.png" alt="News Item" />\n            some important news!\n            <span class="portletItemDetails">Sep 08, 2009</span>\n        </a>\n    </dd>\n    \n\n    <dd class="portletFooter">\n        <span class="portletBottomLeft"></span>\n        <a href="http://nohost/plone/news">\n          More news&hellip;\n        </a>\n        <span class="portletBottomRight"></span>\n    </dd>\n    \n</dl>\n</div>\n\n\n<div class="managePortletsLink">\n  <a title="View portlet management screen" href="http://nohost/plone/@@manage-portlets">Manage portlets</a>\n</div>\n\n                \n                &nbsp;\n              </div>\n            </td>\n            \n          </tr>\n        </tbody>\n      </table>\n      \n\n      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>\n      \n      \n\n      \n\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-footer">\n\n<p>\n    \n    The\n    <a href="http://plone.org">Plone<sup>&reg;</sup> CMS &mdash; Open Source Content Management System</a>\n    is\n    <acronym title="Copyright">&copy;</acronym>\n    2000-2009\n    by the\n    <a href="http://plone.org/foundation">Plone Foundation</a>\n    et al.\n    \n</p>\n\n<p>\n    \n    Plone<sup>&reg;</sup> and the Plone logo are registered trademarks of the\n        <a href="http://plone.org/foundation">Plone Foundation</a>.\n    \n\n    \n    Distributed under the\n        <a href="http://creativecommons.org/licenses/GPL/2.0/">GNU GPL license</a>.\n    \n</p>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-colophon">\n      \n\n      \n\n      <div class="colophonWrapper">\n      <ul>\n        <li>\n          <a href="http://plone.org" title="This site was built using Plone CMS, the Open Source Content Management System. Click for more information.">\n            Powered by Plone</a>\n        </li>\n        <li>\n          <a href="http://validator.w3.org/check/referer" title="This site is valid XHTML.">\n            Valid XHTML</a>\n        </li>\n        <li>\n          <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css3&amp;usermedium=all" title="This site was built with valid CSS.">\n            Valid CSS</a>\n        </li>\n        <li>\n          <a href="http://www.section508.gov" title="This site conforms to the US Government Section 508 Accessibility Guidelines.">\n            Section 508</a>\n        </li>\n        <li>\n          <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="This site conforms to the W3C-WAI Web Content Accessibility Guidelines.">\n            WCAG</a>\n        </li>\n      </ul>\n      </div>\n\n    </div>\n\n\n      \n\n      <div class="visualClear"><!-- --></div>\n    </div>\n<div id="kss-spinner"><img alt="" src="http://nohost/plone/spinner.png" /></div>\n</body>\n</html>\n\n'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 206, in csrf.txt
+Failed example:
+    browser.getControl(name='users.roles:list:records').value = ['Manager'] * 3
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 206, example 83]>", line 1, in <module>
+        browser.getControl(name='users.roles:list:records').value = ['Manager'] * 3
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.roles:list:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 207, in csrf.txt
+Failed example:
+    browser.getControl('Apply Changes').click()
+Expected:
+    Traceback (most recent call last):
+    ...
+    HTTPError: HTTP Error 403: Forbidden
+Got:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 207, example 84]>", line 1, in <module>
+        browser.getControl('Apply Changes').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: label 'Apply Changes'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 250, in csrf.txt
+Failed example:
+    browser.contents
+Expected:
+    '...Info...Changes made...
+     ...Members of the Administrators group...
+     ...Current group members...
+     ...johnny...john@foo-security.com...
+     ...Remove selected groups / users...'
+Got:
+    '\n  \n\n\n<!DOCTYPE html PUBLIC\n  "-//W3C//DTD XHTML 1.0 Transitional//EN"\n  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n\n  \n    \n    \n    \n    \n    \n\n  \n\n  <head>\n\n    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\n    <meta name="generator" content="Plone - http://plone.org" />\n\n    <!-- Internet Explorer fix, forces IE8 into newest possible rendering\n         engine even if it\'s on an intranet. This has to be defined before any\n         script/style tags. -->\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> \n\n    \n      <base href="http://nohost/plone/" /><!--[if lt IE 7]></base><![endif]-->\n    \n\n    <link rel="kss-base-url" href="http://nohost/plone/" />\n\n  \n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/jquery-cachekey1573.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/dropdown-cachekey2323.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/sarissa-cachekey2339.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcebase2-dom-fp-cachekey3240.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcekukit-cachekey9859.js"></script>\n\n  \n    <style type="text/css" media="screen">@import url(http://nohost/plone/portal_css/Plone%20Default/member-cachekey8186.css);</style>\n    <style type="text/css">@import url(http://nohost/plone/portal_css/Plone%20Default/base-cachekey5112.css);</style>\n    <style type="text/css" media="all">@import url(http://nohost/plone/portal_css/Plone%20Default/ploneCustom-cachekey2510.css);</style>\n\n  \n    <link rel="kinetic-stylesheet" type="text/css" href="http://nohost/plone/portal_kss/Plone%20Default/at-cachekey9726.kss" />\n\n<title>Plone site</title>\n\n    <!-- IE6 workaround CSS/JS  -->\n    <!-- [if lte IE7]>\n        <style type="text/css" media="all">@import url(http://nohost/plone/IEFixes.css);</style>\n        \n        <script type="text/javascript" src="http://nohost/plone/iefixes.js">\n        </script>\n        \n    <![endif]-->\n\n    \n    <link rel="author" href="http://nohost/plone/author/" title="Author information" />\n\n\n\n    <link rel="shortcut icon" type="image/x-icon" href="http://nohost/plone/favicon.ico" />\n\n\n\n    <link rel="home" href="http://nohost/plone" title="Front page" />\n\n    <link rel="contents" href="http://nohost/plone/sitemap" title="Site Map" />\n\n\n\n\n\n\n    <link rel="search" href="http://nohost/plone/search_form" title="Search this site" />\n\n\n\n    <!-- Disable IE6 image toolbar -->\n    <meta http-equiv="imagetoolbar" content="no" />\n    \n    \n    \n\n    \n    \n\n    \n    \n\n    \n    \n\n  </head>\n\n  <body class=" template-prefs_group_members" dir="ltr">\n    <div id="visual-portal-wrapper">\n\n      <div id="portal-top">\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-header">\n    <p xmlns="http://www.w3.org/1999/xhtml" class="hiddenStructure">\n  <a accesskey="2" href="http://nohost/plone/prefs_group_members#documentContent">Skip to content.</a> |\n\n  <a accesskey="6" href="http://nohost/plone/prefs_group_members#portlet-navigation-tree">Skip to navigation</a>\n</p>\n\n<ul xmlns="http://www.w3.org/1999/xhtml" id="portal-siteactions">\n\n    <li id="siteaction-sitemap"><a href="http://nohost/plone/sitemap" accesskey="3" title="Site Map">Site Map</a></li>\n    <li id="siteaction-accessibility"><a href="http://nohost/plone/accessibility-info" accesskey="0" title="Accessibility">Accessibility</a></li>\n    <li id="siteaction-contact"><a href="http://nohost/plone/contact-info" accesskey="9" title="Contact">Contact</a></li>\n    <li id="siteaction-plone_setup"><a href="http://nohost/plone/plone_control_panel" accesskey="" title="Site Setup">Site Setup</a></li>\n</ul>\n\n<div id="portal-searchbox">\n    <form name="searchform" action="http://nohost/plone/search">\n\n        <label for="searchGadget" class="hiddenStructure">Search Site</label>\n\n        <div class="LSBox">\n        <input name="SearchableText" type="text" size="18" title="Search Site" accesskey="4" class="inputLabel" id="searchGadget" />\n\n        <input class="searchButton" type="submit" value="Search" />\n    \n        <div class="searchSection">\n            <input id="searchbox_currentfolder_only" class="noborder" type="checkbox" name="path" value="/plone" />\n            <label for="searchbox_currentfolder_only" style="cursor: pointer">\n                only in current section\n            </label>\n        </div>\n\n        <div class="LSResult" id="LSResult" style=""><div class="LSShadow" id="LSShadow"></div></div>\n        </div>\n    </form>\n\n    <div id="portal-advanced-search" class="hiddenStructure">\n        <a href="http://nohost/plone/search_form" accesskey="5">\n            Advanced Search&hellip;\n        </a>\n    </div>\n\n</div>\n\n<a xmlns="http://www.w3.org/1999/xhtml" id="portal-logo" accesskey="1" href="http://nohost/plone">\n    <img src="http://nohost/plone/logo.jpg" alt="" title="Plone" height="57" width="252" /></a>\n\n\n    <h5 class="hiddenStructure">Sections</h5>\n\n    <ul id="portal-globalnav">\n        <li id="portaltab-index_html" class="selected"><a href="http://nohost/plone" title="">Home</a></li>\n        <li id="portaltab-Members" class="plain"><a href="http://nohost/plone/Members" title="Container for users\' home directories">Users</a></li>\n        <li id="portaltab-news" class="plain"><a href="http://nohost/plone/news" title="Site News">News</a></li>\n        <li id="portaltab-events" class="plain"><a href="http://nohost/plone/events" title="Site Events">Events</a></li>\n    </ul>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-personaltools-wrapper">\n\n<h5 class="hiddenStructure">Personal tools</h5>\n\n<ul id="portal-personaltools" class="visualInline">\n   \n       <li><a id="user-name" href="http://nohost/plone/dashboard"><img src="http://nohost/plone/user.gif" alt="" title="User" height="16" width="16" />\n            <span class="visualCaseSensitive">John Doe</span></a></li>\n   \n\n    \n        <li>\n            <a href="http://nohost/plone/logout">Log out</a>\n        </li>\n    \n\n</ul>\n</div>\n\n\n    \n\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-breadcrumbs">\n\n    <span id="breadcrumbs-you-are-here">You\nare here:</span>\n    <span id="breadcrumbs-home">\n        <a href="http://nohost/plone">Home</a>\n        \n    </span>\n\n</div>\n\n      </div>\n\n      <div class="visualClear" id="clear-space-before-wrapper-table"><!-- --></div>\n\n      <table id="portal-columns">\n        <tbody>\n          <tr>\n            \n            \n        \n            \n\n<td id="portal-column-one">\n<div class="visualPadding">\n\n<dl class="portlet" id="portlet-prefs">\n    <dt class="portletHeader">\n        <span class="portletTopLeft"></span>\n        <a href="http://nohost/plone/plone_control_panel">Site Setup</a>\n        <span class="portletTopRight"></span>\n    </dt>\n\n    <dd class="portletItem">\n\n        \n            <strong>Plone Configuration</strong>\n            <ul class="configlets">\n                \n                <li>\n                    <a href="http://nohost/plone/prefs_install_products_form">\n                        <img src="http://nohost/plone/product_icon.gif" alt="" />\n                    Add-on Products\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@calendar-controlpanel">\n                        <img src="http://nohost/plone/event_icon.gif" alt="" />\n                    Calendar\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/portal_atct/atct_manageTopicIndex">\n                        <img src="http://nohost/plone/topic_icon.gif" alt="" />\n                    Collections\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@rules-controlpanel">\n                        <img src="http://nohost/plone/contentrules_icon.gif" alt="" />\n                    Content Rules\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/prefs_error_log_form">\n                        <img src="http://nohost/plone/error_log_icon.gif" alt="" />\n                    Errors\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@filter-controlpanel">\n                        <img src="http://nohost/plone/htmlfilter_icon.gif" alt="" />\n                    HTML Filtering\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@language-controlpanel">\n                        <img src="http://nohost/plone/flag-plone.gif" alt="" />\n                    Language\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@mail-controlpanel">\n                        <img src="http://nohost/plone/mail_icon.gif" alt="" />\n                    Mail\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@maintenance-controlpanel">\n                        <img src="http://nohost/plone/maintenance_icon.gif" alt="" />\n                    Maintenance\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@markup-controlpanel">\n                        <img src="http://nohost/plone/edit.gif" alt="" />\n                    Markup\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@member-registration">\n                        <img src="http://nohost/plone/register.gif" alt="" />\n                    Member Registration\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/prefs_navigation_form">\n                        <img src="http://nohost/plone/navigation_icon.gif" alt="" />\n                    Navigation\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@search-controlpanel">\n                        <img src="http://nohost/plone/search_icon.gif" alt="" />\n                    Search\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@security-controlpanel">\n                        <img src="http://nohost/plone/lock_icon.gif" alt="" />\n                    Security\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@site-controlpanel">\n                        <img src="http://nohost/plone/logoIcon.gif" alt="" />\n                    Site\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@skins-controlpanel">\n                        <img src="http://nohost/plone/skins_icon.gif" alt="" />\n                    Themes\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/@@types-controlpanel">\n                        <img src="http://nohost/plone/document_icon.gif" alt="" />\n                    Types\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/prefs_users_overview">\n                        <img src="http://nohost/plone/group.gif" alt="" />\n                    Users and Groups\n                    </a>\n                </li>\n                \n                \n                \n                \n                \n                <li>\n                    <a href="http://nohost/plone/kupu_library_tool/kupu_config">\n                        <img src="http://nohost/plone/kupuimages/kupu_icon.gif" alt="" />\n                    Visual editor\n                    </a>\n                </li>\n                \n                \n                <li>\n                    <a href="http://nohost/plone/manage_main">\n                        <img src="http://nohost/plone/zope_icon.gif" alt="" />\n                    Zope Management Interface\n                    </a>\n                </li>\n                \n            </ul>\n        \n        <span class="portletBottomLeft"></span>\n        <span class="portletBottomRight"></span>\n    </dd>\n    <dd class="portletItem">\n\n        \n        <span class="portletBottomLeft"></span>\n        <span class="portletBottomRight"></span>\n    </dd>\n\n</dl>\n\n</div>\n</td>\n\n\n\n        \n    \n            \n\n            \n            <td id="portal-column-content">\n\n              \n      <div>\n\n    \n        \n    \n\n    <div id="region-content" class="documentEditable">\n\n    <!-- simulating views on the groups/user pages until we have real objects. -->\n    <ul class="contentViews">\n      <li class="selected">\n            <a href="http://nohost/plone/prefs_group_members?groupname=Administrators">Group Members</a>\n      </li>\n      <li>\n            <a href="http://nohost/plone/prefs_group_details?groupname=Administrators">Group Properties</a>\n      </li>\n      <li>\n        <a href="http://nohost/plone/@@manage-group-portlets?key=Administrators">Group Portlets</a>\n      </li>\n    </ul>\n\n    <div class="contentActions">\n      &nbsp;\n    </div>\n\n    <div id="content" class="documentContent">\n\n      \n\n    <dl class="portalMessage info" id="kssPortalMessage" style="display:none">\n        <dt>Info</dt>\n        <dd></dd>\n    </dl>\n\n    \n\n        <dl class="portalMessage info">\n            <dt>Info</dt>\n            <dd>Changes made.</dd>\n        </dl>\n\n    \n\n\n      <div class="configlet">\n        \n\n        \n          <h1 class="documentFirstHeading">\n              Members of the Administrators group\n          </h1>\n\n          <a href="http://nohost/plone/prefs_groups_overview" class="link-parent">\n            Up to Groups Overview\n          </a>\n\n          <p>\n            You can add or remove groups and users from this particular group here. Note that this\n            doesn\'t actually delete the group or user, it is only removed from this group.\n          </p>\n\n\n          <form action="http://nohost/plone/prefs_group_members" name="groups" method="post">\n            <h2>Current group members</h2>\n              <table class="listing" summary="Group Members Listing">\n\n                  <tr>\n                      <th>\n                          <input class="noborder" type="checkbox" src="http://nohost/plone/select_all_icon.png" name="selectButton" title="Select all items" onclick="toggleSelect(this, \'delete:list\');" alt="Select all items" />\n                                 <!--Remove user from this group-->\n                      </th>\n                      <th>Group/User name</th>\n                      <th>E-mail Address</th>\n                  </tr>\n\n                  \n                    <tr class="even">\n                        <td class="listingCheckbox">\n                            <input type="checkbox" class="noborder notify" name="delete:list" value="johnny" />\n                        </td>\n\n                        \n\n                        \n                          <td>\n                            <img src="user.png" alt="" />\n                            <a href="prefs_user_details?userid=johnny">johnny</a>\n                          </td>\n                        \n\n                        <td>\n                            \n                        </td>\n                    </tr>\n                  \n              </table>\n\n\n              \n\n              <input class="destructive" type="submit" name="form.button.Edit" value="Remove selected groups / users" />\n\n            <h2>Search for new group members</h2>\n\n            <input type="hidden" name="groupname" value="Administrators" />\n            <input type="hidden" name="form.submitted" value="1" />\n\n            <table class="listing" summary="Groups">\n              <tr>\n                <th colspan="2">\n                  Quick search:\n                    <input class="quickSearch" type="text" name="searchstring" value="" />\n\n                    <input type="submit" class="searchButton" name="form.button.Search" value="Search" />\n                    <input type="submit" class="searchButton" name="form.button.FindAll" value="Show all" />\n                </th>\n              </tr>\n              \n\n              \n              <tr>\n\n                \n\n                \n                  \n                  <td class="discreet" style="text-align:center; font-size: 100%;">\n                    Enter a group or user name to search for or click \'Show All\'.\n                  </td>\n                \n\n              </tr>\n\n            </table>\n\n            <input type="hidden" value="0" name="b_start" />\n\n            \n\n            \n\n            <input type="hidden" name="_authenticator" value="1a686638547b459e05cdf0d89dd6687fb1f31b4f"/>\n\n          </form>\n        \n      </div>\n\n    </div>\n    </div>\n\n</div>\n    \n            </td>\n            \n\n            \n            \n            \n          </tr>\n        </tbody>\n      </table>\n      \n\n      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>\n      \n      \n\n      \n\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-footer">\n\n<p>\n    \n    The\n    <a href="http://plone.org">Plone<sup>&reg;</sup> CMS &mdash; Open Source Content Management System</a>\n    is\n    <acronym title="Copyright">&copy;</acronym>\n    2000-2009\n    by the\n    <a href="http://plone.org/foundation">Plone Foundation</a>\n    et al.\n    \n</p>\n\n<p>\n    \n    Plone<sup>&reg;</sup> and the Plone logo are registered trademarks of the\n        <a href="http://plone.org/foundation">Plone Foundation</a>.\n    \n\n    \n    Distributed under the\n        <a href="http://creativecommons.org/licenses/GPL/2.0/">GNU GPL license</a>.\n    \n</p>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-colophon">\n      \n\n      \n\n      <div class="colophonWrapper">\n      <ul>\n        <li>\n          <a href="http://plone.org" title="This site was built using Plone CMS, the Open Source Content Management System. Click for more information.">\n            Powered by Plone</a>\n        </li>\n        <li>\n          <a href="http://validator.w3.org/check/referer" title="This site is valid XHTML.">\n            Valid XHTML</a>\n        </li>\n        <li>\n          <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css3&amp;usermedium=all" title="This site was built with valid CSS.">\n            Valid CSS</a>\n        </li>\n        <li>\n          <a href="http://www.section508.gov" title="This site conforms to the US Government Section 508 Accessibility Guidelines.">\n            Section 508</a>\n        </li>\n        <li>\n          <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="This site conforms to the W3C-WAI Web Content Accessibility Guidelines.">\n            WCAG</a>\n        </li>\n      </ul>\n      </div>\n\n    </div>\n\n\n      \n\n      <div class="visualClear"><!-- --></div>\n    </div>\n<div id="kss-spinner"><img alt="" src="http://nohost/plone/spinner.png" /></div>\n</body>\n</html>\n\n\n\n'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 259, in csrf.txt
+Failed example:
+    browser.getControl(name='add:list').getControl(value='john').selected = True
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest csrf.txt[line 259, example 111]>", line 1, in <module>
+        browser.getControl(name='add:list').getControl(value='john').selected = True
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 613, in getControl
+        disambiguate(options, msg, index), self.mech_form, self.browser)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: value 'john'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/csrf.txt", line 260, in csrf.txt
+Failed example:
+    browser.getControl('Add selected groups and users to this group').click()
+Expected:
+    Traceback (most recent call last):
+    ...
+    HTTPError: HTTP Error 403: Forbidden
+Got nothing
+
+    1585/1869 (84.8%)
+
+Error in test test_transitionHistory (plone.app.layout.viewlets.tests.test_history.TestWorkflowHistoryViewlet)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.layout/plone/app/layout/viewlets/tests/test_history.py", line 52, in test_transitionHistory
+    self.delMember('tempuser')
+  File "/.../plone-coredev/src/plone.app.layout/plone/app/layout/viewlets/tests/test_history.py", line 20, in delMember
+    self.portal.portal_membership.deleteMembers([username])
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
+    1616/1869 (86.5%)
+
+Error in test testDoUpgrades (plone.app.upgrade.tests.test_upgrade.TestUpgrade)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/tests/test_upgrade.py", line 45, in testDoUpgrades
+    self.setup.manage_doUpgrades(request=request)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 880, in manage_doUpgrades
+    step.doStep(self)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/upgrade.py", line 141, in doStep
+    self.handler(tool)
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v25/__init__.py", line 11, in final_two51
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v25:2.5final-2.5.1')
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/utils.py", line 104, in loadMigrationProfile
+    context.runAllImportStepsFromProfile(profile, purge_old=False)
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 337, in runAllImportStepsFromProfile
+    self._createReport(name, result['steps'], result['messages'])
+   - __traceback_info__: profile-plone.app.upgrade.v25:2.5final-2.5.1
+  File "/.../plone-coredev/src/Products.GenericSetup/Products/GenericSetup/tool.py", line 1153, in _createReport
+    self._setObject(name, file)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/OFS/ObjectManager.py", line 332, in _setObject
+    v = self._checkId(id)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/OFS/ObjectManager.py", line 116, in checkValidId
+    'The id "%s" is invalid - it is already in use.' % id)
+BadRequest: The id "import-all-profile-plone.app.upgrade.v25_2.5final-2.5.1-20090909020520.log" is invalid - it is already in use.
+
+    1634/1869 (87.4%)
+
+Failure in test testRegisterToolsAsUtilities (plone.app.upgrade.v30.tests.TestMigrations_v2_5_x)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v30/tests.py", line 480, in testRegisterToolsAsUtilities
+    self.failIf(sm.queryUtility(i) is None)
+  File "/usr/lib/python2.6/unittest.py", line 321, in failIf
+    if expr: raise self.failureException, msg
+AssertionError
+
+    1647/1869 (88.1%)
+
+Error in test testInstallKss (plone.app.upgrade.v30.tests.TestMigrations_v3_0_alpha1)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v30/tests.py", line 626, in testInstallKss
+    mt.manage_delObjects((mtid, ))
+  File "/.../plone-coredev/src/Products.MimetypesRegistry/Products/MimetypesRegistry/MimeTypesRegistry.py", line 421, in manage_delObjects
+    self.unregister(self.lookup(id)[0])
+IndexError: tuple index out of range
+
+    1704/1869 (91.2%)
+
+Error in test testMigrateControlPanelActionIcons (plone.app.upgrade.v40.tests.TestMigrations_v4_0alpha1)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v40/tests.py", line 97, in testMigrateControlPanelActionIcons
+    icon_expr=''
+TypeError: addAction() got an unexpected keyword argument 'icon_expr'
+
                       
-  Ran 1777 tests with 2 failures and 0 errors in # minutes # seconds.
+  Ran 1869 tests with 8 failures and 7 errors in # minutes # seconds.
 Running plone.app.contentrules.tests.test_configuration.TestContentrulesGSLayer tests:
   Set up plone.app.contentrules.tests.test_configuration.TestContentrulesGSLayer in # seconds.
   Running:
@@ -587,17 +1006,19 @@
   Ran 133 tests with 0 failures and 0 errors in # seconds.
 Tearing down left over layers:
   Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
-Total: 2278 tests, 2 failures, 0 errors in # minutes # seconds.
+Total: 2370 tests, 8 failures, 7 errors in # minutes # seconds.
 #### Finished tests for group Plone ####
 
 #### Running tests for group PlonePAS ####
 Running Testing.ZopeTestCase.layer.ZopeLite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Running:
                     
   Ran 165 tests with 0 failures and 0 errors in # seconds.
 Running Products.PloneTestCase.layer.ZCML tests:
-  Set up Products.PloneTestCase.layer.ZCML in # minutes # seconds.
+  Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Running:
                   
   Ran 38 tests with 0 failures and 0 errors in # seconds.
@@ -605,8 +1026,34 @@
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Set up Products.PlonePAS.tests.layer.PlonePASLayer in # seconds.
   Running:
+    114/148 (77.0%)
+
+Error in test test_bug4333_delete_user_remove_memberdata (Products.PlonePAS.tests.test_membershiptool.TestMembershipTool)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Products.PlonePAS/Products/PlonePAS/tests/test_membershiptool.py", line 442, in test_bug4333_delete_user_remove_memberdata
+    self.membership.deleteMembers(['barney'])
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
                     
-  Ran 148 tests with 0 failures and 0 errors in # seconds.
+  Ran 148 tests with 0 failures and 1 errors in # seconds.
 Running zope.testing.testrunner.layer.UnitTests tests:
   Tear down Products.PlonePAS.tests.layer.PlonePASLayer in # seconds.
   Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
@@ -618,12 +1065,14 @@
   Ran 371 tests with 0 failures and 0 errors in # seconds.
 Tearing down left over layers:
   Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
-Total: 722 tests, 0 failures, 0 errors in # minutes # seconds.
+Total: 722 tests, 0 failures, 1 errors in # minutes # seconds.
 #### Finished tests for group PlonePAS ####
 
 #### Running tests for group plone ####
 Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
@@ -1005,7 +1454,9 @@
 
 #### Running tests for group portlets ####
 Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
@@ -1244,7 +1695,31 @@
 Total: 236 tests, 0 failures, 3 errors in # minutes # seconds.
 #### Finished tests for group portlets ####
 
+#### Running tests for Products.AdvancedQuery ####
+/.../plone-coredev/eggs/Products.AdvancedQuery-3.0-py2.6.egg/Products/AdvancedQuery/__init__.py:10: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+Unable to locate Testing package. You might need to set SOFTWARE_HOME.
+Test-module import failures:
+
+Module: Products.AdvancedQuery.tests.testAdvancedQuery
+
+Traceback (most recent call last):
+  File "/.../plone-coredev/eggs/Products.AdvancedQuery-3.0-py2.6.egg/Products/AdvancedQuery/tests/testAdvancedQuery.py", line 9, in <module>
+    else: import framework
+  File "/.../plone-coredev/eggs/Products.AdvancedQuery-3.0-py2.6.egg/Products/AdvancedQuery/tests/framework.py", line 74, in <module>
+    sys.exit(1)
+SystemExit: 1
+
+
+
+Test-modules with import problems:
+  Products.AdvancedQuery.tests.testAdvancedQuery
+Total: 0 tests, 0 failures, 0 errors in # seconds.
+#### Finished tests for Products.AdvancedQuery ####
+
 #### Running tests for Products.CMFPlacefulWorkflow ####
+/.../plone-coredev/eggs/Products.AdvancedQuery-3.0-py2.6.egg/Products/AdvancedQuery/__init__.py:10: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
 Running Products.PloneTestCase.layer.PloneSite tests:
   Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
@@ -1343,7 +1818,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1365,13 +1840,13 @@
       HTTP/1.1 200 OK
     - Content-Length: ...
     ?                 ^^^
-    + Content-Length: 236
+    + Content-Length: 237
     ?                 ^^^
     - Content-Type: application/x-zope-edit; charset=iso-8859-15
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1381,7 +1856,7 @@
     + auth:Basic dGVzdF91c2VyXzFfOnNlY3JldA==
       cookie:
     - lock-token:...
-    + lock-token:0.235364263518-0.493527656076-00105A989226:1252457867.528
+    + lock-token:0.197584998264-0.0799381381563-00105A989226:1252462906.537
       <BLANKLINE>
       some content
 ----------------------------------------------------------------------
@@ -1395,13 +1870,13 @@
       HTTP/1.1 200 OK
     - Content-Length: ...
     ?                 ^^^
-    + Content-Length: 250
+    + Content-Length: 251
     ?                 ^^^
     - Content-Type: application/x-zope-edit; charset=iso-8859-15
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1411,7 +1886,7 @@
     + auth:Basic dGVzdF91c2VyXzFfOnNlY3JldA==
       cookie:
     - lock-token:...
-    + lock-token:0.235364263518-0.493527656076-00105A989226:1252457867.528
+    + lock-token:0.197584998264-0.0799381381563-00105A989226:1252462906.537
       borrow_lock:1
       <BLANKLINE>
       some content
@@ -1429,7 +1904,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1454,7 +1929,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/another-file
       meta_type:Side Effects
@@ -1478,7 +1953,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1505,7 +1980,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 02:21:46 GMT
     + <BLANKLINE>
     +      -
     + 0=OPtnE[
@@ -1521,70 +1996,914 @@
 
 #### Running tests for Products.PasswordResetTool ####
 Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-  Set up Products.PloneTestCase.layer.ZCML in # seconds.
-  Set up Products.PloneTestCase.layer.PloneSite in # seconds.
-  Running:
-                  
-  Ran 36 tests with 0 failures and 0 errors in # seconds.
-Tearing down left over layers:
-  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
-  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
-  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-#### Finished tests for Products.PasswordResetTool ####
-
-#### Running tests for Products.PloneTestCase ####
-Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-  Set up Products.PloneTestCase.layer.ZCML in # seconds.
-  Set up Products.PloneTestCase.layer.PloneSite in # seconds.
-  Running:
-    19/59 (32.2%)/.../plone-coredev/src/Products.PlonePAS/Products/PlonePAS/tools/membership.py:553: DeprecationWarning: credentialsChanged should be called with 'REQUEST' as second argument. The BBB code will be removed in CMF 2.3.
-  self.credentialsChanged(password, REQUEST=REQUEST)
-                  
-  Ran 59 tests with 0 failures and 0 errors in # seconds.
-Tearing down left over layers:
-  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
-  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
-  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-#### Finished tests for Products.PloneTestCase ####
-
-#### Running tests for Products.ResourceRegistries ####
-Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
-                    
-  Ran 239 tests with 0 failures and 0 errors in # seconds.
-Running zope.testing.testrunner.layer.UnitTests tests:
-  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
-  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
-  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-  Set up zope.testing.testrunner.layer.UnitTests in # seconds.
-  Running:
-                  
-  Ran 55 tests with 0 failures and 0 errors in # seconds.
-Tearing down left over layers:
-  Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
-Total: 294 tests, 0 failures, 0 errors in # minutes # seconds.
-#### Finished tests for Products.ResourceRegistries ####
-
-#### Running tests for Products.SecureMailHost ####
-Running Testing.ZopeTestCase.layer.ZopeLite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
-  Running:
-    2/8 (25.0%)
+    36/36 (100.0%)
 
-Failure in test testMessage (Products.SecureMailHost.tests.test_messages.TestBuergschaftLatin1)
-Traceback (most recent call last):
-  File "/usr/lib/python2.6/unittest.py", line 279, in run
-    testMethod()
-  File "/.../plone-coredev/eggs/Products.SecureMailHost-1.1.2-py2.6.egg/Products/SecureMailHost/tests/test_messages.py", line 77, in testMessage
-    self.failUnlessEqual(m, o)
-  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
-    (msg or '%r != %r' % (first, second))
-AssertionError: 'Date: Wed, 31 Dec 1969 16:00:00 -0800' != 'Date: Thu, 01 Jan 1970 01:00:00 +0100'
+Failure in test /.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt
+Failed doctest test for browser.txt
+  File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 0
+
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 117, in browser.txt
+Failed example:
+    browser.getControl(name='form.button.Register').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 117, example 24]>", line 1, in <module>
+        browser.getControl(name='form.button.Register').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 624, in click
+        self.browser._clickSubmit(self.mech_form, self.mech_control, (1,1))
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 411, in _clickSubmit
+        id=control.id, name=control.name, label=label, coord=coord))
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 500: Internal Server Error
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 122, in browser.txt
+Failed example:
+    "You have been registered" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 133, in browser.txt
+Failed example:
+    "You are now logged in" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 138, in browser.txt
+Failed example:
+    browser.getLink('Log out').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 138, example 32]>", line 1, in <module>
+        browser.getLink('Log out').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 139, in browser.txt
+Failed example:
+    "You are now logged out" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 158, in browser.txt
+Failed example:
+    len(mailhost.messages)
+Expected:
+    1
+Got:
+    0
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 160, in browser.txt
+Failed example:
+    msg = mailhost.messages[0]
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 160, example 42]>", line 1, in <module>
+        msg = mailhost.messages[0]
+    IndexError: list index out of range
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 165, in browser.txt
+Failed example:
+    "To: jsmith@example.com" in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 165, example 43]>", line 1, in <module>
+        "To: jsmith@example.com" in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 168, in browser.txt
+Failed example:
+    please_visit_text in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 168, example 45]>", line 1, in <module>
+        please_visit_text in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 170, in browser.txt
+Failed example:
+    url_index = msg.index(please_visit_text) + len(please_visit_text)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 170, example 46]>", line 1, in <module>
+        url_index = msg.index(please_visit_text) + len(please_visit_text)
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 171, in browser.txt
+Failed example:
+    address = msg[url_index:].split()[0]
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 171, example 47]>", line 1, in <module>
+        address = msg[url_index:].split()[0]
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 172, in browser.txt
+Failed example:
+    address # doctest: +ELLIPSIS
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 172, example 48]>", line 1, in <module>
+        address # doctest: +ELLIPSIS
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 177, in browser.txt
+Failed example:
+    browser.open(address)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 177, example 49]>", line 1, in <module>
+        browser.open(address)
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 178, in browser.txt
+Failed example:
+    "Set your password" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 181, in browser.txt
+Failed example:
+    form = browser.getForm(name='pwreset_action')
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 181, example 51]>", line 1, in <module>
+        form = browser.getForm(name='pwreset_action')
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 398, in getForm
+        form = disambiguate(matching_forms, '', index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 182, in browser.txt
+Failed example:
+    form.getControl(name='userid').value = 'jsmith'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 182, example 52]>", line 1, in <module>
+        form.getControl(name='userid').value = 'jsmith'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 752, in getControl
+        raise zope.testbrowser.interfaces.ExpiredError
+    ExpiredError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 183, in browser.txt
+Failed example:
+    form.getControl(name='password').value = 'secretion'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 183, example 53]>", line 1, in <module>
+        form.getControl(name='password').value = 'secretion'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 752, in getControl
+        raise zope.testbrowser.interfaces.ExpiredError
+    ExpiredError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 184, in browser.txt
+Failed example:
+    form.getControl(name='password2').value = 'secretion'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 184, example 54]>", line 1, in <module>
+        form.getControl(name='password2').value = 'secretion'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 752, in getControl
+        raise zope.testbrowser.interfaces.ExpiredError
+    ExpiredError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 185, in browser.txt
+Failed example:
+    form.submit()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 185, example 55]>", line 1, in <module>
+        form.submit()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 729, in submit
+        raise zope.testbrowser.interfaces.ExpiredError
+    ExpiredError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 189, in browser.txt
+Failed example:
+    "Your password has been set successfully." in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 191, in browser.txt
+Failed example:
+    browser.url
+Expected:
+    'http://nohost/plone/pwreset_finish'
+Got:
+    'http://nohost/plone/mail_password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 200, in browser.txt
+Failed example:
+    "You are now logged in" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 205, in browser.txt
+Failed example:
+    browser.getLink('Log out').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 205, example 63]>", line 1, in <module>
+        browser.getLink('Log out').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 206, in browser.txt
+Failed example:
+    "You are now logged out" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 233, in browser.txt
+Failed example:
+    browser.url
+Expected:
+    'http://nohost/plone/join_form?came_from_prefs=1'
+Got:
+    'http://nohost/plone/@@join_form?came_from_prefs=1'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 236, in browser.txt
+Failed example:
+    browser.getControl(name='username').value = 'wsmith'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 236, example 74]>", line 1, in <module>
+        browser.getControl(name='username').value = 'wsmith'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'username'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 237, in browser.txt
+Failed example:
+    browser.getControl(name='email').value = 'wsmith@example.com'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 237, example 75]>", line 1, in <module>
+        browser.getControl(name='email').value = 'wsmith@example.com'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'email'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 238, in browser.txt
+Failed example:
+    browser.getControl(name='password').value = 'supersecret'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 238, example 76]>", line 1, in <module>
+        browser.getControl(name='password').value = 'supersecret'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 239, in browser.txt
+Failed example:
+    browser.getControl(name='password_confirm').value = 'supersecret'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 239, example 77]>", line 1, in <module>
+        browser.getControl(name='password_confirm').value = 'supersecret'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password_confirm'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 240, in browser.txt
+Failed example:
+    browser.getControl(name='form.button.Register').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 240, example 78]>", line 1, in <module>
+        browser.getControl(name='form.button.Register').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Register'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 241, in browser.txt
+Failed example:
+    'User added.' in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 253, in browser.txt
+Failed example:
+    "You are now logged in" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 256, in browser.txt
+Failed example:
+    browser.getLink('Log out').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 256, example 86]>", line 1, in <module>
+        browser.getLink('Log out').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 289, in browser.txt
+Failed example:
+    browser.getControl(name='username').value = 'bsmith'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 289, example 99]>", line 1, in <module>
+        browser.getControl(name='username').value = 'bsmith'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'username'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 290, in browser.txt
+Failed example:
+    browser.getControl(name='email').value = 'bsmith@example.com'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 290, example 100]>", line 1, in <module>
+        browser.getControl(name='email').value = 'bsmith@example.com'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'email'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 301, in browser.txt
+Failed example:
+    browser.getControl(name='form.button.Register').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 301, example 102]>", line 1, in <module>
+        browser.getControl(name='form.button.Register').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Register'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 302, in browser.txt
+Failed example:
+    "You have been registered" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 308, in browser.txt
+Failed example:
+    len(mailhost.messages)
+Expected:
+    2
+Got:
+    0
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 310, in browser.txt
+Failed example:
+    msg = str(mailhost.messages[-1])
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 310, example 106]>", line 1, in <module>
+        msg = str(mailhost.messages[-1])
+    IndexError: list index out of range
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 315, in browser.txt
+Failed example:
+    "To: bsmith@example.com" in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 315, example 107]>", line 1, in <module>
+        "To: bsmith@example.com" in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 318, in browser.txt
+Failed example:
+    please_visit_text in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 318, example 109]>", line 1, in <module>
+        please_visit_text in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 320, in browser.txt
+Failed example:
+    url_index = msg.index(please_visit_text) + len(please_visit_text)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 320, example 110]>", line 1, in <module>
+        url_index = msg.index(please_visit_text) + len(please_visit_text)
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 321, in browser.txt
+Failed example:
+    address = msg[url_index:].split()[0]
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 321, example 111]>", line 1, in <module>
+        address = msg[url_index:].split()[0]
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 322, in browser.txt
+Failed example:
+    address # doctest: +ELLIPSIS
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 322, example 112]>", line 1, in <module>
+        address # doctest: +ELLIPSIS
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 327, in browser.txt
+Failed example:
+    browser.open(address)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 327, example 113]>", line 1, in <module>
+        browser.open(address)
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 328, in browser.txt
+Failed example:
+    "Please fill out the form below to set your password" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 330, in browser.txt
+Failed example:
+    browser.getControl(name='password').value = 'secret'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 330, example 115]>", line 1, in <module>
+        browser.getControl(name='password').value = 'secret'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 331, in browser.txt
+Failed example:
+    browser.getControl(name='password2').value = 'secret'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 331, example 116]>", line 1, in <module>
+        browser.getControl(name='password2').value = 'secret'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password2'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 332, in browser.txt
+Failed example:
+    browser.getControl("Set my password").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 332, example 117]>", line 1, in <module>
+        browser.getControl("Set my password").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: label 'Set my password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 333, in browser.txt
+Failed example:
+    "Your password has been set successfully." in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 342, in browser.txt
+Failed example:
+    "You are now logged in" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 347, in browser.txt
+Failed example:
+    browser.getLink('Log out').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 347, example 124]>", line 1, in <module>
+        browser.getLink('Log out').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 348, in browser.txt
+Failed example:
+    "You are now logged out" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 373, in browser.txt
+Failed example:
+    browser.url
+Expected:
+    'http://nohost/plone/join_form?came_from_prefs=1'
+Got:
+    'http://nohost/plone/@@join_form?came_from_prefs=1'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 376, in browser.txt
+Failed example:
+    browser.getControl(name='username').value = 'wwwsmith'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 376, example 136]>", line 1, in <module>
+        browser.getControl(name='username').value = 'wwwsmith'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'username'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 377, in browser.txt
+Failed example:
+    browser.getControl(name='email').value = 'wwwsmith@example.com'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 377, example 137]>", line 1, in <module>
+        browser.getControl(name='email').value = 'wwwsmith@example.com'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'email'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 388, in browser.txt
+Failed example:
+    browser.getControl(name='form.button.Register').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 388, example 139]>", line 1, in <module>
+        browser.getControl(name='form.button.Register').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Register'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 396, in browser.txt
+Failed example:
+    len(mailhost.messages)
+Expected:
+    3
+Got:
+    0
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 398, in browser.txt
+Failed example:
+    msg = str(mailhost.messages[-1])
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 398, example 144]>", line 1, in <module>
+        msg = str(mailhost.messages[-1])
+    IndexError: list index out of range
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 403, in browser.txt
+Failed example:
+    "To: wwwsmith@example.com" in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 403, example 145]>", line 1, in <module>
+        "To: wwwsmith@example.com" in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 405, in browser.txt
+Failed example:
+    please_visit_text in msg
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 405, example 146]>", line 1, in <module>
+        please_visit_text in msg
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 407, in browser.txt
+Failed example:
+    url_index = msg.index(please_visit_text) + len(please_visit_text)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 407, example 147]>", line 1, in <module>
+        url_index = msg.index(please_visit_text) + len(please_visit_text)
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 408, in browser.txt
+Failed example:
+    address = msg[url_index:].split()[0]
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 408, example 148]>", line 1, in <module>
+        address = msg[url_index:].split()[0]
+    NameError: name 'msg' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 409, in browser.txt
+Failed example:
+    address # doctest: +ELLIPSIS
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 409, example 149]>", line 1, in <module>
+        address # doctest: +ELLIPSIS
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 414, in browser.txt
+Failed example:
+    browser.open(address)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 414, example 150]>", line 1, in <module>
+        browser.open(address)
+    NameError: name 'address' is not defined
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 415, in browser.txt
+Failed example:
+    "Please fill out the form below to set your password" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 417, in browser.txt
+Failed example:
+    browser.getControl(name='password').value = 'superstr0ng'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 417, example 152]>", line 1, in <module>
+        browser.getControl(name='password').value = 'superstr0ng'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 418, in browser.txt
+Failed example:
+    browser.getControl(name='password2').value = 'superstr0ng'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 418, example 153]>", line 1, in <module>
+        browser.getControl(name='password2').value = 'superstr0ng'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'password2'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 419, in browser.txt
+Failed example:
+    browser.getControl("Set my password").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 419, example 154]>", line 1, in <module>
+        browser.getControl("Set my password").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: label 'Set my password'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 420, in browser.txt
+Failed example:
+    "Your password has been set successfully." in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 429, in browser.txt
+Failed example:
+    "You are now logged in" in browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/Products.PasswordResetTool/Products/PasswordResetTool/tests/browser.txt", line 432, in browser.txt
+Failed example:
+    browser.getLink('Log out').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest browser.txt[line 432, example 161]>", line 1, in <module>
+        browser.getLink('Log out').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 327, in getLink
+        return Link(self.mech_browser.find_link(**args), self)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 626, in find_link
+        raise LinkNotFoundError()
+    LinkNotFoundError
+
+
+  Ran 36 tests with 1 failures and 0 errors in # seconds.
+Tearing down left over layers:
+  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
+  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
+  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+#### Finished tests for Products.PasswordResetTool ####
+
+#### Running tests for Products.PloneTestCase ####
+Running Products.PloneTestCase.layer.PloneSite tests:
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
+  Set up Products.PloneTestCase.layer.ZCML in # seconds.
+  Set up Products.PloneTestCase.layer.PloneSite in # seconds.
+  Running:
+    19/59 (32.2%)/.../plone-coredev/src/Products.PlonePAS/Products/PlonePAS/tools/membership.py:553: DeprecationWarning: credentialsChanged should be called with 'REQUEST' as second argument. The BBB code will be removed in CMF 2.3.
+  self.credentialsChanged(password, REQUEST=REQUEST)
+                  
+  Ran 59 tests with 0 failures and 0 errors in # seconds.
+Tearing down left over layers:
+  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
+  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
+  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+#### Finished tests for Products.PloneTestCase ####
+
+#### Running tests for Products.ResourceRegistries ####
+Running Products.PloneTestCase.layer.PloneSite tests:
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
+  Set up Products.PloneTestCase.layer.ZCML in # seconds.
+  Set up Products.PloneTestCase.layer.PloneSite in # seconds.
+  Running:
+                    
+  Ran 239 tests with 0 failures and 0 errors in # seconds.
+Running zope.testing.testrunner.layer.UnitTests tests:
+  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
+  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
+  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up zope.testing.testrunner.layer.UnitTests in # seconds.
+  Running:
+                  
+  Ran 55 tests with 0 failures and 0 errors in # seconds.
+Tearing down left over layers:
+  Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
+Total: 294 tests, 0 failures, 0 errors in # minutes # seconds.
+#### Finished tests for Products.ResourceRegistries ####
+
+#### Running tests for Products.SecureMailHost ####
+Running Testing.ZopeTestCase.layer.ZopeLite tests:
+  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Running:
+    2/8 (25.0%)
+
+Failure in test testMessage (Products.SecureMailHost.tests.test_messages.TestBuergschaftLatin1)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/eggs/Products.SecureMailHost-1.1.2-py2.6.egg/Products/SecureMailHost/tests/test_messages.py", line 77, in testMessage
+    self.failUnlessEqual(m, o)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 'Date: Wed, 31 Dec 1969 16:00:00 -0800' != 'Date: Thu, 01 Jan 1970 01:00:00 +0100'
 
     3/8 (37.5%)
 
@@ -1658,7 +2977,9 @@
 /.../plone-coredev/eggs/Products.i18ntestcase-1.2-py2.6.egg/Products/i18ntestcase/PotTestCase.py:13: DeprecationWarning: The popen2 module is deprecated.  Use the subprocess module.
   from popen2 import popen4
 Running Testing.ZopeTestCase.layer.ZopeLite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Running:
                 
   Ran 3 tests with 0 failures and 0 errors in # seconds.
@@ -1755,7 +3076,7 @@
 IN html_to_captioned(/.../plone-coredev/src/Products.kupu/Products/kupu/plone/tests/input/umlauts.in)
 
                     
-  Ran 371 tests with 4 failures and 0 errors in # minutes # seconds.
+  Ran 371 tests with 4 failures and 0 errors in # seconds.
 Running zope.testing.testrunner.layer.UnitTests tests:
   Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
   Tear down Products.PloneTestCase.layer.ZCML in # seconds.
@@ -1820,7 +3141,9 @@
 
 #### Running tests for plone.app.openid ####
 Running Products.PloneTestCase.layer.PloneSite tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
@@ -1832,9 +3155,484 @@
   Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
 #### Finished tests for plone.app.openid ####
 
+#### Running tests for plone.app.users ####
+Running Products.PloneTestCase.layer.PloneSite tests:
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
+  Set up Products.PloneTestCase.layer.ZCML in # seconds.
+  Set up Products.PloneTestCase.layer.PloneSite in # seconds.
+  Running:
+    12/22 (54.5%)
+
+Failure in test /.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt
+Failed doctest test for personalpreferences.txt
+  File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 0
+
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 9, in personalpreferences.txt
+Failed example:
+    self.browser.open('http://nohost/plone/@@personal_preferences')
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 9, example 0]>", line 1, in <module>
+        self.browser.open('http://nohost/plone/@@personal_preferences')
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 239, in open
+        self.mech_browser.open(url, data)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 404: Not Found
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 10, in personalpreferences.txt
+Failed example:
+    'Please log in' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 19, in personalpreferences.txt
+Failed example:
+    self.browser.open('http://nohost/plone/@@personal_preferences')
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 19, example 3]>", line 1, in <module>
+        self.browser.open('http://nohost/plone/@@personal_preferences')
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 239, in open
+        self.mech_browser.open(url, data)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 404: Not Found
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 27, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.start_page').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 27, example 6]>", line 1, in <module>
+        self.browser.getControl(name='form.start_page').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.start_page'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 29, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.language').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 29, example 7]>", line 1, in <module>
+        self.browser.getControl(name='form.language').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.language'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 34, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name="form.actions.save").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 34, example 8]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.save").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.save'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 48, in personalpreferences.txt
+Failed example:
+    'Changes saved.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 53, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name="form.actions.cancel").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 53, example 13]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.cancel").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.cancel'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 59, in personalpreferences.txt
+Failed example:
+    'Changes canceled.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 65, in personalpreferences.txt
+Failed example:
+    self.browser.open('http://nohost/plone/@@personal_preferences')
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 65, example 16]>", line 1, in <module>
+        self.browser.open('http://nohost/plone/@@personal_preferences')
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 239, in open
+        self.mech_browser.open(url, data)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 404: Not Found
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 66, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.start_page').value = '/Members/user'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 66, example 17]>", line 1, in <module>
+        self.browser.getControl(name='form.start_page').value = '/Members/user'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.start_page'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 67, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.language').value = ['en']
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 67, example 18]>", line 1, in <module>
+        self.browser.getControl(name='form.language').value = ['en']
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.language'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 68, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name="form.actions.save").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 68, example 19]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.save").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.save'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 69, in personalpreferences.txt
+Failed example:
+    'Changes saved.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 76, in personalpreferences.txt
+Failed example:
+    member.getProperty('language', '')
+Expected:
+    'en'
+Got:
+    ''
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 78, in personalpreferences.txt
+Failed example:
+    member.getProperty('start_page', '')
+Expected:
+    '/Members/user'
+Got:
+    ''
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 83, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.start_page').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 83, example 24]>", line 1, in <module>
+        self.browser.getControl(name='form.start_page').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.start_page'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/personalpreferences.txt", line 85, in personalpreferences.txt
+Failed example:
+    self.browser.getControl(name='form.language').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest personalpreferences.txt[line 85, example 25]>", line 1, in <module>
+        self.browser.getControl(name='form.language').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.language'
+
+    22/22 (100.0%)
+
+Failure in test /.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt
+Failed doctest test for userdata.txt
+  File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 0
+
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 13, in userdata.txt
+Failed example:
+    self.browser.open("http://nohost/plone/" + view_name)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 13, example 1]>", line 1, in <module>
+        self.browser.open("http://nohost/plone/" + view_name)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 239, in open
+        self.mech_browser.open(url, data)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 404: Not Found
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 14, in userdata.txt
+Failed example:
+    'Please log in' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 23, in userdata.txt
+Failed example:
+    self.browser.open("http://nohost/plone/" + view_name)
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 23, example 4]>", line 1, in <module>
+        self.browser.open("http://nohost/plone/" + view_name)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 239, in open
+        self.mech_browser.open(url, data)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 209, in open
+        return self._mech_open(url, data, timeout=timeout)
+      File "/.../plone-coredev/eggs/mechanize-0.1.11-py2.6.egg/mechanize/_mechanize.py", line 261, in _mech_open
+        raise response
+    HTTPError: HTTP Error 404: Not Found
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 31, in userdata.txt
+Failed example:
+    self.browser.getControl(name='form.fullname').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 31, example 7]>", line 1, in <module>
+        self.browser.getControl(name='form.fullname').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.fullname'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 33, in userdata.txt
+Failed example:
+    self.browser.getControl(name='form.email').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 33, example 8]>", line 1, in <module>
+        self.browser.getControl(name='form.email').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.email'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 35, in userdata.txt
+Failed example:
+    self.browser.getControl(name='form.home_page').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 35, example 9]>", line 1, in <module>
+        self.browser.getControl(name='form.home_page').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.home_page'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 37, in userdata.txt
+Failed example:
+    self.browser.getControl(name='form.location').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 37, example 10]>", line 1, in <module>
+        self.browser.getControl(name='form.location').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.location'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 42, in userdata.txt
+Failed example:
+    self.browser.getControl(name="form.actions.cancel").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 42, example 11]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.cancel").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.cancel'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 48, in userdata.txt
+Failed example:
+    'Changes canceled.' in self.browser.contents or self.browser.contents
+Expected:
+    True
+Got:
+    '\n\n\n<!DOCTYPE html PUBLIC\n  "-//W3C//DTD XHTML 1.0 Transitional//EN"\n  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n\n  \n    \n    \n    \n    \n    \n\n  \n\n  <head>\n\n    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\n    <meta name="generator" content="Plone - http://plone.org" />\n\n    <!-- Internet Explorer fix, forces IE8 into newest possible rendering\n         engine even if it\'s on an intranet. This has to be defined before any\n         script/style tags. -->\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> \n\n    \n      <base href="http://nohost/plone/" /><!--[if lt IE 7]></base><![endif]-->\n    \n\n    <link rel="kss-base-url" href="http://nohost/plone/" />\n\n  \n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/jquery-cachekey0347.js"></script>\n    <script type="text/javascript" src="http://nohost/plone/portal_javascripts/Plone%20Default/resourcebase2-dom-fp-cachekey0335.js"></script>\n\n  \n    <style type="text/css">@import url(http://nohost/plone/portal_css/Plone%20Default/base-cachekey5559.css);</style>\n    <style type="text/css" media="all">@import url(http://nohost/plone/portal_css/Plone%20Default/ploneCustom-cachekey0652.css);</style>\n\n  \n    <link rel="kinetic-stylesheet" type="text/css" href="http://nohost/plone/portal_kss/Plone%20Default/at-cachekey7590.kss" />\n\n<title>Plone site</title>\n\n    <!-- IE6 workaround CSS/JS  -->\n    <!-- [if lte IE7]>\n        <style type="text/css" media="all">@import url(http://nohost/plone/IEFixes.css);</style>\n        \n        <script type="text/javascript" src="http://nohost/plone/iefixes.js">\n        </script>\n        \n    <![endif]-->\n\n    \n\n    <link rel="shortcut icon" type="image/x-icon" href="http://nohost/plone/favicon.ico" />\n\n\n\n    <link rel="home" href="http://nohost/plone" title="Front page" />\n\n    <link rel="contents" href="http://nohost/plone/sitemap" title="Site Map" />\n\n\n\n\n\n\n    <link rel="search" href="http://nohost/plone/search_form" title="Search this site" />\n\n\n\n    <!-- Disable IE6 image toolbar -->\n    <meta http-equiv="imagetoolbar" content="no" />\n    \n    \n    \n\n    \n    \n\n    \n    \n\n    \n    \n\n  </head>\n\n  <body class=" template-default_error_message" dir="ltr">\n    <div id="visual-portal-wrapper">\n\n      <div id="portal-top">\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-header">\n    <p xmlns="http://www.w3.org/1999/xhtml" class="hiddenStructure">\n  <a accesskey="2" href="http://nohost/plone/@@user_data#documentContent">Skip to content.</a> |\n\n  <a accesskey="6" href="http://nohost/plone/@@user_data#portlet-navigation-tree">Skip to navigation</a>\n</p>\n\n<ul xmlns="http://www.w3.org/1999/xhtml" id="portal-siteactions">\n\n    <li id="siteaction-sitemap"><a href="http://nohost/plone/sitemap" accesskey="3" title="Site Map">Site Map</a></li>\n    <li id="siteaction-accessibility"><a href="http://nohost/plone/accessibility-info" accesskey="0" title="Accessibility">Accessibility</a></li>\n    <li id="siteaction-contact"><a href="http://nohost/plone/contact-info" accesskey="9" title="Contact">Contact</a></li>\n</ul>\n\n<div id="portal-searchbox">\n    <form name="searchform" action="http://nohost/plone/search">\n\n        <label for="searchGadget" class="hiddenStructure">Search Site</label>\n\n        <div class="LSBox">\n        <input name="SearchableText" type="text" size="18" title="Search Site" accesskey="4" class="inputLabel" id="searchGadget" />\n\n        <input class="searchButton" type="submit" value="Search" />\n    \n        <div class="searchSection">\n            <input id="searchbox_currentfolder_only" class="noborder" type="checkbox" name="path" value="/plone" />\n            <label for="searchbox_currentfolder_only" style="cursor: pointer">\n                only in current section\n            </label>\n        </div>\n\n        <div class="LSResult" id="LSResult" style=""><div class="LSShadow" id="LSShadow"></div></div>\n        </div>\n    </form>\n\n    <div id="portal-advanced-search" class="hiddenStructure">\n        <a href="http://nohost/plone/search_form" accesskey="5">\n            Advanced Search&hellip;\n        </a>\n    </div>\n\n</div>\n\n<a xmlns="http://www.w3.org/1999/xhtml" id="portal-logo" accesskey="1" href="http://nohost/plone">\n    <img src="http://nohost/plone/logo.jpg" alt="" title="Plone" height="57" width="252" /></a>\n\n\n    <h5 class="hiddenStructure">Sections</h5>\n\n    <ul id="portal-globalnav">\n        <li id="portaltab-index_html" class="selected"><a href="http://nohost/plone" title="">Home</a></li>\n        <li id="portaltab-Members" class="plain"><a href="http://nohost/plone/Members" title="Container for users\' home directories">Users</a></li>\n        <li id="portaltab-news" class="plain"><a href="http://nohost/plone/news" title="Site News">News</a></li>\n        <li id="portaltab-events" class="plain"><a href="http://nohost/plone/events" title="Site Events">Events</a></li>\n    </ul>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-personaltools-wrapper">\n\n<h5 class="hiddenStructure">Personal tools</h5>\n\n<ul id="portal-personaltools" class="visualInline">\n   \n\n    \n        <li>\n            <a href="http://nohost/plone/login_form">Log in</a>\n        </li>\n    \n\n</ul>\n</div>\n\n\n    \n\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-breadcrumbs">\n\n    <span id="breadcrumbs-you-are-here">You\nare here:</span>\n    <span id="breadcrumbs-home">\n        <a href="http://nohost/plone">Home</a>\n        \n    </span>\n\n</div>\n\n      </div>\n\n      <div class="visualClear" id="clear-space-before-wrapper-table"><!-- --></div>\n\n      <table id="portal-columns">\n        <tbody>\n          <tr>\n            \n            \n            \n\n            \n            <td id="portal-column-content">\n\n              \n                <div class="">\n\n                  \n\n\n                  <div id="region-content" class="documentContent">\n\n                    <span id="contentTopLeft"></span>\n                    <span id="contentTopRight"></span>\n                    \n                    <a name="documentContent"></a>\n\n                    \n\n    <dl class="portalMessage info" id="kssPortalMessage" style="display:none">\n        <dt>Info</dt>\n        <dd></dd>\n    </dl>\n\n\n                    \n                    <div id="viewlet-above-content"></div>\n\n                    \n                    <div id="content">\n                      \n                      <div id="content">\n\n        <div>\n\n            \n                \n                \n                    \n                <h1 class="documentFirstHeading">\n                    We&#8217;re sorry, but that page doesn&#8217;t exist&hellip;\n                </h1>\n\n                <p>\n                Please double check the web address or use the search function on this page to find what you are looking for.\n                </p>\n\n                <p>\n                If you are certain you have the correct web address but are encountering an error, please\n                contact the <span> <a href="http://nohost/plone/contact-info">site administration</a></span>.\n                </p>\n\n                <p>\n                Thank you.\n                </p>\n                \n                <!-- Offer search results for suggestions -->\n                \n                    \n                    <h3>You might have been looking for&hellip;</h3>\n                    \n                    <dl>\n                    \n                    \n                        \n                            <dt class="contenttype-plone-site">\n                              <img width="16" height="16" src="http://nohost/plone/site_icon.gif" alt="Plone site" />\n                               <a href="http://nohost/plone/" class="state-">Plone site</a>\n                               \n                                \n\n                            </dt>\n            \n                            <dd></dd>\n\n                        \n                    \n                    \n                    \n                        \n                            <dt class="contenttype-document">\n                              <img width="16" height="16" src="http://nohost/plone/document_icon.png" alt="Page" />\n                               <a href="http://nohost/plone/front-page/" class="state-published">Welcome to Plone</a>\n                               \n                                \n\n                            </dt>\n            \n                            <dd>Congratulations! You have successfully installed Plone.</dd>\n\n                        \n                    \n                        \n                    </dl>\n                    \n                \n\n            \n\n        </div>\n\n        \n        \n\n</div>\n                    </div>\n                    \n\n                    \n                    \n                      \n\n                    \n                    \n\n                    <span id="contentBottomLeft"></span>\n                    <span id="contentBottomRight"></span>\n\n                  </div>\n\n                </div>\n\n              \n            </td>\n            \n\n            \n            \n            \n          </tr>\n        </tbody>\n      </table>\n      \n\n      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>\n      \n      \n\n      \n\n        <div xmlns="http://www.w3.org/1999/xhtml" id="portal-footer">\n\n<p>\n    \n    The\n    <a href="http://plone.org">Plone<sup>&reg;</sup> CMS &mdash; Open Source Content Management System</a>\n    is\n    <acronym title="Copyright">&copy;</acronym>\n    2000-2009\n    by the\n    <a href="http://plone.org/foundation">Plone Foundation</a>\n    et al.\n    \n</p>\n\n<p>\n    \n    Plone<sup>&reg;</sup> and the Plone logo are registered trademarks of the\n        <a href="http://plone.org/foundation">Plone Foundation</a>.\n    \n\n    \n    Distributed under the\n        <a href="http://creativecommons.org/licenses/GPL/2.0/">GNU GPL license</a>.\n    \n</p>\n\n</div>\n\n<div xmlns="http://www.w3.org/1999/xhtml" id="portal-colophon">\n      \n\n      \n\n      <div class="colophonWrapper">\n      <ul>\n        <li>\n          <a href="http://plone.org" title="This site was built using Plone CMS, the Open Source Content Management System. Click for more information.">\n            Powered by Plone</a>\n        </li>\n        <li>\n          <a href="http://validator.w3.org/check/referer" title="This site is valid XHTML.">\n            Valid XHTML</a>\n        </li>\n        <li>\n          <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css3&amp;usermedium=all" title="This site was built with valid CSS.">\n            Valid CSS</a>\n        </li>\n        <li>\n          <a href="http://www.section508.gov" title="This site conforms to the US Government Section 508 Accessibility Guidelines.">\n            Section 508</a>\n        </li>\n        <li>\n          <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="This site conforms to the W3C-WAI Web Content Accessibility Guidelines.">\n            WCAG</a>\n        </li>\n      </ul>\n      </div>\n\n    </div>\n\n\n      \n\n      <div class="visualClear"><!-- --></div>\n    </div>\n<div id="kss-spinner"><img alt="" src="http://nohost/plone/spinner.png" /></div>\n</body>\n</html>\n'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 57, in userdata.txt
+Failed example:
+    self.browser.getControl(name="form.actions.save").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 57, example 14]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.save").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.save'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 62, in userdata.txt
+Failed example:
+    self.browser.getControl(name="form.actions.save").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 62, example 17]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.save").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.save'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 63, in userdata.txt
+Failed example:
+    'Required input is missing.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 77, in userdata.txt
+Failed example:
+    self.browser.getControl(name='form.email').value = email_address
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 77, example 20]>", line 1, in <module>
+        self.browser.getControl(name='form.email').value = email_address
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.email'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 78, in userdata.txt
+Failed example:
+    self.browser.getControl(name="form.actions.save").click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest userdata.txt[line 78, example 21]>", line 1, in <module>
+        self.browser.getControl(name="form.actions.save").click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.actions.save'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 83, in userdata.txt
+Failed example:
+    'Changes saved.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.users/plone/app/users/tests/userdata.txt", line 91, in userdata.txt
+Failed example:
+    read_value == email_address
+Expected:
+    True
+Got:
+    False
+
+
+  Ran 22 tests with 2 failures and 0 errors in # seconds.
+Tearing down left over layers:
+  Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
+  Tear down Products.PloneTestCase.layer.ZCML in # seconds.
+  Tear down Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+#### Finished tests for plone.app.users ####
+
 #### Running tests for wicked ####
 Running Products.PloneTestCase.layer.ZCML tests:
-  Set up Testing.ZopeTestCase.layer.ZopeLite in # seconds.
+  Set up Testing.ZopeTestCase.layer.ZopeLite/.../plone-coredev/src/Plone/Products/CMFPlone/LargePloneFolder.py:3: DeprecationWarning: InitializeClass is deprecated. import from App.class_init instead
+  from Globals import InitializeClass
+ in # seconds.
   Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Running:
     12/16 (75.0%)/.../plone-coredev/src/wicked/wicked/cache.py:34: DeprecationWarning: object.__init__() takes no parameters
@@ -1894,26 +3692,34 @@
 
 Failing tests in group Archetypes
 Failing tests in group Plone
+Failing tests in group PlonePAS
 Failing tests in group plone
 Failing tests in group portlets
+Failing tests in Products.AdvancedQuery
 Failing tests in Products.CMFTestCase
 Failing tests in Products.ExternalEditor
+Failing tests in Products.PasswordResetTool
 Failing tests in Products.SecureMailHost
 Failing tests in Products.kupu
+Failing tests in plone.app.users
 #### End test results ####
 
-$ grep ' [1-9][0-9]* \(failures\|errors\)' plips/plipbase-review-rossp.txt
+$ grep ' [1-9][0-9]* \(failures\|errors\)' plips/plip9310-review-rossp.txt
   Ran 511 tests with 4 failures and 0 errors in # minutes # seconds.
   Ran 22 tests with 3 failures and 0 errors in # seconds.
 Total: 675 tests, 7 failures, 0 errors in # minutes # seconds.
-  Ran 1777 tests with 2 failures and 0 errors in # minutes # seconds.
-Total: 2278 tests, 2 failures, 0 errors in # minutes # seconds.
+  Ran 1869 tests with 8 failures and 7 errors in # minutes # seconds.
+Total: 2370 tests, 8 failures, 7 errors in # minutes # seconds.
+  Ran 148 tests with 0 failures and 1 errors in # seconds.
+Total: 722 tests, 0 failures, 1 errors in # minutes # seconds.
   Ran 260 tests with 1 failures and 2 errors in # minutes # seconds.
 Total: 310 tests, 1 failures, 2 errors in # minutes # seconds.
   Ran 54 tests with 0 failures and 3 errors in # seconds.
 Total: 236 tests, 0 failures, 3 errors in # minutes # seconds.
   Ran 58 tests with 0 failures and 2 errors in # seconds.
   Ran 16 tests with 1 failures and 0 errors in # seconds.
+  Ran 36 tests with 1 failures and 0 errors in # seconds.
   Ran 8 tests with 5 failures and 0 errors in # seconds.
-  Ran 371 tests with 4 failures and 0 errors in # minutes # seconds.
+  Ran 371 tests with 4 failures and 0 errors in # seconds.
 Total: 382 tests, 4 failures, 0 errors in # minutes # seconds.
+  Ran 22 tests with 2 failures and 0 errors in # seconds.

Diff finished.  Tue Sep  8 23:20:09 2009
