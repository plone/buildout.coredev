diff -u --exclude-from=/home/xen/.exclude /home/xen/src/plone-coredev/plips/plipbase-review-rossp-tests.txt /home/xen/src/plone-coredev/plips/plip9305-review-rossp-tests.log
--- /home/xen/src/plone-coredev/plips/plipbase-review-rossp-tests.txt	2009-09-08 23:35:41.000000000 -0700
+++ /home/xen/src/plone-coredev/plips/plip9305-review-rossp-tests.log	2009-09-09 07:06:40.000000000 -0700
@@ -204,7 +204,7 @@
     article.CreationDate()
 Differences (ndiff with -expected +actual):
     - '2004-01-01 00:02:04'
-    + '2009-09-08 17:21:05'
+    + '2009-09-08 23:53:12'
 ----------------------------------------------------------------------
 File "/.../plone-coredev/src/Products.Marshall/Products/Marshall/doc/README.txt", line 143, in README.txt
 Failed example:
@@ -521,7 +521,89 @@
 Running Products.PloneTestCase.layer.PloneSite tests:
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Running:
-    878/1777 (49.4%)
+    53/1778 (3.0%)
+
+Failure in test test_MembershipTool_deleteMembers (Products.CMFPlone.tests.testCSRFProtection.AuthenticatorTestCase)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 101, in test_MembershipTool_deleteMembers
+    'member_ids:list=%s' % ptc.default_user)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 33, in checkAuthenticator
+    self.assertEqual(response.getStatus(), status)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 200
+
+    55/1778 (3.1%)
+
+Failure in test test_PloneTool_acquireLocalRoles (Products.CMFPlone.tests.testCSRFProtection.AuthenticatorTestCase)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 51, in test_PloneTool_acquireLocalRoles
+    'use_acquisition:int=1', status=302)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testCSRFProtection.py", line 33, in checkAuthenticator
+    self.assertEqual(response.getStatus(), status)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 302
+
+    291/1778 (16.4%)
+
+Error in test test_bug4333_delete_user_remove_memberdata (Products.CMFPlone.tests.testControlPanelScripts.TestPrefsUserManage)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 140, in test_bug4333_delete_user_remove_memberdata
+    self.portal.prefs_user_manage(delete=['barney'])
+  File "/.../plone-coredev/src/Products.CMFFormController/Products/CMFFormController/FSControllerPythonScript.py", line 105, in __call__
+    result = FSControllerPythonScript.inheritedAttribute('__call__')(self, *args, **kwargs)
+  File "/.../plone-coredev/src/Products.CMFFormController/Products/CMFFormController/Script.py", line 145, in __call__
+    return BaseFSPythonScript.__call__(self, *args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/FSPythonScript.py", line 130, in __call__
+    return Script.__call__(self, *args, **kw)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Shared/DC/Scripts/Bindings.py", line 324, in __call__
+    return self._bindAndExec(args, kw, None)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Shared/DC/Scripts/Bindings.py", line 361, in _bindAndExec
+    return self._exec(bound_data, args, kw)
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/Products/PythonScripts/PythonScript.py", line 344, in _exec
+    result = f(*args, **kw)
+  File "Script (Python)", line 37, in prefs_user_manage
+   - Line 37
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
+    300/1778 (16.9%)
+
+Failure in test test_prefsUserManager (Products.CMFPlone.tests.testControlPanelScripts.TestNoGETControlPanel)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 80, in test_prefsUserManager
+    self._onlyPOST(path, qstring,success=302)
+  File "/.../plone-coredev/src/Plone/Products/CMFPlone/tests/testControlPanelScripts.py", line 38, in _onlyPOST
+    self.assertEqual(response.getStatus(), success)
+  File "/usr/lib/python2.6/unittest.py", line 350, in failUnlessEqual
+    (msg or '%r != %r' % (first, second))
+AssertionError: 500 != 302
+
+    879/1778 (49.4%)
 
 Failure in test testProcessLatin1 (Products.CMFPlone.tests.testUnicodeSplitter.TestSplitter)
 Traceback (most recent call last):
@@ -533,7 +615,7 @@
     (msg or '%r != %r' % (first, second))
 AssertionError: ['ffin', 'foo'] != ['\xc4ffin', 'foo']
 
-    881/1777 (49.6%)
+    882/1778 (49.6%)
 
 Failure in test testNormalizeLatin1 (Products.CMFPlone.tests.testUnicodeSplitter.TestCaseNormalizer)
 Traceback (most recent call last):
@@ -545,8 +627,274 @@
     (msg or '%r != %r' % (first, second))
 AssertionError: ['\xc4ffin'] != ['\xe4ffin']
 
+    1392/1778 (78.3%)
+
+Failure in test /.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt
+Failed doctest test for usergroups.txt
+  File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 0
+
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 11, in usergroups.txt
+Failed example:
+    '@@usergroup-userprefs' in self.browser.url
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 29, in usergroups.txt
+Failed example:
+    'Autumn Brooks' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 35, in usergroups.txt
+Failed example:
+    'Gracie Adams' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 39, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 39, example 16]>", line 1, in <module>
+        self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.roles:list:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 41, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected = True
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 41, example 17]>", line 1, in <module>
+        self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected = True
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.roles:list:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 42, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.email:records').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 42, example 18]>", line 1, in <module>
+        self.browser.getControl(name='users.email:records').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.email:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 44, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.email:records').value = 'gracie@bar.com'
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 44, example 19]>", line 1, in <module>
+        self.browser.getControl(name='users.email:records').value = 'gracie@bar.com'
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.email:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 45, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='form.button.Modify').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 45, example 20]>", line 1, in <module>
+        self.browser.getControl(name='form.button.Modify').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Modify'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 52, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 52, example 22]>", line 1, in <module>
+        self.browser.getControl(name='users.roles:list:records').getControl(value='Contributor').selected
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.roles:list:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 54, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.email:records').value
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 54, example 23]>", line 1, in <module>
+        self.browser.getControl(name='users.email:records').value
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.email:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 58, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='users.resetpassword:records').value = True
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 58, example 24]>", line 1, in <module>
+        self.browser.getControl(name='users.resetpassword:records').value = True
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'users.resetpassword:records'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 59, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='form.button.Modify').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 59, example 25]>", line 1, in <module>
+        self.browser.getControl(name='form.button.Modify').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Modify'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 62, in usergroups.txt
+Failed example:
+    'No mailhost defined. Unable to reset passwords.' in self.browser.contents
+Expected:
+    True
+Got:
+    False
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 84, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='delete:list').getControl(value='RwAO2YPa').selected = True
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 84, example 29]>", line 1, in <module>
+        self.browser.getControl(name='delete:list').getControl(value='RwAO2YPa').selected = True
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'delete:list'
+----------------------------------------------------------------------
+File "/.../plone-coredev/src/plone.app.controlpanel/plone/app/controlpanel/tests/usergroups.txt", line 85, in usergroups.txt
+Failed example:
+    self.browser.getControl(name='form.button.Modify').click()
+Exception raised:
+    Traceback (most recent call last):
+      File "/.../plone-coredev/eggs/zope.testing-3.7.7-py2.6.egg/zope/testing/doctest.py", line 1361, in __run
+        compileflags, 1) in test.globs
+      File "<doctest usergroups.txt[line 85, example 30]>", line 1, in <module>
+        self.browser.getControl(name='form.button.Modify').click()
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 366, in getControl
+        control, form = disambiguate(intermediate, msg, index)
+      File "/.../plone-coredev/eggs/zope.testbrowser-3.6.0a2-py2.6.egg/zope/testbrowser/browser.py", line 54, in disambiguate
+        raise LookupError(msg)
+    LookupError: name 'form.button.Modify'
+
+    1494/1778 (84.0%)
+
+Error in test test_transitionHistory (plone.app.layout.viewlets.tests.test_history.TestWorkflowHistoryViewlet)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.layout/plone/app/layout/viewlets/tests/test_history.py", line 52, in test_transitionHistory
+    self.delMember('tempuser')
+  File "/.../plone-coredev/src/plone.app.layout/plone/app/layout/viewlets/tests/test_history.py", line 20, in delMember
+    self.portal.portal_membership.deleteMembers([username])
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
+    1543/1778 (86.8%)
+
+Failure in test testRegisterToolsAsUtilities (plone.app.upgrade.v30.tests.TestMigrations_v2_5_x)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v30/tests.py", line 480, in testRegisterToolsAsUtilities
+    self.failIf(sm.queryUtility(i) is None)
+  File "/usr/lib/python2.6/unittest.py", line 321, in failIf
+    if expr: raise self.failureException, msg
+AssertionError
+
+    1556/1778 (87.5%)
+
+Error in test testInstallKss (plone.app.upgrade.v30.tests.TestMigrations_v3_0_alpha1)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v30/tests.py", line 626, in testInstallKss
+    mt.manage_delObjects((mtid, ))
+  File "/.../plone-coredev/src/Products.MimetypesRegistry/Products/MimetypesRegistry/MimeTypesRegistry.py", line 421, in manage_delObjects
+    self.unregister(self.lookup(id)[0])
+IndexError: tuple index out of range
+
+    1613/1778 (90.7%)
+
+Error in test testMigrateControlPanelActionIcons (plone.app.upgrade.v40.tests.TestMigrations_v4_0alpha1)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/plone.app.upgrade/plone/app/upgrade/v40/tests.py", line 97, in testMigrateControlPanelActionIcons
+    icon_expr=''
+TypeError: addAction() got an unexpected keyword argument 'icon_expr'
+
                       
-  Ran 1777 tests with 2 failures and 0 errors in # minutes # seconds.
+  Ran 1778 tests with 7 failures and 4 errors in # minutes # seconds.
 Running plone.app.contentrules.tests.test_configuration.TestContentrulesGSLayer tests:
   Set up plone.app.contentrules.tests.test_configuration.TestContentrulesGSLayer in # seconds.
   Running:
@@ -587,7 +935,7 @@
   Ran 133 tests with 0 failures and 0 errors in # seconds.
 Tearing down left over layers:
   Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
-Total: 2278 tests, 2 failures, 0 errors in # minutes # seconds.
+Total: 2279 tests, 7 failures, 4 errors in # minutes # seconds.
 #### Finished tests for group Plone ####
 
 #### Running tests for group PlonePAS ####
@@ -597,7 +945,7 @@
                     
   Ran 165 tests with 0 failures and 0 errors in # seconds.
 Running Products.PloneTestCase.layer.ZCML tests:
-  Set up Products.PloneTestCase.layer.ZCML in # minutes # seconds.
+  Set up Products.PloneTestCase.layer.ZCML in # seconds.
   Running:
                   
   Ran 38 tests with 0 failures and 0 errors in # seconds.
@@ -605,8 +953,34 @@
   Set up Products.PloneTestCase.layer.PloneSite in # seconds.
   Set up Products.PlonePAS.tests.layer.PlonePASLayer in # seconds.
   Running:
+    114/148 (77.0%)
+
+Error in test test_bug4333_delete_user_remove_memberdata (Products.PlonePAS.tests.test_membershiptool.TestMembershipTool)
+Traceback (most recent call last):
+  File "/usr/lib/python2.6/unittest.py", line 279, in run
+    testMethod()
+  File "/.../plone-coredev/src/Products.PlonePAS/Products/PlonePAS/tests/test_membershiptool.py", line 442, in test_bug4333_delete_user_remove_memberdata
+    self.membership.deleteMembers(['barney'])
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteMembers
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 526, in deleteMembers
+    reindex=1, recursive=1 )
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/src/plone.protect/plone/protect/utils.py", line 43, in _curried
+    return callable(*args, **kw)
+  File "<string>", line 4, in deleteLocalRoles
+  File "/.../plone-coredev/eggs/Zope2-2.12.0c1-py2.6-linux-i686.egg/AccessControl/requestmethod.py", line 70, in _curried
+    return callable(*args, **kw)
+  File "/.../plone-coredev/src/Products.CMFCore/Products/CMFCore/MembershipTool.py", line 472, in deleteLocalRoles
+    obj.reindexObjectSecurity()
+AttributeError: reindexObjectSecurity
+
                     
-  Ran 148 tests with 0 failures and 0 errors in # seconds.
+  Ran 148 tests with 0 failures and 1 errors in # seconds.
 Running zope.testing.testrunner.layer.UnitTests tests:
   Tear down Products.PlonePAS.tests.layer.PlonePASLayer in # seconds.
   Tear down Products.PloneTestCase.layer.PloneSite in # seconds.
@@ -618,7 +992,7 @@
   Ran 371 tests with 0 failures and 0 errors in # seconds.
 Tearing down left over layers:
   Tear down zope.testing.testrunner.layer.UnitTests in # seconds.
-Total: 722 tests, 0 failures, 0 errors in # minutes # seconds.
+Total: 722 tests, 0 failures, 1 errors in # minutes # seconds.
 #### Finished tests for group PlonePAS ####
 
 #### Running tests for group plone ####
@@ -1343,7 +1717,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1365,13 +1739,13 @@
       HTTP/1.1 200 OK
     - Content-Length: ...
     ?                 ^^^
-    + Content-Length: 236
+    + Content-Length: 238
     ?                 ^^^
     - Content-Type: application/x-zope-edit; charset=iso-8859-15
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1381,7 +1755,7 @@
     + auth:Basic dGVzdF91c2VyXzFfOnNlY3JldA==
       cookie:
     - lock-token:...
-    + lock-token:0.235364263518-0.493527656076-00105A989226:1252457867.528
+    + lock-token:0.00128267321974-0.437912640897-00105A989226:1252481364.516
       <BLANKLINE>
       some content
 ----------------------------------------------------------------------
@@ -1395,13 +1769,13 @@
       HTTP/1.1 200 OK
     - Content-Length: ...
     ?                 ^^^
-    + Content-Length: 250
+    + Content-Length: 252
     ?                 ^^^
     - Content-Type: application/x-zope-edit; charset=iso-8859-15
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1411,7 +1785,7 @@
     + auth:Basic dGVzdF91c2VyXzFfOnNlY3JldA==
       cookie:
     - lock-token:...
-    + lock-token:0.235364263518-0.493527656076-00105A989226:1252457867.528
+    + lock-token:0.00128267321974-0.437912640897-00105A989226:1252481364.516
       borrow_lock:1
       <BLANKLINE>
       some content
@@ -1429,7 +1803,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1454,7 +1828,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/another-file
       meta_type:Side Effects
@@ -1478,7 +1852,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
       <BLANKLINE>
       url:http://localhost/test_folder_1_/some-file
       meta_type:File
@@ -1505,7 +1879,7 @@
     ?                                      ---------------------
     + Content-Type: application/x-zope-edit
     - Last-Modified:...
-    + Last-Modified: Wed, 09 Sep 2009 00:57:47 GMT
+    + Last-Modified: Wed, 09 Sep 2009 07:29:24 GMT
     + <BLANKLINE>
     +      ˇ-Õ±
     + ¬0Ö·=O—êPùt–°ÇÉnEßí[ºÕ
@@ -1894,6 +2268,7 @@
 
 Failing tests in group Archetypes
 Failing tests in group Plone
+Failing tests in group PlonePAS
 Failing tests in group plone
 Failing tests in group portlets
 Failing tests in Products.CMFTestCase
@@ -1902,12 +2277,14 @@
 Failing tests in Products.kupu
 #### End test results ####
 
-$ grep ' [1-9][0-9]* \(failures\|errors\)' plips/plipbase-review-rossp.txt
+$ grep ' [1-9][0-9]* \(failures\|errors\)' plips/plip9305-review-rossp-tests.log
   Ran 511 tests with 4 failures and 0 errors in # minutes # seconds.
   Ran 22 tests with 3 failures and 0 errors in # seconds.
 Total: 675 tests, 7 failures, 0 errors in # minutes # seconds.
-  Ran 1777 tests with 2 failures and 0 errors in # minutes # seconds.
-Total: 2278 tests, 2 failures, 0 errors in # minutes # seconds.
+  Ran 1778 tests with 7 failures and 4 errors in # minutes # seconds.
+Total: 2279 tests, 7 failures, 4 errors in # minutes # seconds.
+  Ran 148 tests with 0 failures and 1 errors in # seconds.
+Total: 722 tests, 0 failures, 1 errors in # minutes # seconds.
   Ran 260 tests with 1 failures and 2 errors in # minutes # seconds.
 Total: 310 tests, 1 failures, 2 errors in # minutes # seconds.
   Ran 54 tests with 0 failures and 3 errors in # seconds.

Diff finished.  Wed Sep  9 07:06:55 2009
