# ----------------------------------------------------------------------------
# JENKINS BUILDOUT FOR PLONE COREDEV
# ----------------------------------------------------------------------------
# Jenkins buildout to run tests and code coverage for buildout.coredev on
# the jenkins.plone.org CI server.
#
#   $ bin/buildout
#   $ bin/jenkins-alltests
#   $ bin/jenkins-test-coverage
#   $ bin/jenkins-code-analysis
#
# See https://github.com/plone/buildout.jenkins for more details.
# ----------------------------------------------------------------------------
[buildout]
extends =
    core.cfg
    https://raw.github.com/plone/buildout.jenkins/master/jenkins.cfg
always-accept-server-certificate = true
parts -=
    instance
    packages
    test
    alltests
    alltests-at
parts +=
    jenkins-alltests
    jenkins-alltests-at
jenkins-test-eggs = ${buildout:test-eggs}

[jenkins-alltests]
<= alltests-base
recipe = plone.recipe.alltests
test-script = ${buildout:bin-directory}/jenkins-test

[jenkins-test-env]
zope_i18n_compile_mo_files = true
BUILDOUT_DIR = ${buildout:directory}

[jenkins-alltests-at]
<= alltests-at-base
recipe = plone.recipe.alltests
test-script = ${buildout:bin-directory}/jenkins-test
