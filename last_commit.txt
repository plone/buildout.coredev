Repository: plone.api


Branch: refs/heads/master
Date: 2024-02-07T21:32:28-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.api/commit/4b91ad80f4d96a92b374f7c3e12de7ae65fa5628

Fix lint checks and docs build

Files changed:
M requirements-docs.txt
M src/plone/api/content.py
M src/plone/api/relation.py
M src/plone/api/tests/test_content.py

b'diff --git a/requirements-docs.txt b/requirements-docs.txt\nindex 9923bd9f..8038479c 100644\n--- a/requirements-docs.txt\n+++ b/requirements-docs.txt\n@@ -1,4 +1,20 @@\n+docutils<0.17,>=0.15  # sphinx-book-theme 0.2.0 has requirement docutils<0.17,>=0.15\n Sphinx<5,>=3  # sphinx-book-theme 0.3.3 has requirement sphinx<5,>=3\n-sphinx-book-theme<=0.3.99\n+lesscpy\n+linkify-it-py\n myst-parser\n sphinx-autobuild\n+pydata-sphinx-theme<=0.8.99\n+sphinx-book-theme==0.3.3\n+sphinx-copybutton\n+sphinx-sitemap\n+sphinx-togglebutton\n+sphinxcontrib-spelling\n+sphinxext-opengraph\n+sphinxcontrib-applehelp==1.0.4  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-devhelp==1.0.2  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-htmlhelp==2.0.1  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-qthelp==1.0.3  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-serializinghtml==1.1.5  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-video\n+vale==2.30.0\ndiff --git a/src/plone/api/content.py b/src/plone/api/content.py\nindex bd5d03d1..90f43776 100644\n--- a/src/plone/api/content.py\n+++ b/src/plone/api/content.py\n@@ -11,15 +11,14 @@\n from plone.uuid.interfaces import IUUID\n from Products.CMFCore.DynamicType import DynamicType\n from Products.CMFCore.WorkflowCore import WorkflowException\n+from zope.component import ComponentLookupError\n from zope.component import getMultiAdapter\n from zope.component import getSiteManager\n-from zope.component import ComponentLookupError\n from zope.container.interfaces import INameChooser\n from zope.globalrequest import getRequest\n from zope.interface import Interface\n from zope.interface import providedBy\n \n-\n import random\n import transaction\n \n@@ -527,14 +526,14 @@ def get_view(name=None, context=None, request=None):\n \n     try:\n         return getMultiAdapter((context, request), name=name)\n-    except ComponentLookupError: \n-        #Getting all available views\n+    except ComponentLookupError:\n+        # Getting all available views\n         sm = getSiteManager()\n         available_views = sm.adapters.lookupAll(\n             required=(providedBy(context), providedBy(request)),\n             provided=Interface,\n         )\n-        \n+\n         # Check if the requested view is available\n         # by getting the names of all available views\n         available_view_names = [view[0] for view in available_views]\n@@ -549,6 +548,7 @@ def get_view(name=None, context=None, request=None):\n                 ),\n             )\n \n+\n @required_parameters("obj")\n def get_uuid(obj=None):\n     """Get the object\'s Universally Unique IDentifier (UUID).\ndiff --git a/src/plone/api/relation.py b/src/plone/api/relation.py\nindex 60df78ef..5540d4ca 100644\n--- a/src/plone/api/relation.py\n+++ b/src/plone/api/relation.py\n@@ -2,6 +2,7 @@\n \n Heavily inspired by collective.relationhelpers.\n """\n+\n from AccessControl.SecurityManagement import getSecurityManager\n from collections import defaultdict\n from plone.api.exc import InvalidParameterError\ndiff --git a/src/plone/api/tests/test_content.py b/src/plone/api/tests/test_content.py\nindex 7123667c..08ab2141 100644\n--- a/src/plone/api/tests/test_content.py\n+++ b/src/plone/api/tests/test_content.py\n@@ -1,4 +1,5 @@\n """Tests for plone.api.content."""\n+\n from Acquisition import aq_base\n from OFS.CopySupport import CopyError\n from OFS.event import ObjectWillBeMovedEvent\n'

Repository: plone.api


Branch: refs/heads/master
Date: 2024-02-07T21:34:22-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.api/commit/7205d49ac14e79c70746bb9df369b9294df22510

Merge pull request #529 from plone/fix-lint

Fix lint checks and docs build

Files changed:
M requirements-docs.txt
M src/plone/api/content.py
M src/plone/api/relation.py
M src/plone/api/tests/test_content.py

b'diff --git a/requirements-docs.txt b/requirements-docs.txt\nindex 9923bd9f..8038479c 100644\n--- a/requirements-docs.txt\n+++ b/requirements-docs.txt\n@@ -1,4 +1,20 @@\n+docutils<0.17,>=0.15  # sphinx-book-theme 0.2.0 has requirement docutils<0.17,>=0.15\n Sphinx<5,>=3  # sphinx-book-theme 0.3.3 has requirement sphinx<5,>=3\n-sphinx-book-theme<=0.3.99\n+lesscpy\n+linkify-it-py\n myst-parser\n sphinx-autobuild\n+pydata-sphinx-theme<=0.8.99\n+sphinx-book-theme==0.3.3\n+sphinx-copybutton\n+sphinx-sitemap\n+sphinx-togglebutton\n+sphinxcontrib-spelling\n+sphinxext-opengraph\n+sphinxcontrib-applehelp==1.0.4  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-devhelp==1.0.2  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-htmlhelp==2.0.1  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-qthelp==1.0.3  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-serializinghtml==1.1.5  # https://github.com/plone/documentation/issues/1604\n+sphinxcontrib-video\n+vale==2.30.0\ndiff --git a/src/plone/api/content.py b/src/plone/api/content.py\nindex bd5d03d1..90f43776 100644\n--- a/src/plone/api/content.py\n+++ b/src/plone/api/content.py\n@@ -11,15 +11,14 @@\n from plone.uuid.interfaces import IUUID\n from Products.CMFCore.DynamicType import DynamicType\n from Products.CMFCore.WorkflowCore import WorkflowException\n+from zope.component import ComponentLookupError\n from zope.component import getMultiAdapter\n from zope.component import getSiteManager\n-from zope.component import ComponentLookupError\n from zope.container.interfaces import INameChooser\n from zope.globalrequest import getRequest\n from zope.interface import Interface\n from zope.interface import providedBy\n \n-\n import random\n import transaction\n \n@@ -527,14 +526,14 @@ def get_view(name=None, context=None, request=None):\n \n     try:\n         return getMultiAdapter((context, request), name=name)\n-    except ComponentLookupError: \n-        #Getting all available views\n+    except ComponentLookupError:\n+        # Getting all available views\n         sm = getSiteManager()\n         available_views = sm.adapters.lookupAll(\n             required=(providedBy(context), providedBy(request)),\n             provided=Interface,\n         )\n-        \n+\n         # Check if the requested view is available\n         # by getting the names of all available views\n         available_view_names = [view[0] for view in available_views]\n@@ -549,6 +548,7 @@ def get_view(name=None, context=None, request=None):\n                 ),\n             )\n \n+\n @required_parameters("obj")\n def get_uuid(obj=None):\n     """Get the object\'s Universally Unique IDentifier (UUID).\ndiff --git a/src/plone/api/relation.py b/src/plone/api/relation.py\nindex 60df78ef..5540d4ca 100644\n--- a/src/plone/api/relation.py\n+++ b/src/plone/api/relation.py\n@@ -2,6 +2,7 @@\n \n Heavily inspired by collective.relationhelpers.\n """\n+\n from AccessControl.SecurityManagement import getSecurityManager\n from collections import defaultdict\n from plone.api.exc import InvalidParameterError\ndiff --git a/src/plone/api/tests/test_content.py b/src/plone/api/tests/test_content.py\nindex 7123667c..08ab2141 100644\n--- a/src/plone/api/tests/test_content.py\n+++ b/src/plone/api/tests/test_content.py\n@@ -1,4 +1,5 @@\n """Tests for plone.api.content."""\n+\n from Acquisition import aq_base\n from OFS.CopySupport import CopyError\n from OFS.event import ObjectWillBeMovedEvent\n'

