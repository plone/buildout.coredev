Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2024-06-18T14:09:26+02:00
Author: Manuel Reinhardt (reinhardt) <reinhardt@syslab.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/332b770b348766dd7f2bcdd42baab86428b7bbf2

Add upgrade step that removes AtD settings

See https://github.com/plone/Products.CMFPlone/pull/3765

Files changed:
A plone/app/upgrade/v61/profiles.zcml
A plone/app/upgrade/v61/profiles/to6103/registry.xml
M plone/app/upgrade/v61/configure.zcml

b'diff --git a/plone/app/upgrade/v61/configure.zcml b/plone/app/upgrade/v61/configure.zcml\nindex 53a58156..2512c3f2 100644\n--- a/plone/app/upgrade/v61/configure.zcml\n+++ b/plone/app/upgrade/v61/configure.zcml\n@@ -4,6 +4,8 @@\n     i18n_domain="plone"\n     >\n \n+  <include file="profiles.zcml" />\n+\n   <gs:upgradeSteps\n       profile="Products.CMFPlone:plone"\n       source="6099"\n@@ -56,6 +58,11 @@\n         title="Miscellaneous"\n         handler="..utils.null_upgrade_step"\n         />\n+\n+    <gs:upgradeDepends\n+      title="Run to6103 upgrade profile."\n+      import_profile="plone.app.upgrade.v61:to6103"\n+      />\n   </gs:upgradeSteps>\n \n </configure>\ndiff --git a/plone/app/upgrade/v61/profiles.zcml b/plone/app/upgrade/v61/profiles.zcml\nnew file mode 100644\nindex 00000000..1dd84f37\n--- /dev/null\n+++ b/plone/app/upgrade/v61/profiles.zcml\n@@ -0,0 +1,14 @@\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone">\n+\n+  <genericsetup:registerProfile\n+      name="to6103"\n+      title="Upgrade profile to Plone 6.1.0a4 (6103)"\n+      directory="profiles/to6103"\n+      for="plone.base.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n+</configure>\ndiff --git a/plone/app/upgrade/v61/profiles/to6103/registry.xml b/plone/app/upgrade/v61/profiles/to6103/registry.xml\nnew file mode 100644\nindex 00000000..3cf11181\n--- /dev/null\n+++ b/plone/app/upgrade/v61/profiles/to6103/registry.xml\n@@ -0,0 +1,7 @@\n+<?xml version="1.0"?>\n+<registry>\n+    <record name="plone.libraries_spellchecker_choice" remove="true" />\n+    <record name="plone.libraries_atd_ignore_strings" remove="true" />\n+    <record name="plone.libraries_atd_show_types" remove="true" />\n+    <record name="plone.libraries_atd_service_url" remove="true" />\n+</registry>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2024-06-18T18:30:16+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/d977aebb4b96cb82b7dd6855a2968b44a7f236ca

Hide plone.app.upgrade.v61 from products.

Files changed:
M plone/app/upgrade/__init__.py

b'diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex 35612617..7fefd73a 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -21,6 +21,7 @@ def getNonInstallableProducts(self):\n         return [\n             "plone.app.upgrade.v52",\n             "plone.app.upgrade.v60",\n+            "plone.app.upgrade.v61",\n         ]\n \n     def getNonInstallableProfiles(self):\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2024-06-19T15:20:02+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@py76.be>
Commit: https://github.com/plone/plone.app.upgrade/commit/8bf1dfbb3c134faa2d39b8d4e4ae86e0a4b2e1a2

Merge pull request #328 from plone/cleanup-patterns

Add upgrade step that removes AtD settings

Files changed:
A plone/app/upgrade/v61/profiles.zcml
A plone/app/upgrade/v61/profiles/to6103/registry.xml
M plone/app/upgrade/__init__.py
M plone/app/upgrade/v61/configure.zcml

b'diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex 35612617..7fefd73a 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -21,6 +21,7 @@ def getNonInstallableProducts(self):\n         return [\n             "plone.app.upgrade.v52",\n             "plone.app.upgrade.v60",\n+            "plone.app.upgrade.v61",\n         ]\n \n     def getNonInstallableProfiles(self):\ndiff --git a/plone/app/upgrade/v61/configure.zcml b/plone/app/upgrade/v61/configure.zcml\nindex 53a58156..2512c3f2 100644\n--- a/plone/app/upgrade/v61/configure.zcml\n+++ b/plone/app/upgrade/v61/configure.zcml\n@@ -4,6 +4,8 @@\n     i18n_domain="plone"\n     >\n \n+  <include file="profiles.zcml" />\n+\n   <gs:upgradeSteps\n       profile="Products.CMFPlone:plone"\n       source="6099"\n@@ -56,6 +58,11 @@\n         title="Miscellaneous"\n         handler="..utils.null_upgrade_step"\n         />\n+\n+    <gs:upgradeDepends\n+      title="Run to6103 upgrade profile."\n+      import_profile="plone.app.upgrade.v61:to6103"\n+      />\n   </gs:upgradeSteps>\n \n </configure>\ndiff --git a/plone/app/upgrade/v61/profiles.zcml b/plone/app/upgrade/v61/profiles.zcml\nnew file mode 100644\nindex 00000000..1dd84f37\n--- /dev/null\n+++ b/plone/app/upgrade/v61/profiles.zcml\n@@ -0,0 +1,14 @@\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone">\n+\n+  <genericsetup:registerProfile\n+      name="to6103"\n+      title="Upgrade profile to Plone 6.1.0a4 (6103)"\n+      directory="profiles/to6103"\n+      for="plone.base.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n+</configure>\ndiff --git a/plone/app/upgrade/v61/profiles/to6103/registry.xml b/plone/app/upgrade/v61/profiles/to6103/registry.xml\nnew file mode 100644\nindex 00000000..3cf11181\n--- /dev/null\n+++ b/plone/app/upgrade/v61/profiles/to6103/registry.xml\n@@ -0,0 +1,7 @@\n+<?xml version="1.0"?>\n+<registry>\n+    <record name="plone.libraries_spellchecker_choice" remove="true" />\n+    <record name="plone.libraries_atd_ignore_strings" remove="true" />\n+    <record name="plone.libraries_atd_show_types" remove="true" />\n+    <record name="plone.libraries_atd_service_url" remove="true" />\n+</registry>\n'

