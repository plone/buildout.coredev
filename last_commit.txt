Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2023-06-05T21:40:23-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.portlets/commit/0bb4bf9f2dd7c24571029984690138aa038fa375

Fix error on manage-content-type-portlets view

Files changed:
M plone/app/portlets/browser/manage.py
M plone/app/portlets/browser/templates/manage-content-type.pt

b'diff --git a/plone/app/portlets/browser/manage.py b/plone/app/portlets/browser/manage.py\nindex 1c970240..da3cdea9 100644\n--- a/plone/app/portlets/browser/manage.py\n+++ b/plone/app/portlets/browser/manage.py\n@@ -296,12 +296,6 @@ def getAssignmentsForManager(self, manager):\n     def portal_type(self):\n         return self.fti().Title()\n \n-    def portal_type_icon(self):\n-        plone_layout = getMultiAdapter(\n-            (self.context, self.request), name="plone_layout"\n-        )\n-        return plone_layout.getIcon(self.fti())\n-\n     @memoize\n     def fti(self):\n         portal_types = getToolByName(aq_inner(self.context), "portal_types")\ndiff --git a/plone/app/portlets/browser/templates/manage-content-type.pt b/plone/app/portlets/browser/templates/manage-content-type.pt\nindex 1b149b69..14b8f360 100644\n--- a/plone/app/portlets/browser/templates/manage-content-type.pt\n+++ b/plone/app/portlets/browser/templates/manage-content-type.pt\n@@ -12,12 +12,6 @@\n       <h1 class="documentFirstHeading"\n           i18n:translate="title_manage_contenttype_portlets"\n       >\n-        <img tal:define="\n-               icon view/portal_type_icon;\n-             "\n-             tal:replace="structure icon/html_tag"\n-             i18n:name="contenttype_icon"\n-        />\n       Manage content type portlets for\n         <span tal:content="view/portal_type"\n               i18n:name="contenttype_name"\n'

Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2023-06-05T21:42:13-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.portlets/commit/e8313737b10053e8e776f7cf5a5e397e1bf12f09

changelog

Files changed:
A news/177.bugfix

b'diff --git a/news/177.bugfix b/news/177.bugfix\nnew file mode 100644\nindex 00000000..75c0a84c\n--- /dev/null\n+++ b/news/177.bugfix\n@@ -0,0 +1 @@\n+Fix error on `@@manage-content-type-portlets` view. @davisagli\n'

Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2023-06-08T12:29:18+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.portlets/commit/1a124a638cced97d2d6e468231dcdfd55c60425b

Merge pull request #177 from plone/fix-manage-content-type-portlets

Fix error on manage-content-type-portlets view

Files changed:
A news/177.bugfix
M plone/app/portlets/browser/manage.py
M plone/app/portlets/browser/templates/manage-content-type.pt

b'diff --git a/news/177.bugfix b/news/177.bugfix\nnew file mode 100644\nindex 00000000..75c0a84c\n--- /dev/null\n+++ b/news/177.bugfix\n@@ -0,0 +1 @@\n+Fix error on `@@manage-content-type-portlets` view. @davisagli\ndiff --git a/plone/app/portlets/browser/manage.py b/plone/app/portlets/browser/manage.py\nindex 1c970240..da3cdea9 100644\n--- a/plone/app/portlets/browser/manage.py\n+++ b/plone/app/portlets/browser/manage.py\n@@ -296,12 +296,6 @@ def getAssignmentsForManager(self, manager):\n     def portal_type(self):\n         return self.fti().Title()\n \n-    def portal_type_icon(self):\n-        plone_layout = getMultiAdapter(\n-            (self.context, self.request), name="plone_layout"\n-        )\n-        return plone_layout.getIcon(self.fti())\n-\n     @memoize\n     def fti(self):\n         portal_types = getToolByName(aq_inner(self.context), "portal_types")\ndiff --git a/plone/app/portlets/browser/templates/manage-content-type.pt b/plone/app/portlets/browser/templates/manage-content-type.pt\nindex 1b149b69..14b8f360 100644\n--- a/plone/app/portlets/browser/templates/manage-content-type.pt\n+++ b/plone/app/portlets/browser/templates/manage-content-type.pt\n@@ -12,12 +12,6 @@\n       <h1 class="documentFirstHeading"\n           i18n:translate="title_manage_contenttype_portlets"\n       >\n-        <img tal:define="\n-               icon view/portal_type_icon;\n-             "\n-             tal:replace="structure icon/html_tag"\n-             i18n:name="contenttype_icon"\n-        />\n       Manage content type portlets for\n         <span tal:content="view/portal_type"\n               i18n:name="contenttype_name"\n'

