Repository: plone.formwidget.querystring


Branch: refs/heads/master
Date: 2021-02-23T08:46:56+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plone.formwidget.querystring/commit/7d207271704c0ad4449ff273f5323a12b52ebed0

Fix deprecated import (#23)

zope.site.hooks is deprecated since zope.site=3.7.1 (2009-11-18)

Files changed:
M CHANGES.rst
M plone/formwidget/querystring/widget.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7f8dff7..e7e1d9c 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- fixed deprecated import ``zope.site.hooks.getSite``\n+  [petschki]\n \n \n 1.1.10 (2017-08-09)\ndiff --git a/plone/formwidget/querystring/widget.py b/plone/formwidget/querystring/widget.py\nindex 05c5759..72628e3 100644\n--- a/plone/formwidget/querystring/widget.py\n+++ b/plone/formwidget/querystring/widget.py\n@@ -1,17 +1,19 @@\n-from zope.browserpage.viewpagetemplatefile import ViewPageTemplateFile\n-from zope.component import getUtility\n-from zope.component import getMultiAdapter\n-from zope.interface import implementer, implementer\n-from zope.site.hooks import getSite\n+# -*- coding: utf-8 -*-\n import z3c.form.interfaces\n import z3c.form.util\n-from z3c.form.widget import FieldWidget\n-from z3c.form.widget import Widget\n-from plone.app.querystring.querybuilder import QueryBuilder\n+\n+from Products.CMFPlone.utils import safe_unicode\n from plone.app.querystring.interfaces import IQuerystringRegistryReader\n+from plone.app.querystring.querybuilder import QueryBuilder\n from plone.formwidget.querystring.interfaces import IQueryStringWidget\n from plone.registry.interfaces import IRegistry\n-from Products.CMFPlone.utils import safe_unicode\n+from z3c.form.widget import FieldWidget\n+from z3c.form.widget import Widget\n+from zope.browserpage.viewpagetemplatefile import ViewPageTemplateFile\n+from zope.component import getMultiAdapter\n+from zope.component import getUtility\n+from zope.component.hooks import getSite\n+from zope.interface import implementer\n \n \n @implementer(IQueryStringWidget)\n'

