Repository: plone.app.discussion


Branch: refs/heads/3.4.x
Date: 2024-03-21T15:05:59+01:00
Author: Katja SÃ¼ss (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.app.discussion/commit/f3b50d753ffd5cd7da767b9d211bfe2d19360854

Apply validation for all captchas (version 3.4.x) (#233)

Files changed:
A news/233.bugfix
M plone/app/discussion/browser/validator.py

b"diff --git a/news/233.bugfix b/news/233.bugfix\nnew file mode 100644\nindex 00000000..8bfc3559\n--- /dev/null\n+++ b/news/233.bugfix\n@@ -0,0 +1 @@\n+Apply validation for all captchas. @ksuess\n\\ No newline at end of file\ndiff --git a/plone/app/discussion/browser/validator.py b/plone/app/discussion/browser/validator.py\nindex 360616b7..dce3c52b 100644\n--- a/plone/app/discussion/browser/validator.py\n+++ b/plone/app/discussion/browser/validator.py\n@@ -49,7 +49,7 @@ def validate(self, value):\n         registry = queryUtility(IRegistry)\n         settings = registry.forInterface(IDiscussionSettings, check=False)\n \n-        if settings.captcha in ('captcha', 'recaptcha', 'norobots'):\n+        if settings.captcha != 'disabled':\n             captcha = getMultiAdapter((aq_inner(self.context), self.request),\n                                       name=settings.captcha)\n             if not captcha.verify(input=value):\n"

