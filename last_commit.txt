Repository: plone.app.caching


Branch: refs/heads/2.x
Date: 2023-01-16T21:13:16+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.caching/commit/eb1d3c5bd11b278d91b6b279d9891be4577895ae

Apply weak caching to GET requests of content with application/json.

See https://github.com/plone/plone.rest/issues/73.

Note: this needs an upgrade step, but we will do this in plone.app.upgrade.
The plone.app.caching master branch already has an update to metadata version 2, so there is no room for an upgrade step on the 2.x branch.

Also note that it should not be needed to undo this change on Plone 6:
there the plone.content.dynamic ruleset will be applied, and this takes precedence over the current change.

Files changed:
A news/73.bugfix
M plone/app/caching/profiles/default/registry.xml

b'diff --git a/news/73.bugfix b/news/73.bugfix\nnew file mode 100644\nindex 0000000..8d0ebe4\n--- /dev/null\n+++ b/news/73.bugfix\n@@ -0,0 +1,3 @@\n+Apply weak caching to GET requests of content with application/json.\n+See `plone.rest issue 73 <https://github.com/plone/plone.rest/issues/73>`_.\n+[maurits]\ndiff --git a/plone/app/caching/profiles/default/registry.xml b/plone/app/caching/profiles/default/registry.xml\nindex c34b8be..221f4ad 100644\n--- a/plone/app/caching/profiles/default/registry.xml\n+++ b/plone/app/caching/profiles/default/registry.xml\n@@ -29,6 +29,7 @@\n           <element key="file_view">plone.content.itemView</element>\n           <element key="image_view">plone.content.itemView</element>\n           <element key="image_view_fullscreen">plone.content.itemView</element>\n+          <element key="GET_application_json_">plone.content.folderView</element>\n         </value>\n     </record>\n \n'

Repository: plone.app.caching


Branch: refs/heads/2.x
Date: 2023-01-20T16:10:54+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.caching/commit/7ece1570f8fcc0a09888f1dd4a454d876a130020

Merge pull request #111 from plone/maurits-json-weak-caching

Apply weak caching to GET requests of content with application/json.

Files changed:
A news/73.bugfix
M plone/app/caching/profiles/default/registry.xml

b'diff --git a/news/73.bugfix b/news/73.bugfix\nnew file mode 100644\nindex 0000000..8d0ebe4\n--- /dev/null\n+++ b/news/73.bugfix\n@@ -0,0 +1,3 @@\n+Apply weak caching to GET requests of content with application/json.\n+See `plone.rest issue 73 <https://github.com/plone/plone.rest/issues/73>`_.\n+[maurits]\ndiff --git a/plone/app/caching/profiles/default/registry.xml b/plone/app/caching/profiles/default/registry.xml\nindex c34b8be..221f4ad 100644\n--- a/plone/app/caching/profiles/default/registry.xml\n+++ b/plone/app/caching/profiles/default/registry.xml\n@@ -29,6 +29,7 @@\n           <element key="file_view">plone.content.itemView</element>\n           <element key="image_view">plone.content.itemView</element>\n           <element key="image_view_fullscreen">plone.content.itemView</element>\n+          <element key="GET_application_json_">plone.content.folderView</element>\n         </value>\n     </record>\n \n'

