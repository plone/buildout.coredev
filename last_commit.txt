Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-05-02T13:32:14+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/9aebe1f01bc6717697477ff7581bfbabafe1818e

use context instead of here and prefix main_template with @@

Files changed:
A news/3946.bugfix
M Products/CMFPlone/browser/login/templates/explainPWResetTool.pt
M Products/CMFPlone/browser/login/templates/login.pt
M Products/CMFPlone/browser/login/templates/login_help.pt
M Products/CMFPlone/controlpanel/browser/redirects-manage.pt

b'diff --git a/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt b/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\nindex bb1126708f..2a6f4c1df9 100644\n--- a/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\n+++ b/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\n@@ -1,5 +1,5 @@\n <html lang="en"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n <body>\n \ndiff --git a/Products/CMFPlone/browser/login/templates/login.pt b/Products/CMFPlone/browser/login/templates/login.pt\nindex 8b2b5a8b9e..164311e22d 100644\n--- a/Products/CMFPlone/browser/login/templates/login.pt\n+++ b/Products/CMFPlone/browser/login/templates/login.pt\n@@ -4,7 +4,7 @@\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n       i18n:domain="plone"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n >\n <body>\n   <metal:main fill-slot="main">\ndiff --git a/Products/CMFPlone/browser/login/templates/login_help.pt b/Products/CMFPlone/browser/login/templates/login_help.pt\nindex 07fee80d49..7a80ea563b 100644\n--- a/Products/CMFPlone/browser/login/templates/login_help.pt\n+++ b/Products/CMFPlone/browser/login/templates/login_help.pt\n@@ -3,7 +3,7 @@\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n <body>\n   <metal:main fill-slot="main">\ndiff --git a/Products/CMFPlone/controlpanel/browser/redirects-manage.pt b/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\nindex 9df9e7d0d5..197cef3997 100644\n--- a/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\n+++ b/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\n@@ -3,7 +3,7 @@\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n   <body>\ndiff --git a/news/3946.bugfix b/news/3946.bugfix\nnew file mode 100644\nindex 0000000000..1853b16830\n--- /dev/null\n+++ b/news/3946.bugfix\n@@ -0,0 +1,3 @@\n+Use `context` instead of `here` in templates.\n+Call `@@main_template` (with prefix `@@`) to optimize lookup.\n+[@jensens]\n\\ No newline at end of file\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-05-02T14:11:59+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/308aa4d03ee6c0ce9d8119ce4c37955153f0bc6f

Merge pull request #3946 from plone/context-instead-of-here-in-templates

use context instead of here and prefix main_template with @@

Files changed:
A news/3946.bugfix
M Products/CMFPlone/browser/login/templates/explainPWResetTool.pt
M Products/CMFPlone/browser/login/templates/login.pt
M Products/CMFPlone/browser/login/templates/login_help.pt
M Products/CMFPlone/controlpanel/browser/redirects-manage.pt

b'diff --git a/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt b/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\nindex bb1126708f..2a6f4c1df9 100644\n--- a/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\n+++ b/Products/CMFPlone/browser/login/templates/explainPWResetTool.pt\n@@ -1,5 +1,5 @@\n <html lang="en"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n <body>\n \ndiff --git a/Products/CMFPlone/browser/login/templates/login.pt b/Products/CMFPlone/browser/login/templates/login.pt\nindex 8b2b5a8b9e..164311e22d 100644\n--- a/Products/CMFPlone/browser/login/templates/login.pt\n+++ b/Products/CMFPlone/browser/login/templates/login.pt\n@@ -4,7 +4,7 @@\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n       i18n:domain="plone"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n >\n <body>\n   <metal:main fill-slot="main">\ndiff --git a/Products/CMFPlone/browser/login/templates/login_help.pt b/Products/CMFPlone/browser/login/templates/login_help.pt\nindex 07fee80d49..7a80ea563b 100644\n--- a/Products/CMFPlone/browser/login/templates/login_help.pt\n+++ b/Products/CMFPlone/browser/login/templates/login_help.pt\n@@ -3,7 +3,7 @@\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n <body>\n   <metal:main fill-slot="main">\ndiff --git a/Products/CMFPlone/controlpanel/browser/redirects-manage.pt b/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\nindex 9df9e7d0d5..197cef3997 100644\n--- a/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\n+++ b/Products/CMFPlone/controlpanel/browser/redirects-manage.pt\n@@ -3,7 +3,7 @@\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-      metal:use-macro="here/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n   <body>\ndiff --git a/news/3946.bugfix b/news/3946.bugfix\nnew file mode 100644\nindex 0000000000..1853b16830\n--- /dev/null\n+++ b/news/3946.bugfix\n@@ -0,0 +1,3 @@\n+Use `context` instead of `here` in templates.\n+Call `@@main_template` (with prefix `@@`) to optimize lookup.\n+[@jensens]\n\\ No newline at end of file\n'

