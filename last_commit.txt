Repository: plone.app.users


Branch: refs/heads/master
Date: 2020-11-19T17:03:44+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.users/commit/3e19236e96721d560dd472feb0f17f50d91e62b3

Fix setting "Use site default" for wysiwyg_editor. Fixes https://github.com/plone/Products.CMFPlone/issues/3173

Files changed:
A news/95.bugfix
M plone/app/users/browser/account.py

b'diff --git a/news/95.bugfix b/news/95.bugfix\nnew file mode 100644\nindex 0000000..a30f67c\n--- /dev/null\n+++ b/news/95.bugfix\n@@ -0,0 +1,2 @@\n+Fix setting "Use site default" for wysiwyg_editor. Fix https://github.com/plone/Products.CMFPlone/issues/3173\n+[pbauer]\n\\ No newline at end of file\ndiff --git a/plone/app/users/browser/account.py b/plone/app/users/browser/account.py\nindex cb1e436..91c0e6c 100644\n--- a/plone/app/users/browser/account.py\n+++ b/plone/app/users/browser/account.py\n@@ -126,6 +126,18 @@ def set_portrait(self, value):\n \n     portrait = property(get_portrait, set_portrait)\n \n+    @property\n+    def wysiwyg_editor(self):\n+        return self._getProperty(\'wysiwyg_editor\')\n+\n+    @wysiwyg_editor.setter\n+    def wysiwyg_editor(self, value):\n+        if value is None:\n+            # set property that the site-default from the registry is used\n+            # since both \'None\' and None result in plaintexteditor\n+            value = \'\'\n+        return self._setProperty(\'wysiwyg_editor\', value)\n+\n \n @implementer(IAccountPanelForm)\n class AccountPanelForm(AutoExtensibleForm, form.Form):\n'

Repository: plone.app.users


Branch: refs/heads/master
Date: 2020-11-20T07:58:37+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.users/commit/496838f57e3046a2ffd243f46a43e4b53c26de90

Merge pull request #95 from plone/fix_wysiwyg_editor

Fix setting "Use site default" for wysiwyg_editor

Files changed:
A news/95.bugfix
M plone/app/users/browser/account.py

b'diff --git a/news/95.bugfix b/news/95.bugfix\nnew file mode 100644\nindex 0000000..a30f67c\n--- /dev/null\n+++ b/news/95.bugfix\n@@ -0,0 +1,2 @@\n+Fix setting "Use site default" for wysiwyg_editor. Fix https://github.com/plone/Products.CMFPlone/issues/3173\n+[pbauer]\n\\ No newline at end of file\ndiff --git a/plone/app/users/browser/account.py b/plone/app/users/browser/account.py\nindex cb1e436..91c0e6c 100644\n--- a/plone/app/users/browser/account.py\n+++ b/plone/app/users/browser/account.py\n@@ -126,6 +126,18 @@ def set_portrait(self, value):\n \n     portrait = property(get_portrait, set_portrait)\n \n+    @property\n+    def wysiwyg_editor(self):\n+        return self._getProperty(\'wysiwyg_editor\')\n+\n+    @wysiwyg_editor.setter\n+    def wysiwyg_editor(self, value):\n+        if value is None:\n+            # set property that the site-default from the registry is used\n+            # since both \'None\' and None result in plaintexteditor\n+            value = \'\'\n+        return self._setProperty(\'wysiwyg_editor\', value)\n+\n \n @implementer(IAccountPanelForm)\n class AccountPanelForm(AutoExtensibleForm, form.Form):\n'

