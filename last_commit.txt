Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2020-08-25T18:00:17+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.iterate/commit/3ae59988524a9fde402fe6fd4fcf19a9f0c9156d

Fixed deprecation warning for ObjectEvent.

```
DeprecationWarning: ObjectEvent is deprecated.
Import from zope.interface.interfaces
```

Files changed:
A news/3130.bugfix
M plone/app/iterate/event.py

b'diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..e70a53d\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for ObjectEvent.\n+[maurits]\ndiff --git a/plone/app/iterate/event.py b/plone/app/iterate/event.py\nindex 4cd89ae..61cd53e 100644\n--- a/plone/app/iterate/event.py\n+++ b/plone/app/iterate/event.py\n@@ -22,7 +22,7 @@\n ##################################################################\n """\n """\n-from zope.component.interfaces import ObjectEvent\n+from zope.interface.interfaces import ObjectEvent\n from zope.event import notify\n from zope.interface import implementer\n \n'

Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2020-08-25T18:03:27+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.iterate/commit/59c4fb1a4c44f3d92e8e82a12d48961880bf9196

Avoid confusion between profiles.py and profiles directory.

Moved all code from ``profiles.py`` to ``setuphandlers.py`` to avoid confusion with ``profiles`` directory.
This avoids a warning at startup:

```
ImportWarning: Not importing directory '.../plone/app/iterate/profiles': missing __init__.py
```

Files changed:
M news/3130.bugfix
M plone/app/iterate/configure.zcml
M plone/app/iterate/setuphandlers.py
D plone/app/iterate/profiles.py

b'diff --git a/news/3130.bugfix b/news/3130.bugfix\nindex e70a53d..7b7b8f7 100644\n--- a/news/3130.bugfix\n+++ b/news/3130.bugfix\n@@ -1,2 +1,3 @@\n Fixed deprecation warning for ObjectEvent.\n+Moved all code from ``profiles.py`` to ``setuphandlers.py`` to avoid confusion with ``profiles`` directory.\n [maurits]\ndiff --git a/plone/app/iterate/configure.zcml b/plone/app/iterate/configure.zcml\nindex a0c9ed9..9f63dfa 100644\n--- a/plone/app/iterate/configure.zcml\n+++ b/plone/app/iterate/configure.zcml\n@@ -74,7 +74,7 @@\n \n   <utility\n       name="plone.app.iterate"\n-      factory=".profiles.HiddenProfiles"\n+      factory=".setuphandlers.HiddenProfiles"\n       />\n \n   <adapter factory=".archiver.ContentArchiver" />\ndiff --git a/plone/app/iterate/profiles.py b/plone/app/iterate/profiles.py\ndeleted file mode 100644\nindex bf8d286..0000000\n--- a/plone/app/iterate/profiles.py\n+++ /dev/null\n@@ -1,17 +0,0 @@\n-# -*- coding: utf-8 -*-\n-from Products.CMFPlone.interfaces import INonInstallable\n-from zope.interface import implementer\n-\n-\n-@implementer(INonInstallable)\n-class HiddenProfiles(object):\n-\n-    def getNonInstallableProfiles(self):\n-        """Prevents uninstall profile from showing up in the profile list\n-        when creating a Plone site.\n-\n-        """\n-        return [\n-            u\'plone.app.iterate:uninstall\',\n-            u\'plone.app.iterate:plone.app.iterate\',\n-        ]\ndiff --git a/plone/app/iterate/setuphandlers.py b/plone/app/iterate/setuphandlers.py\nindex 7ecd606..e397cb6 100644\n--- a/plone/app/iterate/setuphandlers.py\n+++ b/plone/app/iterate/setuphandlers.py\n@@ -1,11 +1,29 @@\n # -*- coding: utf-8 -*-\n-"""Deprecation warning for plone.app.iterate:plone.app.iterate profile."""\n+from Products.CMFPlone.interfaces import INonInstallable\n+from zope.interface import implementer\n \n import warnings\n \n \n+@implementer(INonInstallable)\n+class HiddenProfiles(object):\n+\n+    def getNonInstallableProfiles(self):\n+        """Prevents uninstall profile from showing up in the profile list\n+        when creating a Plone site.\n+\n+        """\n+        return [\n+            u\'plone.app.iterate:uninstall\',\n+            u\'plone.app.iterate:plone.app.iterate\',\n+        ]\n+\n+\n def deprecate_profile(tool):\n-    """Deprecation profile plone.app.iterate."""\n+    """Deprecation profile plone.app.iterate.\n+\n+    Deprecation warning for plone.app.iterate:plone.app.iterate profile.\n+    """\n     warnings.warn(\n         \'The profile with id "plone.app.iterate" was renamed to "default".\',\n         DeprecationWarning\n'

Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2020-08-26T10:20:27+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.app.iterate/commit/6c30dedf601319e604f39ad494677b2f5c391e43

Merge pull request #79 from plone/maurits/fix-warnings

Fix startup warnings

Files changed:
A news/3130.bugfix
M plone/app/iterate/configure.zcml
M plone/app/iterate/event.py
M plone/app/iterate/setuphandlers.py
D plone/app/iterate/profiles.py

b'diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..7b7b8f7\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,3 @@\n+Fixed deprecation warning for ObjectEvent.\n+Moved all code from ``profiles.py`` to ``setuphandlers.py`` to avoid confusion with ``profiles`` directory.\n+[maurits]\ndiff --git a/plone/app/iterate/configure.zcml b/plone/app/iterate/configure.zcml\nindex a0c9ed9..9f63dfa 100644\n--- a/plone/app/iterate/configure.zcml\n+++ b/plone/app/iterate/configure.zcml\n@@ -74,7 +74,7 @@\n \n   <utility\n       name="plone.app.iterate"\n-      factory=".profiles.HiddenProfiles"\n+      factory=".setuphandlers.HiddenProfiles"\n       />\n \n   <adapter factory=".archiver.ContentArchiver" />\ndiff --git a/plone/app/iterate/event.py b/plone/app/iterate/event.py\nindex 4cd89ae..61cd53e 100644\n--- a/plone/app/iterate/event.py\n+++ b/plone/app/iterate/event.py\n@@ -22,7 +22,7 @@\n ##################################################################\n """\n """\n-from zope.component.interfaces import ObjectEvent\n+from zope.interface.interfaces import ObjectEvent\n from zope.event import notify\n from zope.interface import implementer\n \ndiff --git a/plone/app/iterate/profiles.py b/plone/app/iterate/profiles.py\ndeleted file mode 100644\nindex bf8d286..0000000\n--- a/plone/app/iterate/profiles.py\n+++ /dev/null\n@@ -1,17 +0,0 @@\n-# -*- coding: utf-8 -*-\n-from Products.CMFPlone.interfaces import INonInstallable\n-from zope.interface import implementer\n-\n-\n-@implementer(INonInstallable)\n-class HiddenProfiles(object):\n-\n-    def getNonInstallableProfiles(self):\n-        """Prevents uninstall profile from showing up in the profile list\n-        when creating a Plone site.\n-\n-        """\n-        return [\n-            u\'plone.app.iterate:uninstall\',\n-            u\'plone.app.iterate:plone.app.iterate\',\n-        ]\ndiff --git a/plone/app/iterate/setuphandlers.py b/plone/app/iterate/setuphandlers.py\nindex 7ecd606..e397cb6 100644\n--- a/plone/app/iterate/setuphandlers.py\n+++ b/plone/app/iterate/setuphandlers.py\n@@ -1,11 +1,29 @@\n # -*- coding: utf-8 -*-\n-"""Deprecation warning for plone.app.iterate:plone.app.iterate profile."""\n+from Products.CMFPlone.interfaces import INonInstallable\n+from zope.interface import implementer\n \n import warnings\n \n \n+@implementer(INonInstallable)\n+class HiddenProfiles(object):\n+\n+    def getNonInstallableProfiles(self):\n+        """Prevents uninstall profile from showing up in the profile list\n+        when creating a Plone site.\n+\n+        """\n+        return [\n+            u\'plone.app.iterate:uninstall\',\n+            u\'plone.app.iterate:plone.app.iterate\',\n+        ]\n+\n+\n def deprecate_profile(tool):\n-    """Deprecation profile plone.app.iterate."""\n+    """Deprecation profile plone.app.iterate.\n+\n+    Deprecation warning for plone.app.iterate:plone.app.iterate profile.\n+    """\n     warnings.warn(\n         \'The profile with id "plone.app.iterate" was renamed to "default".\',\n         DeprecationWarning\n'

