Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2021-10-13T23:48:02+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/52d1f6943a8b89e31e7e9366c990dd85f5018c6e

Renamed v60/profiles/to_alpha1 to to6000.

We have no Plone alpha1 release yet, but do have a pre alpha.

Note that in the past we had for example profile name `to522` pointing to directory `to_522` with underscore, applied in a `to522` upgrade step.
I found that confusing.

Now I use the same name `to6000` for all, no underscores.
And instead of an upgrade step, needing zcml and Python code, I have an upgradeDepends, needing only zcml.

Files changed:
A news/6000.bugfix
A plone/app/upgrade/v60/profiles/to6000/actions.xml
A plone/app/upgrade/v60/profiles/to6000/controlpanel.xml
A plone/app/upgrade/v60/profiles/to6000/registry.xml
A plone/app/upgrade/v60/profiles/to6000/toolset.xml
M plone/app/upgrade/v60/alphas.py
M plone/app/upgrade/v60/configure.zcml
M plone/app/upgrade/v60/profiles.zcml
D plone/app/upgrade/v60/profiles/to_alpha1/actions.xml
D plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml
D plone/app/upgrade/v60/profiles/to_alpha1/registry.xml
D plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml

b'diff --git a/news/6000.bugfix b/news/6000.bugfix\nnew file mode 100644\nindex 00000000..c83e8b95\n--- /dev/null\n+++ b/news/6000.bugfix\n@@ -0,0 +1,3 @@\n+Renamed ``v60/profiles/to_alpha1`` to ``to6000``.\n+We have no Plone alpha1 release yet, but do have a pre alpha.\n+[maurits]\ndiff --git a/plone/app/upgrade/v60/alphas.py b/plone/app/upgrade/v60/alphas.py\nindex f35aad33..58f9e552 100644\n--- a/plone/app/upgrade/v60/alphas.py\n+++ b/plone/app/upgrade/v60/alphas.py\n@@ -14,10 +14,6 @@\n logger = logging.getLogger("plone.app.upgrade")\n \n \n-def to60alpha1(context):\n-    loadMigrationProfile(context, "profile-plone.app.upgrade.v60:to60alpha1")\n-\n-\n def remove_temp_folder(context):\n     """Remove temp_folder from Zope root if broken."""\n \ndiff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex b1e64f4f..ea190d13 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -21,10 +21,9 @@\n            handler=".alphas.make_site_dx"\n            />\n \n-      <gs:upgradeStep\n-           title="Run to60alpha1 upgrade profile."\n-           description=""\n-           handler=".alphas.to60alpha1"\n+      <gs:upgradeDepends\n+           title="Run to6000 upgrade profile."\n+           import_profile="plone.app.upgrade.v60:to6000"\n            />\n \n       <gs:upgradeStep\ndiff --git a/plone/app/upgrade/v60/profiles.zcml b/plone/app/upgrade/v60/profiles.zcml\nindex 7bb1ccc6..321cf793 100644\n--- a/plone/app/upgrade/v60/profiles.zcml\n+++ b/plone/app/upgrade/v60/profiles.zcml\n@@ -4,10 +4,9 @@\n     i18n_domain="plone">\n \n   <genericsetup:registerProfile\n-      name="to60alpha1"\n-      title="Upgrade profile for Plone 5.2.x to Plone 6.0alpha1"\n-      description=""\n-      directory="profiles/to_alpha1"\n+      name="to6000"\n+      title="Upgrade profile for Plone 5.2.x to Plone 6.0.0a1.dev0 (6000)"\n+      directory="profiles/to6000"\n       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/actions.xml b/plone/app/upgrade/v60/profiles/to6000/actions.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/actions.xml\nrename to plone/app/upgrade/v60/profiles/to6000/actions.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml b/plone/app/upgrade/v60/profiles/to6000/controlpanel.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml\nrename to plone/app/upgrade/v60/profiles/to6000/controlpanel.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml b/plone/app/upgrade/v60/profiles/to6000/registry.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\nrename to plone/app/upgrade/v60/profiles/to6000/registry.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml b/plone/app/upgrade/v60/profiles/to6000/toolset.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml\nrename to plone/app/upgrade/v60/profiles/to6000/toolset.xml\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2021-10-14T14:09:11+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.app.upgrade/commit/0443dfe0da7182777de2003537f6bce9a374014f

Merge pull request #260 from plone/maurits/rename-profile-to_alpha1

Renamed v60/profiles/to_alpha1 to to6000.

Files changed:
A news/6000.bugfix
A plone/app/upgrade/v60/profiles/to6000/actions.xml
A plone/app/upgrade/v60/profiles/to6000/controlpanel.xml
A plone/app/upgrade/v60/profiles/to6000/registry.xml
A plone/app/upgrade/v60/profiles/to6000/toolset.xml
M plone/app/upgrade/v60/alphas.py
M plone/app/upgrade/v60/configure.zcml
M plone/app/upgrade/v60/profiles.zcml
D plone/app/upgrade/v60/profiles/to_alpha1/actions.xml
D plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml
D plone/app/upgrade/v60/profiles/to_alpha1/registry.xml
D plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml

b'diff --git a/news/6000.bugfix b/news/6000.bugfix\nnew file mode 100644\nindex 00000000..c83e8b95\n--- /dev/null\n+++ b/news/6000.bugfix\n@@ -0,0 +1,3 @@\n+Renamed ``v60/profiles/to_alpha1`` to ``to6000``.\n+We have no Plone alpha1 release yet, but do have a pre alpha.\n+[maurits]\ndiff --git a/plone/app/upgrade/v60/alphas.py b/plone/app/upgrade/v60/alphas.py\nindex f35aad33..58f9e552 100644\n--- a/plone/app/upgrade/v60/alphas.py\n+++ b/plone/app/upgrade/v60/alphas.py\n@@ -14,10 +14,6 @@\n logger = logging.getLogger("plone.app.upgrade")\n \n \n-def to60alpha1(context):\n-    loadMigrationProfile(context, "profile-plone.app.upgrade.v60:to60alpha1")\n-\n-\n def remove_temp_folder(context):\n     """Remove temp_folder from Zope root if broken."""\n \ndiff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex b1e64f4f..ea190d13 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -21,10 +21,9 @@\n            handler=".alphas.make_site_dx"\n            />\n \n-      <gs:upgradeStep\n-           title="Run to60alpha1 upgrade profile."\n-           description=""\n-           handler=".alphas.to60alpha1"\n+      <gs:upgradeDepends\n+           title="Run to6000 upgrade profile."\n+           import_profile="plone.app.upgrade.v60:to6000"\n            />\n \n       <gs:upgradeStep\ndiff --git a/plone/app/upgrade/v60/profiles.zcml b/plone/app/upgrade/v60/profiles.zcml\nindex 7bb1ccc6..321cf793 100644\n--- a/plone/app/upgrade/v60/profiles.zcml\n+++ b/plone/app/upgrade/v60/profiles.zcml\n@@ -4,10 +4,9 @@\n     i18n_domain="plone">\n \n   <genericsetup:registerProfile\n-      name="to60alpha1"\n-      title="Upgrade profile for Plone 5.2.x to Plone 6.0alpha1"\n-      description=""\n-      directory="profiles/to_alpha1"\n+      name="to6000"\n+      title="Upgrade profile for Plone 5.2.x to Plone 6.0.0a1.dev0 (6000)"\n+      directory="profiles/to6000"\n       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/actions.xml b/plone/app/upgrade/v60/profiles/to6000/actions.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/actions.xml\nrename to plone/app/upgrade/v60/profiles/to6000/actions.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml b/plone/app/upgrade/v60/profiles/to6000/controlpanel.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/controlpanel.xml\nrename to plone/app/upgrade/v60/profiles/to6000/controlpanel.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml b/plone/app/upgrade/v60/profiles/to6000/registry.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\nrename to plone/app/upgrade/v60/profiles/to6000/registry.xml\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml b/plone/app/upgrade/v60/profiles/to6000/toolset.xml\nsimilarity index 100%\nrename from plone/app/upgrade/v60/profiles/to_alpha1/toolset.xml\nrename to plone/app/upgrade/v60/profiles/to6000/toolset.xml\n'

