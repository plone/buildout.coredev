Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-04-17T21:52:18+02:00
Author: Tiberiu Ichim (tiberiuichim) <tiberiuichim@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/4e2ed977b66a51d57df651909fbd5c4e3d48f8ec

Fix test for IBlocks behavior (#914)

* Improve test for blocks behavior

* Create 914.bugfix

Files changed:
A news/914.bugfix
M src/plone/restapi/tests/test_behaviors.py

b'diff --git a/news/914.bugfix b/news/914.bugfix\nnew file mode 100644\nindex 00000000..4b48cbab\n--- /dev/null\n+++ b/news/914.bugfix\n@@ -0,0 +1,2 @@\n+Small fix in IBlocks test, addedd a missing assert call\n+[tiberiuichim]\ndiff --git a/src/plone/restapi/tests/test_behaviors.py b/src/plone/restapi/tests/test_behaviors.py\nindex c412162f..b28836e4 100644\n--- a/src/plone/restapi/tests/test_behaviors.py\n+++ b/src/plone/restapi/tests/test_behaviors.py\n@@ -6,7 +6,6 @@\n from plone.dexterity.fti import DexterityFTI\n from plone.restapi.behaviors import IBlocks\n from plone.restapi.testing import PLONE_RESTAPI_DX_INTEGRATION_TESTING\n-from zope.interface import alsoProvides\n \n import unittest\n \n@@ -24,8 +23,6 @@ def setUp(self):\n         self.portal.portal_types._setObject("blocksfolder", fti)\n         fti.klass = "plone.dexterity.content.Container"\n         fti.behaviors = ("volto.blocks",)\n-        self.fti = fti\n-        alsoProvides(self.request, IBlocks)\n \n     def test_basic_fields(self):\n         self.portal.invokeFactory(\n@@ -47,4 +44,4 @@ def test_behavior_provides(self):\n             "blocksfolder", id="blocksfolder", title=u"Folder with blocks"\n         )\n \n-        IBlocks.providedBy(self.portal["blocksfolder"])\n+        assert IBlocks.providedBy(self.portal["blocksfolder"])\n'

