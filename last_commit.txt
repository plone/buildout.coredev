Repository: plone.folder


Branch: refs/heads/master
Date: 2024-01-20T00:57:29+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.folder/commit/43610ddc7744d9ab13798861969d815a067c7e45

Fix partial ordering tests.

Files changed:
A news/23.bugfix
M src/plone/folder/tests/test_partialordering.py

b'diff --git a/news/23.bugfix b/news/23.bugfix\nnew file mode 100644\nindex 0000000..410795d\n--- /dev/null\n+++ b/news/23.bugfix\n@@ -0,0 +1,2 @@\n+Fix partial ordering tests.\n+[maurits]\ndiff --git a/src/plone/folder/tests/test_partialordering.py b/src/plone/folder/tests/test_partialordering.py\nindex f92f4ee..462b511 100644\n--- a/src/plone/folder/tests/test_partialordering.py\n+++ b/src/plone/folder/tests/test_partialordering.py\n@@ -67,7 +67,11 @@ def runTableTests(self, action, tests):\n             container, ordering = self.create()\n             ids = set(container.objectIds())\n             method = getattr(ordering, action)\n-            if isinstance(rval, Exception):\n+            if isinstance(rval, type):\n+                # This means the return value is an Exception class.\n+                # It is NOT an *instance* of an Exception class,\n+                # so the following would not work:\n+                # isinstance(rval, Exception)\n                 self.assertRaises(rval, method, *args)\n             else:\n                 self.assertEqual(method(*args), rval)\n'

Repository: plone.folder


Branch: refs/heads/master
Date: 2024-01-20T00:59:34+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.folder/commit/fb173ad8ab58f94cc4f870e7079a8dfb14787959

pre-commit autoupdate

Files changed:
M .pre-commit-config.yaml

b'diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex a8d47d2..75b264d 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -7,16 +7,16 @@ ci:\n \n repos:\n -   repo: https://github.com/asottile/pyupgrade\n-    rev: v3.14.0\n+    rev: v3.15.0\n     hooks:\n     -   id: pyupgrade\n         args: [--py38-plus]\n -   repo: https://github.com/pycqa/isort\n-    rev: 5.12.0\n+    rev: 5.13.2\n     hooks:\n     -   id: isort\n -   repo: https://github.com/psf/black\n-    rev: 23.9.1\n+    rev: 23.12.1\n     hooks:\n     -   id: black\n -   repo: https://github.com/collective/zpretty\n@@ -32,7 +32,7 @@ repos:\n #  """\n ##\n -   repo: https://github.com/PyCQA/flake8\n-    rev: 6.1.0\n+    rev: 7.0.0\n     hooks:\n     -   id: flake8\n -   repo: https://github.com/codespell-project/codespell\n@@ -58,7 +58,7 @@ repos:\n     hooks:\n     -   id: pyroma\n -   repo: https://github.com/mgedmin/check-python-versions\n-    rev: "0.21.3"\n+    rev: "0.22.0"\n     hooks:\n     -   id: check-python-versions\n         args: [\'--only\', \'setup.py,pyproject.toml\']\n'

Repository: plone.folder


Branch: refs/heads/master
Date: 2024-01-20T01:12:34+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.folder/commit/bc6bdafcbdb1af9a533f18979118b9caa76564e0

Use isinstance and issubclass in partial ordering tests.

Files changed:
M src/plone/folder/tests/test_partialordering.py

b'diff --git a/src/plone/folder/tests/test_partialordering.py b/src/plone/folder/tests/test_partialordering.py\nindex 462b511..4db3d63 100644\n--- a/src/plone/folder/tests/test_partialordering.py\n+++ b/src/plone/folder/tests/test_partialordering.py\n@@ -67,11 +67,7 @@ def runTableTests(self, action, tests):\n             container, ordering = self.create()\n             ids = set(container.objectIds())\n             method = getattr(ordering, action)\n-            if isinstance(rval, type):\n-                # This means the return value is an Exception class.\n-                # It is NOT an *instance* of an Exception class,\n-                # so the following would not work:\n-                # isinstance(rval, Exception)\n+            if isinstance(rval, type) and issubclass(rval, Exception):\n                 self.assertRaises(rval, method, *args)\n             else:\n                 self.assertEqual(method(*args), rval)\n'

Repository: plone.folder


Branch: refs/heads/master
Date: 2024-01-21T10:39:15+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.folder/commit/0d372fbd167576fb95919ad54ee3144342a8da50

Merge pull request #26 from plone/maurits-fix-partial-ordering-tests

Fix partial ordering tests

Files changed:
A news/23.bugfix
M .pre-commit-config.yaml
M src/plone/folder/tests/test_partialordering.py

b'diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex a8d47d2..75b264d 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -7,16 +7,16 @@ ci:\n \n repos:\n -   repo: https://github.com/asottile/pyupgrade\n-    rev: v3.14.0\n+    rev: v3.15.0\n     hooks:\n     -   id: pyupgrade\n         args: [--py38-plus]\n -   repo: https://github.com/pycqa/isort\n-    rev: 5.12.0\n+    rev: 5.13.2\n     hooks:\n     -   id: isort\n -   repo: https://github.com/psf/black\n-    rev: 23.9.1\n+    rev: 23.12.1\n     hooks:\n     -   id: black\n -   repo: https://github.com/collective/zpretty\n@@ -32,7 +32,7 @@ repos:\n #  """\n ##\n -   repo: https://github.com/PyCQA/flake8\n-    rev: 6.1.0\n+    rev: 7.0.0\n     hooks:\n     -   id: flake8\n -   repo: https://github.com/codespell-project/codespell\n@@ -58,7 +58,7 @@ repos:\n     hooks:\n     -   id: pyroma\n -   repo: https://github.com/mgedmin/check-python-versions\n-    rev: "0.21.3"\n+    rev: "0.22.0"\n     hooks:\n     -   id: check-python-versions\n         args: [\'--only\', \'setup.py,pyproject.toml\']\ndiff --git a/news/23.bugfix b/news/23.bugfix\nnew file mode 100644\nindex 0000000..410795d\n--- /dev/null\n+++ b/news/23.bugfix\n@@ -0,0 +1,2 @@\n+Fix partial ordering tests.\n+[maurits]\ndiff --git a/src/plone/folder/tests/test_partialordering.py b/src/plone/folder/tests/test_partialordering.py\nindex f92f4ee..4db3d63 100644\n--- a/src/plone/folder/tests/test_partialordering.py\n+++ b/src/plone/folder/tests/test_partialordering.py\n@@ -67,7 +67,7 @@ def runTableTests(self, action, tests):\n             container, ordering = self.create()\n             ids = set(container.objectIds())\n             method = getattr(ordering, action)\n-            if isinstance(rval, Exception):\n+            if isinstance(rval, type) and issubclass(rval, Exception):\n                 self.assertRaises(rval, method, *args)\n             else:\n                 self.assertEqual(method(*args), rval)\n'

