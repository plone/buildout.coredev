Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2021-10-27T10:00:42+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.contentlisting/commit/228651c0fbab320712b40aa499b8b0dcd690e81f

Adapt the tests for Plone 6

Adapt the tests to cope with the fact the since Plone 6 the Plone site
root is cataloged

Files changed:
A news/39.bugfix
M plone/app/contentlisting/tests/integration.rst

b'diff --git a/news/39.bugfix b/news/39.bugfix\nnew file mode 100644\nindex 0000000..fdf20e7\n--- /dev/null\n+++ b/news/39.bugfix\n@@ -0,0 +1 @@\n+Adapt the tests for Plone 6 [ale-rt]\ndiff --git a/plone/app/contentlisting/tests/integration.rst b/plone/app/contentlisting/tests/integration.rst\nindex dc6878e..154e281 100644\n--- a/plone/app/contentlisting/tests/integration.rst\n+++ b/plone/app/contentlisting/tests/integration.rst\n@@ -18,7 +18,7 @@ common cases) the sequence will be a catalog search result set.\n \n     >>> portal = layer[\'portal\']\n     >>> catalog = getToolByName(portal, \'portal_catalog\')\n-    >>> results = catalog.searchResults(dict(is_default_page=False))\n+    >>> results = catalog.searchResults(dict(is_default_page=False, getId={"not":"plone"}))\n     >>> contentlist = IContentListing(results)\n     >>> print(contentlist)\n     <plone.app.contentlisting.contentlisting.ContentListing object ...>\n'

Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2021-10-30T12:06:03+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentlisting/commit/e98400a1dfb32e6520f206ca5888177a36fae53b

Merge pull request #39 from plone/portal-in-the-catalog

Adapt the tests for Plone 6

Files changed:
A news/39.bugfix
M plone/app/contentlisting/tests/integration.rst

b'diff --git a/news/39.bugfix b/news/39.bugfix\nnew file mode 100644\nindex 0000000..fdf20e7\n--- /dev/null\n+++ b/news/39.bugfix\n@@ -0,0 +1 @@\n+Adapt the tests for Plone 6 [ale-rt]\ndiff --git a/plone/app/contentlisting/tests/integration.rst b/plone/app/contentlisting/tests/integration.rst\nindex dc6878e..154e281 100644\n--- a/plone/app/contentlisting/tests/integration.rst\n+++ b/plone/app/contentlisting/tests/integration.rst\n@@ -18,7 +18,7 @@ common cases) the sequence will be a catalog search result set.\n \n     >>> portal = layer[\'portal\']\n     >>> catalog = getToolByName(portal, \'portal_catalog\')\n-    >>> results = catalog.searchResults(dict(is_default_page=False))\n+    >>> results = catalog.searchResults(dict(is_default_page=False, getId={"not":"plone"}))\n     >>> contentlist = IContentListing(results)\n     >>> print(contentlist)\n     <plone.app.contentlisting.contentlisting.ContentListing object ...>\n'

