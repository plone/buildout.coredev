Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-06-10T05:23:02Z
Author: Rohan Shaw (rohnsha0) <rohnsha0@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/48838c0729ce96fcf9b1e5236facfa3ec9fa49ae

Fix TypeError in getGroups sorting

Files changed:
A news/3952.bugfix
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py

b"diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\nindex 57ea21eeed..755c807856 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n@@ -63,7 +63,7 @@ def getGroups(self):\n             for m in self.gtool.getGroupsForPrincipal(self.member)\n         ]\n         groupResults.sort(\n-            key=lambda x: x is not None and normalizeString(x.getGroupTitleOrName())\n+            key=lambda x: normalizeString(x.getGroupTitleOrName()) if x else ''\n         )\n         return [i for i in groupResults if i]\n \ndiff --git a/news/3952.bugfix b/news/3952.bugfix\nnew file mode 100644\nindex 0000000000..a63571e60a\n--- /dev/null\n+++ b/news/3952.bugfix\n@@ -0,0 +1,2 @@\n+Fix TypeError in getGroups sorting\n+[@rohnsha0]\n\\ No newline at end of file\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-06-10T15:58:30+05:30
Author: Rohan Shaw (rohnsha0) <86848116+rohnsha0@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/f7a537773cae9c4b56f57e31ac02192a7ce35648

Merge pull request #3972 from rohnsha0/group_error

Fix TypeError in getGroups sorting

Files changed:
A news/3952.bugfix
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py

b"diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\nindex 57ea21eeed..755c807856 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n@@ -63,7 +63,7 @@ def getGroups(self):\n             for m in self.gtool.getGroupsForPrincipal(self.member)\n         ]\n         groupResults.sort(\n-            key=lambda x: x is not None and normalizeString(x.getGroupTitleOrName())\n+            key=lambda x: normalizeString(x.getGroupTitleOrName()) if x else ''\n         )\n         return [i for i in groupResults if i]\n \ndiff --git a/news/3952.bugfix b/news/3952.bugfix\nnew file mode 100644\nindex 0000000000..a63571e60a\n--- /dev/null\n+++ b/news/3952.bugfix\n@@ -0,0 +1,2 @@\n+Fix TypeError in getGroups sorting\n+[@rohnsha0]\n\\ No newline at end of file\n"

