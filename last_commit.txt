Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2021-10-05T09:32:37+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.Archetypes/commit/9f61031798a6668cd81bb6c4be6edf2019a083d7

Prevent installation on Python 3, as we know Archetypes does not work there.

https://github.com/plone/Products.CMFPlone/issues/3330

Files changed:
A news/3330.bugfix
M setup.cfg
M setup.py

b'diff --git a/news/3330.bugfix b/news/3330.bugfix\nnew file mode 100644\nindex 00000000..a23a636f\n--- /dev/null\n+++ b/news/3330.bugfix\n@@ -0,0 +1,2 @@\n+Prevent installation on Python 3, as we know Archetypes does not work there.\n+[maurits]\ndiff --git a/setup.cfg b/setup.cfg\nindex 190e1a22..7bf855ec 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -4,7 +4,5 @@ ignore =\n     bootstrap.py\n \n [bdist_wheel]\n-universal = 1\n-\n-[zest.releaser]\n-create-wheel = yes\n+# Py2 only\n+universal = 0\ndiff --git a/setup.py b/setup.py\nindex 7925a73e..410e7f6d 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,5 +1,12 @@\n from setuptools import setup, find_packages\n \n+import sys\n+\n+\n+if sys.version_info[0] != 2:\n+    # Prevent creating or installing a distribution with Python 3.\n+    raise ValueError("Archetypes is Python 2 only.")\n+\n version = \'1.16.6.dev0\'\n \n setup(name=\'Products.Archetypes\',\n@@ -28,6 +35,7 @@\n       namespace_packages=[\'Products\'],\n       include_package_data=True,\n       zip_safe=False,\n+      python_requires="==2.7.*",\n       extras_require=dict(\n         test=[\n             \'zope.annotation\',\n'

Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2021-10-07T12:28:40+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.Archetypes/commit/3744573a40f72bdc0459daf1173fcff841e42bfb

Merge pull request #138 from plone/prevent-installation-on-py3

Prevent installation on Python 3, where we know Archetypes does not work

Files changed:
A news/3330.bugfix
M setup.cfg
M setup.py

b'diff --git a/news/3330.bugfix b/news/3330.bugfix\nnew file mode 100644\nindex 00000000..a23a636f\n--- /dev/null\n+++ b/news/3330.bugfix\n@@ -0,0 +1,2 @@\n+Prevent installation on Python 3, as we know Archetypes does not work there.\n+[maurits]\ndiff --git a/setup.cfg b/setup.cfg\nindex 190e1a22..7bf855ec 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -4,7 +4,5 @@ ignore =\n     bootstrap.py\n \n [bdist_wheel]\n-universal = 1\n-\n-[zest.releaser]\n-create-wheel = yes\n+# Py2 only\n+universal = 0\ndiff --git a/setup.py b/setup.py\nindex 7925a73e..410e7f6d 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,5 +1,12 @@\n from setuptools import setup, find_packages\n \n+import sys\n+\n+\n+if sys.version_info[0] != 2:\n+    # Prevent creating or installing a distribution with Python 3.\n+    raise ValueError("Archetypes is Python 2 only.")\n+\n version = \'1.16.6.dev0\'\n \n setup(name=\'Products.Archetypes\',\n@@ -28,6 +35,7 @@\n       namespace_packages=[\'Products\'],\n       include_package_data=True,\n       zip_safe=False,\n+      python_requires="==2.7.*",\n       extras_require=dict(\n         test=[\n             \'zope.annotation\',\n'

