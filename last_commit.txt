Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-04-23T23:33:54+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/2ec09a9681ae74c3967e5201bbbcdc0be0bc6646

load test: add image scale tests

Files changed:
M performance/images.py

b'diff --git a/performance/images.py b/performance/images.py\nindex 76dd39ed..45bf980d 100644\n--- a/performance/images.py\n+++ b/performance/images.py\n@@ -10,7 +10,33 @@ def image_01mb_get(self):\n     self.client.get(\n         "/testfolder-read/image-1mb/@@images/image.jpeg",\n         headers=headers,\n-        name="Image 1 MB GET",\n+        name="Image 01 MB GET",\n+    )\n+\n+\n+def image_01mb_get_scale_large(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-1mb/@@images/image/large",\n+        headers=headers,\n+        name="Image 01 MB GET (Scale Large)",\n+    )\n+\n+\n+def image_01mb_get_scale_preview(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-1mb/@@images/image/preview",\n+        headers=headers,\n+        name="Image 01 MB GET (Scale Preview)",\n     )\n \n \n@@ -23,7 +49,7 @@ def image_02mb_get(self):\n     self.client.get(\n         "/testfolder-read/image-2mb/@@images/image.jpeg",\n         headers=headers,\n-        name="Image 2 MB GET",\n+        name="Image 02 MB GET",\n     )\n \n \n@@ -36,7 +62,7 @@ def image_03mb_get(self):\n     self.client.get(\n         "/testfolder-read/image-3mb/@@images/image.jpeg",\n         headers=headers,\n-        name="Image 3 MB GET",\n+        name="Image 03 MB GET",\n     )\n \n \n@@ -56,6 +82,8 @@ def image_10mb_get(self):\n class UserBehavior(TaskSet):\n     tasks = {\n         image_01mb_get: 10,\n+        image_01mb_get_scale_large: 20,\n+        image_01mb_get_scale_preview: 20,\n         image_02mb_get: 10,\n         image_03mb_get: 10,\n         image_10mb_get: 5,\n'

