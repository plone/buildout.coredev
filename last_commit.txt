Repository: plone.app.layout


Branch: refs/heads/master
Date: 2024-05-02T14:36:31+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/651f7775c144a1e56cb31cfa5a13464c9c20abbf

Less Deprecationwanring by using plone.base.navigationroot

Files changed:
A news/364.bugfix
M plone/app/layout/globals/portal.py
M plone/app/layout/viewlets/common.py

b'diff --git a/news/364.bugfix b/news/364.bugfix\nnew file mode 100644\nindex 00000000..85233554\n--- /dev/null\n+++ b/news/364.bugfix\n@@ -0,0 +1 @@\n+Less DeprecationWarnings by using `plone.base.navigationroot.*` [@jensens]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/globals/portal.py b/plone/app/layout/globals/portal.py\nindex 33a9854f..6884913f 100644\n--- a/plone/app/layout/globals/portal.py\n+++ b/plone/app/layout/globals/portal.py\n@@ -1,10 +1,10 @@\n from .interfaces import IPortalState\n from Acquisition import aq_inner\n-from plone.app.layout.navigation.root import getNavigationRoot\n-from plone.app.layout.navigation.root import getNavigationRootObject\n from plone.base.interfaces import IPloneSiteRoot\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ISiteSchema\n+from plone.base.navigationroot import get_navigation_root\n+from plone.base.navigationroot import get_navigation_root_object\n from plone.i18n.interfaces import ILanguageSchema\n from plone.memoize.view import memoize\n from plone.memoize.view import memoize_contextless\n@@ -48,7 +48,7 @@ def portal_url(self):\n     def navigation_root(self):\n         context = aq_inner(self.context)\n         portal = self.portal()\n-        return getNavigationRootObject(context, portal)\n+        return get_navigation_root_object(context, portal)\n \n     @memoize\n     def navigation_root_title(self):\n@@ -64,7 +64,7 @@ def navigation_root_title(self):\n \n     @memoize\n     def navigation_root_path(self):\n-        return getNavigationRoot(aq_inner(self.context))\n+        return get_navigation_root(aq_inner(self.context))\n \n     @memoize\n     def navigation_root_url(self):\ndiff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py\nindex ac026b3f..6d602116 100644\n--- a/plone/app/layout/viewlets/common.py\n+++ b/plone/app/layout/viewlets/common.py\n@@ -5,12 +5,12 @@\n from functools import total_ordering\n from html import escape\n from plone.app.layout.globals.interfaces import IViewView\n-from plone.app.layout.navigation.root import getNavigationRoot\n from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IPloneSiteRoot\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ISiteSchema\n from plone.base.interfaces.controlpanel import INavigationSchema\n+from plone.base.navigationroot import get_navigation_root\n from plone.base.utils import safe_text\n from plone.i18n.interfaces import ILanguageSchema\n from plone.memoize.view import memoize\n@@ -234,7 +234,7 @@ def language_settings(self):\n \n     @property\n     def navtree_path(self):\n-        return getNavigationRoot(self.context)\n+        return get_navigation_root(self.context)\n \n     @property\n     def current_language(self):\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2024-05-02T17:02:26+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/397d8ec8b0884a4119031f0c30df537c797076ac

Merge pull request #364 from plone/use-plone.base.navigationroot

Less Deprecationwanring by using plone.base.navigationroot

Files changed:
A news/364.bugfix
M plone/app/layout/globals/portal.py
M plone/app/layout/viewlets/common.py

b'diff --git a/news/364.bugfix b/news/364.bugfix\nnew file mode 100644\nindex 00000000..85233554\n--- /dev/null\n+++ b/news/364.bugfix\n@@ -0,0 +1 @@\n+Less DeprecationWarnings by using `plone.base.navigationroot.*` [@jensens]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/globals/portal.py b/plone/app/layout/globals/portal.py\nindex 33a9854f..6884913f 100644\n--- a/plone/app/layout/globals/portal.py\n+++ b/plone/app/layout/globals/portal.py\n@@ -1,10 +1,10 @@\n from .interfaces import IPortalState\n from Acquisition import aq_inner\n-from plone.app.layout.navigation.root import getNavigationRoot\n-from plone.app.layout.navigation.root import getNavigationRootObject\n from plone.base.interfaces import IPloneSiteRoot\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ISiteSchema\n+from plone.base.navigationroot import get_navigation_root\n+from plone.base.navigationroot import get_navigation_root_object\n from plone.i18n.interfaces import ILanguageSchema\n from plone.memoize.view import memoize\n from plone.memoize.view import memoize_contextless\n@@ -48,7 +48,7 @@ def portal_url(self):\n     def navigation_root(self):\n         context = aq_inner(self.context)\n         portal = self.portal()\n-        return getNavigationRootObject(context, portal)\n+        return get_navigation_root_object(context, portal)\n \n     @memoize\n     def navigation_root_title(self):\n@@ -64,7 +64,7 @@ def navigation_root_title(self):\n \n     @memoize\n     def navigation_root_path(self):\n-        return getNavigationRoot(aq_inner(self.context))\n+        return get_navigation_root(aq_inner(self.context))\n \n     @memoize\n     def navigation_root_url(self):\ndiff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py\nindex ac026b3f..6d602116 100644\n--- a/plone/app/layout/viewlets/common.py\n+++ b/plone/app/layout/viewlets/common.py\n@@ -5,12 +5,12 @@\n from functools import total_ordering\n from html import escape\n from plone.app.layout.globals.interfaces import IViewView\n-from plone.app.layout.navigation.root import getNavigationRoot\n from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IPloneSiteRoot\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ISiteSchema\n from plone.base.interfaces.controlpanel import INavigationSchema\n+from plone.base.navigationroot import get_navigation_root\n from plone.base.utils import safe_text\n from plone.i18n.interfaces import ILanguageSchema\n from plone.memoize.view import memoize\n@@ -234,7 +234,7 @@ def language_settings(self):\n \n     @property\n     def navtree_path(self):\n-        return getNavigationRoot(self.context)\n+        return get_navigation_root(self.context)\n \n     @property\n     def current_language(self):\n'

