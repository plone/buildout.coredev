Repository: plone.rest


Branch: refs/heads/master
Date: 2021-09-24T23:25:07+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.rest/commit/d43c1bdaf544f7417b69be770daf601e4134eeb0

Create zpretty.yml (#121)

Files changed:
A .github/workflows/zpretty.yml

b"diff --git a/.github/workflows/zpretty.yml b/.github/workflows/zpretty.yml\nnew file mode 100644\nindex 0000000..a329901\n--- /dev/null\n+++ b/.github/workflows/zpretty.yml\n@@ -0,0 +1,40 @@\n+name: zpretty\n+on: [push]\n+jobs:\n+  build:\n+    runs-on: ubuntu-latest\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        python-version: [3.8]\n+\n+    steps:\n+      # git checkout\n+      - uses: actions/checkout@v2\n+\n+      # python setup\n+      - name: Set up Python ${{ matrix.python-version }}\n+        uses: actions/setup-python@v1\n+        with:\n+          python-version: ${{ matrix.python-version }}\n+\n+      # python cache\n+      - uses: actions/cache@v1\n+        with:\n+          path: ~/.cache/pip\n+          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}\n+          restore-keys: |\n+            ${{ runner.os }}-pip-\n+\n+      # install zpretty\n+      - name: install zpretty\n+        run: pip install zpretty\n+\n+      # run zpretty\n+      - name: run zpretty\n+        run: find src/ -name *.zcml | xargs zpretty -i\n+\n+      # XXX: this doesn't work on gh actions (https://github.com/plone/plone.restapi/pull/1119/checks?check_run_id=2686474411)\n+      # # run git diff\n+      # - name: run git diff\n+      #   run: git diff --exit-code\n"

