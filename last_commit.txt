Repository: plone.app.event


Branch: refs/heads/master
Date: 2020-09-01T22:00:12+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/6ba7e901e6fc3699f7756591c0c9eba859d20739

Fixed deprecation warning for setDefaultRoles.

Files changed:
A news/3130.bugfix
M plone/app/event/__init__.py

b"diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 00000000..b7b74517\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for ``setDefaultRoles``.\n+[maurits]\ndiff --git a/plone/app/event/__init__.py b/plone/app/event/__init__.py\nindex ac2e4a0c..aa11903e 100644\n--- a/plone/app/event/__init__.py\n+++ b/plone/app/event/__init__.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n \n packageName = __name__\n@@ -8,7 +8,7 @@\n # BBB Permissions\n PORTAL_ADD_PERMISSION = 'Add portal events'  # CMFCalendar/ATCT permissions\n \n-setDefaultRoles(\n+addPermission(\n     PORTAL_ADD_PERMISSION,\n     ('Manager', 'Site Administrator', 'Owner',)\n )\n"

Repository: plone.app.event


Branch: refs/heads/master
Date: 2020-09-02T11:40:45+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.event/commit/8e1f3d7adbe56e2eca590fa6ffd56365660536c9

Merge pull request #319 from plone/maurits/fix-warnings

Fixed deprecation warning for setDefaultRoles.

Files changed:
A news/3130.bugfix
M plone/app/event/__init__.py

b"diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 00000000..b7b74517\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for ``setDefaultRoles``.\n+[maurits]\ndiff --git a/plone/app/event/__init__.py b/plone/app/event/__init__.py\nindex ac2e4a0c..aa11903e 100644\n--- a/plone/app/event/__init__.py\n+++ b/plone/app/event/__init__.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n \n packageName = __name__\n@@ -8,7 +8,7 @@\n # BBB Permissions\n PORTAL_ADD_PERMISSION = 'Add portal events'  # CMFCalendar/ATCT permissions\n \n-setDefaultRoles(\n+addPermission(\n     PORTAL_ADD_PERMISSION,\n     ('Manager', 'Site Administrator', 'Owner',)\n )\n"

