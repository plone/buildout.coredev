Repository: plone.cachepurging


Branch: refs/heads/master
Date: 2021-02-25T21:41:12+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.cachepurging/commit/c3e97aedd2a761cff87b160e52f65061f22b8ccd

Replaced deprecated Thread.isAlive by is_alive.

The old name no longer works in Python 3.9.
The new name already works in Python 2.7.

Files changed:
A news/22.bugfix
M plone/cachepurging/purger.py
M plone/cachepurging/tests/test_purger.py
M setup.py

b'diff --git a/news/22.bugfix b/news/22.bugfix\nnew file mode 100644\nindex 0000000..63949db\n--- /dev/null\n+++ b/news/22.bugfix\n@@ -0,0 +1,3 @@\n+Replaced deprecated Thread.isAlive by is_alive.\n+The old name no longer works in Python 3.9.\n+The new name already works in Python 2.7.\ndiff --git a/plone/cachepurging/purger.py b/plone/cachepurging/purger.py\nindex f5670b2..7879e32 100644\n--- a/plone/cachepurging/purger.py\n+++ b/plone/cachepurging/purger.py\n@@ -122,7 +122,7 @@ def stopThreads(self, wait=False):\n         if wait:\n             for worker in six.itervalues(self.workers):\n                 worker.join(5)\n-                if worker.isAlive():\n+                if worker.is_alive():\n                     logger.warning(\n                         "Worker thread %s failed to terminate",\n                         worker\ndiff --git a/plone/cachepurging/tests/test_purger.py b/plone/cachepurging/tests/test_purger.py\nindex ee55d81..246d18a 100644\n--- a/plone/cachepurging/tests/test_purger.py\n+++ b/plone/cachepurging/tests/test_purger.py\n@@ -87,10 +87,10 @@ def tearDown(self):\n             if self.httpd is not None:\n                 self.httpd.shutdown()\n \n-                if self.httpt.isAlive():\n+                if self.httpt.is_alive():\n                     self.httpt.join(5)\n \n-                if self.httpt.isAlive():\n+                if self.httpt.is_alive():\n                     self.fail("Thread failed to shut down")\n \n                 self.purger = None\ndiff --git a/setup.py b/setup.py\nindex abe0b5b..f84091c 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -13,6 +13,7 @@\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n         "Framework :: Plone :: 5.2",\n+        "Framework :: Plone :: 6.0",\n         "Framework :: Plone :: Core",\n         "License :: OSI Approved :: GNU General Public License v2 (GPLv2)",\n         "Programming Language :: Python",\n@@ -20,6 +21,7 @@\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n+        "Programming Language :: Python :: 3.9",\n     ],\n     keywords="plone cache purge",\n     author="Plone Foundation",\n'

Repository: plone.cachepurging


Branch: refs/heads/master
Date: 2021-02-26T16:49:51+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.cachepurging/commit/cee79ae2c1a3460398fb4ecf9aef7c837e3a5c08

Merge pull request #23 from plone/maurits/thread-is-alive

Replaced deprecated Thread.isAlive by is_alive.

Files changed:
A news/22.bugfix
M plone/cachepurging/purger.py
M plone/cachepurging/tests/test_purger.py
M setup.py

b'diff --git a/news/22.bugfix b/news/22.bugfix\nnew file mode 100644\nindex 0000000..63949db\n--- /dev/null\n+++ b/news/22.bugfix\n@@ -0,0 +1,3 @@\n+Replaced deprecated Thread.isAlive by is_alive.\n+The old name no longer works in Python 3.9.\n+The new name already works in Python 2.7.\ndiff --git a/plone/cachepurging/purger.py b/plone/cachepurging/purger.py\nindex f5670b2..7879e32 100644\n--- a/plone/cachepurging/purger.py\n+++ b/plone/cachepurging/purger.py\n@@ -122,7 +122,7 @@ def stopThreads(self, wait=False):\n         if wait:\n             for worker in six.itervalues(self.workers):\n                 worker.join(5)\n-                if worker.isAlive():\n+                if worker.is_alive():\n                     logger.warning(\n                         "Worker thread %s failed to terminate",\n                         worker\ndiff --git a/plone/cachepurging/tests/test_purger.py b/plone/cachepurging/tests/test_purger.py\nindex ee55d81..246d18a 100644\n--- a/plone/cachepurging/tests/test_purger.py\n+++ b/plone/cachepurging/tests/test_purger.py\n@@ -87,10 +87,10 @@ def tearDown(self):\n             if self.httpd is not None:\n                 self.httpd.shutdown()\n \n-                if self.httpt.isAlive():\n+                if self.httpt.is_alive():\n                     self.httpt.join(5)\n \n-                if self.httpt.isAlive():\n+                if self.httpt.is_alive():\n                     self.fail("Thread failed to shut down")\n \n                 self.purger = None\ndiff --git a/setup.py b/setup.py\nindex abe0b5b..f84091c 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -13,6 +13,7 @@\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n         "Framework :: Plone :: 5.2",\n+        "Framework :: Plone :: 6.0",\n         "Framework :: Plone :: Core",\n         "License :: OSI Approved :: GNU General Public License v2 (GPLv2)",\n         "Programming Language :: Python",\n@@ -20,6 +21,7 @@\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n+        "Programming Language :: Python :: 3.9",\n     ],\n     keywords="plone cache purge",\n     author="Plone Foundation",\n'

