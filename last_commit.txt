Repository: plone.volto


Branch: refs/heads/main
Date: 2024-07-26T10:46:46+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.volto/commit/391128eaf63f9386a7aecfc1498827b0cf538349

fix getting the the variation when migrating collections to listing blocks

Files changed:
M src/plone/volto/browser/migrate_to_volto.py

b'diff --git a/src/plone/volto/browser/migrate_to_volto.py b/src/plone/volto/browser/migrate_to_volto.py\nindex d5c58b9..1b913b3 100644\n--- a/src/plone/volto/browser/migrate_to_volto.py\n+++ b/src/plone/volto/browser/migrate_to_volto.py\n@@ -271,7 +271,7 @@ def generate_listing_block_from_collection(obj, move_relative_path=False):\n         "summary_view": "summary",\n         "album_view": "imageGallery",\n     }\n-    variation = variation_mapping.get(obj.getLayout, "default")\n+    variation = variation_mapping.get(obj.getLayout(), "default")\n     block = {\n         "@type": "listing",\n         "querystring": qs,\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2024-07-26T10:48:27+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.volto/commit/34af8558c76f9e1a7a29cae32f143ec1ba045b83

Add changenote

Files changed:
A news/158.bugfix

b'diff --git a/news/158.bugfix b/news/158.bugfix\nnew file mode 100644\nindex 00000000..47362e56\n--- /dev/null\n+++ b/news/158.bugfix\n@@ -0,0 +1 @@\n+Fix getting the the variation when migrating collections to listing blocks. @pbauer\n\\ No newline at end of file\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2024-07-29T17:39:48+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.volto/commit/5b37bd1bc4f9b0660431b084b208e77dd287c748

Merge pull request #158 from plone/fix_listing_block_migration

fix getting the the variation when migrating collections to listing blocks

Files changed:
A news/158.bugfix
M src/plone/volto/browser/migrate_to_volto.py

b'diff --git a/news/158.bugfix b/news/158.bugfix\nnew file mode 100644\nindex 00000000..47362e56\n--- /dev/null\n+++ b/news/158.bugfix\n@@ -0,0 +1 @@\n+Fix getting the the variation when migrating collections to listing blocks. @pbauer\n\\ No newline at end of file\ndiff --git a/src/plone/volto/browser/migrate_to_volto.py b/src/plone/volto/browser/migrate_to_volto.py\nindex d5c58b9f..1b913b36 100644\n--- a/src/plone/volto/browser/migrate_to_volto.py\n+++ b/src/plone/volto/browser/migrate_to_volto.py\n@@ -271,7 +271,7 @@ def generate_listing_block_from_collection(obj, move_relative_path=False):\n         "summary_view": "summary",\n         "album_view": "imageGallery",\n     }\n-    variation = variation_mapping.get(obj.getLayout, "default")\n+    variation = variation_mapping.get(obj.getLayout(), "default")\n     block = {\n         "@type": "listing",\n         "querystring": qs,\n'

