Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-02-16T23:21:11+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/273a1fb2effc5112b6d44c10b4dc706ae2368e99

fix windows cluster f.. config

Files changed:
A news/161.bugfix
M src/plone/recipe/zope2instance/recipe.py

b'diff --git a/news/161.bugfix b/news/161.bugfix\nnew file mode 100644\nindex 0000000..9b48e47\n--- /dev/null\n+++ b/news/161.bugfix\n@@ -0,0 +1,3 @@\n+Fix windows `wsgi.ini` to have a configurable listen address. \n+Added missing WSGI config options for windows.\n+[jensens]\n\\ No newline at end of file\ndiff --git a/src/plone/recipe/zope2instance/recipe.py b/src/plone/recipe/zope2instance/recipe.py\nindex 2cda67c..bf5802e 100644\n--- a/src/plone/recipe/zope2instance/recipe.py\n+++ b/src/plone/recipe/zope2instance/recipe.py\n@@ -814,10 +814,6 @@ def build_wsgi_ini(self):\n             \'eventlog_name\': eventlog_name,\n             \'fast-listen\': fast,\n             \'http_address\': listen,\n-            # todo: make this configurable\n-            \'listen_ip\': \'127.0.0.1\',\n-            \'listen_port\': \'8080\',\n-            # /todo\n             \'location\': options[\'location\'],\n             \'max_request_body_size\': options.get(\n                 \'max-request-body-size\', 1073741824),\n@@ -1385,9 +1381,10 @@ def render_file_storage(self, file_storage, blob_storage,\n \n wsgi_server_main_templates[\'win32\'] = """\\\n use = egg:waitress#main\n-host = %(listen_ip)s\n-port = %(listen_port)s\n+listen = %(http_address)s\n+threads = %(threads)s\n clear_untrusted_proxy_headers = %(clear_untrusted_proxy_headers)s\n+max_request_body_size = %(max_request_body_size)s\n """\n \n wsgi_ini_template = """\\\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-02-17T10:10:33+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/eb89fd8d2862c6745bcff1b40485164f6b4af29a

Merge pull request #161 from plone/fix-windows-cluster

fix windows cluster f.. config

Files changed:
A news/161.bugfix
M src/plone/recipe/zope2instance/recipe.py

b'diff --git a/news/161.bugfix b/news/161.bugfix\nnew file mode 100644\nindex 0000000..9b48e47\n--- /dev/null\n+++ b/news/161.bugfix\n@@ -0,0 +1,3 @@\n+Fix windows `wsgi.ini` to have a configurable listen address. \n+Added missing WSGI config options for windows.\n+[jensens]\n\\ No newline at end of file\ndiff --git a/src/plone/recipe/zope2instance/recipe.py b/src/plone/recipe/zope2instance/recipe.py\nindex 2cda67c..bf5802e 100644\n--- a/src/plone/recipe/zope2instance/recipe.py\n+++ b/src/plone/recipe/zope2instance/recipe.py\n@@ -814,10 +814,6 @@ def build_wsgi_ini(self):\n             \'eventlog_name\': eventlog_name,\n             \'fast-listen\': fast,\n             \'http_address\': listen,\n-            # todo: make this configurable\n-            \'listen_ip\': \'127.0.0.1\',\n-            \'listen_port\': \'8080\',\n-            # /todo\n             \'location\': options[\'location\'],\n             \'max_request_body_size\': options.get(\n                 \'max-request-body-size\', 1073741824),\n@@ -1385,9 +1381,10 @@ def render_file_storage(self, file_storage, blob_storage,\n \n wsgi_server_main_templates[\'win32\'] = """\\\n use = egg:waitress#main\n-host = %(listen_ip)s\n-port = %(listen_port)s\n+listen = %(http_address)s\n+threads = %(threads)s\n clear_untrusted_proxy_headers = %(clear_untrusted_proxy_headers)s\n+max_request_body_size = %(max_request_body_size)s\n """\n \n wsgi_ini_template = """\\\n'

