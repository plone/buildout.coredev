Repository: mockup


Branch: refs/heads/master
Date: 2020-06-28T14:44:04+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/c93a84e6cacbc64b0d93c428d7e997efafad050b

Fix toolbar pattern test failing with chrome (make test-dev) because there is no element with personal-bar-container id (indeed this is defined in plone/app/layout/viewlets/toolbar.pt)

Files changed:
M mockup/patterns/toolbar/pattern.js

b"diff --git a/mockup/patterns/toolbar/pattern.js b/mockup/patterns/toolbar/pattern.js\nindex e7f1330a2..35fa3d426 100644\n--- a/mockup/patterns/toolbar/pattern.js\n+++ b/mockup/patterns/toolbar/pattern.js\n@@ -469,7 +469,7 @@ define([\n       }\n       // check if the personal toolbar is not offseted if there isn't enough space\n       // and we already have the plone-toolbar-more-options added to the page.\n-      if ($pers_bar_container[0].offsetTop !== 0) {\n+      if ($pers_bar_container[0] && $pers_bar_container[0].offsetTop !== 0) {\n         that.cloneViewsIntoSubset(\n           $pers_bar_container,\n           $content_views,\n"

