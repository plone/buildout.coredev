Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2024-10-21T15:12:19+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.schemaeditor/commit/0368d8f3b154b5336be731144f28b818c476eba0

wait for opened modal

Files changed:
M plone/schemaeditor/tests/robot/test_fields.robot

b'diff --git a/plone/schemaeditor/tests/robot/test_fields.robot b/plone/schemaeditor/tests/robot/test_fields.robot\nindex 9be937e..6be838d 100644\n--- a/plone/schemaeditor/tests/robot/test_fields.robot\n+++ b/plone/schemaeditor/tests/robot/test_fields.robot\n@@ -133,7 +133,7 @@ I add a new Content Type\n     [Arguments]    ${CONTENT_TYPE_NAME}    ${CONTENT_TYPE_ID}\n     [Documentation]    Add a new dexterity content type\n \n-    Click    //article[@id="content"]//button[contains(text(),\'Add New Content Type\xe2\x80\xa6\')]\n+    Click Modal Link   //article[@id="content"]//button[contains(text(),\'Add New Content Type\xe2\x80\xa6\')]\n     Type Text    //input[@name="form.widgets.title"]    ${CONTENT_TYPE_NAME}\n     Focus    //input[@name="form.widgets.id"]\n     Get Text    //input[@name="form.widgets.id"]    should be    ${CONTENT_TYPE_ID}\n@@ -143,7 +143,7 @@ I add a new field\n     [Arguments]    ${FIELD_LABEL}     ${FIELD_ID}     ${FIELD_TYPE}\n     [Documentation]    Add field in current dexterity content type\n \n-    Click    //a[@id="add-field"]\n+    Click Modal Link    //a[@id="add-field"]\n     Type Text    //input[@name="form.widgets.title"]    ${FIELD_LABEL}\n     Focus    //input[@name="form.widgets.__name__"]\n     Get Text    //input[@name="form.widgets.__name__"]    should be    ${FIELD_ID}\n@@ -157,7 +157,7 @@ I add a new fieldset\n     [Arguments]    ${FIELDSET_LABEL}    ${FIELDSET_ID}\n     [Documentation]    Add fieldset in current dexterity content type\n \n-    Click    //a[@id="add-fieldset"]\n+    Click Modal Link    //a[@id="add-fieldset"]\n     Type Text    //input[@name="form.widgets.label"]    ${FIELDSET_LABEL}\n     Focus    //input[@name="form.widgets.__name__"]\n     Get Property   //input[@name="form.widgets.__name__"]    value    should be     ${FIELDSET_ID}\n@@ -166,13 +166,13 @@ I add a new fieldset\n \n I configure the language field\n \n-    Click    //div[@data-field_id="languages"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="languages"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Select Options By    //select[@name="form.widgets.vocabularyName:list"]    value    plone.app.vocabularies.AvailableContentLanguages\n     Click    //div[contains(@class,"modal-footer")]//button[@id="form-buttons-save"]\n \n I configure the hobbies field\n \n-    Click    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Type Text    //textarea[@name="form.widgets.values"]    Chess    clear=False\n     Press Keys    //textarea[@name="form.widgets.values"]    Enter\n     Type Text    //textarea[@name="form.widgets.values"]    Soccer    clear=False\n@@ -185,7 +185,7 @@ I configure the hobbies field\n \n I configure the hobbies field with wrong values\n \n-    Click    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Type Text    //textarea[@name="form.widgets.values"]    Chess    clear=False\n     Press Keys    //textarea[@name="form.widgets.values"]    Enter\n     Type Text    //textarea[@name="form.widgets.values"]    Soccer    clear=False\n@@ -248,3 +248,9 @@ the field is removed\n     [Arguments]    ${FIELD_ID}\n \n     Get Element Count    //div[@data-field_id="${FIELD_ID}"]    should be    0\n+\n+\n+Click Modal Link\n+    [Arguments]    ${SELECTOR}\n+    Click    ${SELECTOR}\n+    Wait For Elements State    //div[contains(@class, "modal-body")]//form[@id]    visible    timeout=2s\n'

Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2024-10-21T16:54:15+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/d481cc1714b06273b054eb42140bab74f6645f66

Merge pull request #121 from plone/robottest-fix-modal-link

Wait for opened modal in robottests

Files changed:
M plone/schemaeditor/tests/robot/test_fields.robot

b'diff --git a/plone/schemaeditor/tests/robot/test_fields.robot b/plone/schemaeditor/tests/robot/test_fields.robot\nindex 9be937e..6be838d 100644\n--- a/plone/schemaeditor/tests/robot/test_fields.robot\n+++ b/plone/schemaeditor/tests/robot/test_fields.robot\n@@ -133,7 +133,7 @@ I add a new Content Type\n     [Arguments]    ${CONTENT_TYPE_NAME}    ${CONTENT_TYPE_ID}\n     [Documentation]    Add a new dexterity content type\n \n-    Click    //article[@id="content"]//button[contains(text(),\'Add New Content Type\xe2\x80\xa6\')]\n+    Click Modal Link   //article[@id="content"]//button[contains(text(),\'Add New Content Type\xe2\x80\xa6\')]\n     Type Text    //input[@name="form.widgets.title"]    ${CONTENT_TYPE_NAME}\n     Focus    //input[@name="form.widgets.id"]\n     Get Text    //input[@name="form.widgets.id"]    should be    ${CONTENT_TYPE_ID}\n@@ -143,7 +143,7 @@ I add a new field\n     [Arguments]    ${FIELD_LABEL}     ${FIELD_ID}     ${FIELD_TYPE}\n     [Documentation]    Add field in current dexterity content type\n \n-    Click    //a[@id="add-field"]\n+    Click Modal Link    //a[@id="add-field"]\n     Type Text    //input[@name="form.widgets.title"]    ${FIELD_LABEL}\n     Focus    //input[@name="form.widgets.__name__"]\n     Get Text    //input[@name="form.widgets.__name__"]    should be    ${FIELD_ID}\n@@ -157,7 +157,7 @@ I add a new fieldset\n     [Arguments]    ${FIELDSET_LABEL}    ${FIELDSET_ID}\n     [Documentation]    Add fieldset in current dexterity content type\n \n-    Click    //a[@id="add-fieldset"]\n+    Click Modal Link    //a[@id="add-fieldset"]\n     Type Text    //input[@name="form.widgets.label"]    ${FIELDSET_LABEL}\n     Focus    //input[@name="form.widgets.__name__"]\n     Get Property   //input[@name="form.widgets.__name__"]    value    should be     ${FIELDSET_ID}\n@@ -166,13 +166,13 @@ I add a new fieldset\n \n I configure the language field\n \n-    Click    //div[@data-field_id="languages"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="languages"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Select Options By    //select[@name="form.widgets.vocabularyName:list"]    value    plone.app.vocabularies.AvailableContentLanguages\n     Click    //div[contains(@class,"modal-footer")]//button[@id="form-buttons-save"]\n \n I configure the hobbies field\n \n-    Click    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Type Text    //textarea[@name="form.widgets.values"]    Chess    clear=False\n     Press Keys    //textarea[@name="form.widgets.values"]    Enter\n     Type Text    //textarea[@name="form.widgets.values"]    Soccer    clear=False\n@@ -185,7 +185,7 @@ I configure the hobbies field\n \n I configure the hobbies field with wrong values\n \n-    Click    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n+    Click Modal Link    //div[@data-field_id="hobbies"]//a[contains(text(),\'Settings\xe2\x80\xa6\')]\n     Type Text    //textarea[@name="form.widgets.values"]    Chess    clear=False\n     Press Keys    //textarea[@name="form.widgets.values"]    Enter\n     Type Text    //textarea[@name="form.widgets.values"]    Soccer    clear=False\n@@ -248,3 +248,9 @@ the field is removed\n     [Arguments]    ${FIELD_ID}\n \n     Get Element Count    //div[@data-field_id="${FIELD_ID}"]    should be    0\n+\n+\n+Click Modal Link\n+    [Arguments]    ${SELECTOR}\n+    Click    ${SELECTOR}\n+    Wait For Elements State    //div[contains(@class, "modal-body")]//form[@id]    visible    timeout=2s\n'

