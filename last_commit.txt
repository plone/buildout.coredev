Repository: plone.app.content


Branch: refs/heads/3.x
Date: 2022-08-24T12:41:10+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/66ade39ef3e75f8c7d9c3cef21f9703652149825

Fix TypeError: 'NoneType' object is not subscriptable in reference browser widget.

Files changed:
A news/2921.bugfix
M plone/app/content/browser/vocabulary.py

b"diff --git a/news/2921.bugfix b/news/2921.bugfix\nnew file mode 100644\nindex 00000000..e9976dab\n--- /dev/null\n+++ b/news/2921.bugfix\n@@ -0,0 +1,2 @@\n+Fix TypeError: 'NoneType' object is not subscriptable in reference browser widget.\n+[maurits]\ndiff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py\nindex 6f5575e7..74360f82 100644\n--- a/plone/app/content/browser/vocabulary.py\n+++ b/plone/app/content/browser/vocabulary.py\n@@ -243,7 +243,7 @@ def __call__(self):\n                             val = val()\n                         else:\n                             continue\n-                    if key == 'path':\n+                    if key == 'path' and val is not None:\n                         val = val[len(base_path):]\n                     if (\n                         key not in translate_ignored and\n"

Repository: plone.app.content


Branch: refs/heads/3.x
Date: 2022-08-24T15:38:05+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/8b1e041947296aa7792121ca21b7159359e8c988

Merge pull request #251 from plone/maurits-issue-2921-52

Fix TypeError: 'NoneType' object is not subscriptable [5.2]

Files changed:
A news/2921.bugfix
M plone/app/content/browser/vocabulary.py

b"diff --git a/news/2921.bugfix b/news/2921.bugfix\nnew file mode 100644\nindex 00000000..e9976dab\n--- /dev/null\n+++ b/news/2921.bugfix\n@@ -0,0 +1,2 @@\n+Fix TypeError: 'NoneType' object is not subscriptable in reference browser widget.\n+[maurits]\ndiff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py\nindex 6f5575e7..74360f82 100644\n--- a/plone/app/content/browser/vocabulary.py\n+++ b/plone/app/content/browser/vocabulary.py\n@@ -243,7 +243,7 @@ def __call__(self):\n                             val = val()\n                         else:\n                             continue\n-                    if key == 'path':\n+                    if key == 'path' and val is not None:\n                         val = val[len(base_path):]\n                     if (\n                         key not in translate_ignored and\n"

