Repository: mockup


Branch: refs/heads/master
Date: 2020-07-12T14:16:28+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/bd5f50ea2720e81d32feba17281306e29056a648

revert the previous fix a6fa639b9e80ec04d9143bf451e73fd51d6ff0ae that introduced regressions with toolbar submenu and portal tabs subtrees

Files changed:
M mockup/patterns/structure/less/pattern.structure.less

b'diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less\nindex 8c8dfadf5..ad98bbac8 100644\n--- a/mockup/patterns/structure/less/pattern.structure.less\n+++ b/mockup/patterns/structure/less/pattern.structure.less\n@@ -85,7 +85,7 @@\n     .navbar {\n         position: sticky;\n         top: 0;\n-        z-index: 1060;\n+        z-index: 10;\n         background-color: #fafafa;\n \n         border: none;\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-12T14:18:07+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/9bb5c4771fc3641d9897a50a9e491b52a6c6119d

add a max-width of 400px for rearrange popover so it won't go beneath the Plone toolbar on low resolution

Files changed:
M mockup/patterns/structure/less/pattern.structure.less

b'diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less\nindex ad98bbac8..b4ec75ce7 100644\n--- a/mockup/patterns/structure/less/pattern.structure.less\n+++ b/mockup/patterns/structure/less/pattern.structure.less\n@@ -189,6 +189,10 @@\n         max-width: 650px;\n     }\n \n+    .popover.rearrange{\n+        max-width: 400px;\n+    }\n+\n     .upload-container .upload-area{\n         width: 500px;\n     }\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-12T15:12:16+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/91acf1c4d28a2fc3b34ea93272c1f58edb740b0f

add a placement bottom-right mode for popover and use it for 'Configure display column' popover

Files changed:
M mockup/js/ui/views/popover.js
M mockup/less/popover.less
M mockup/patterns/structure/js/views/app.js

b'diff --git a/mockup/js/ui/views/popover.js b/mockup/js/ui/views/popover.js\nindex 2e02bf118..6638f1510 100644\n--- a/mockup/js/ui/views/popover.js\n+++ b/mockup/js/ui/views/popover.js\n@@ -137,6 +137,9 @@ define([\n       actualHeight = $tip[0].offsetHeight;\n \n       switch (placement) {\n+        case \'bottom-right\':\n+          tp = {top: pos.top + pos.height, left: pos.left + pos.width - 40};\n+          break;\n         case \'bottom\':\n           tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2};\n           break;\n@@ -192,7 +195,8 @@ define([\n \n         this.positionArrow(delta - width + actualWidth, actualWidth, \'left\');\n \n-      } else {\n+      } else if (placement !== \'bottom-right\') {\n+        // If placement is bottom-right, don\'t override left position for the arrow that is defined in css to 20px.\n         this.positionArrow(actualHeight - height, actualHeight, \'top\');\n       }\n \ndiff --git a/mockup/less/popover.less b/mockup/less/popover.less\nindex f7246b18e..66d456f6a 100644\n--- a/mockup/less/popover.less\n+++ b/mockup/less/popover.less\n@@ -12,6 +12,23 @@\n     &.active {\n         display: block;\n     }\n+    // Offset the popover to account for the popover arrow\n+    &.bottom-right { margin-top: @popover-arrow-width; }\n+    &.bottom-right > .arrow {\n+        top: -@popover-arrow-outer-width;\n+        left: 20px;\n+        margin-left: -@popover-arrow-outer-width;\n+        border-top-width: 0;\n+        border-bottom-color: @popover-arrow-outer-fallback-color; // IE8 fallback\n+        border-bottom-color: @popover-arrow-outer-color;\n+        &:after {\n+          top: 1px;\n+          margin-left: -@popover-arrow-width;\n+          content: " ";\n+          border-top-width: 0;\n+          border-bottom-color: @popover-arrow-color;\n+        }\n+    }\n }\n .backdrop-popover {\n     background-color: #fff;\ndiff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js\nindex e87d8ff74..19f7256f9 100644\n--- a/mockup/patterns/structure/js/views/app.js\n+++ b/mockup/patterns/structure/js/views/app.js\n@@ -367,7 +367,8 @@ define([\n       self.columnsView = new ColumnsView({\n         app: self,\n         triggerView: columnsBtn,\n-        id: \'structure-columns\'\n+        id: \'structure-columns\',\n+        placement: \'bottom-right\'\n       });\n       items.push(columnsBtn);\n \n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-12T15:12:23+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/7edbe44f9d6141541f7098fd81edc94d296c4875

add changelog entry

Files changed:
A news/1002.bugfix

b'diff --git a/news/1002.bugfix b/news/1002.bugfix\nnew file mode 100644\nindex 000000000..dd1769669\n--- /dev/null\n+++ b/news/1002.bugfix\n@@ -0,0 +1,4 @@\n+In mockup 3.2.0, the fix for \'folder contents "Configure display columns" dialog going under toolbar\'\n+introduced regression for Plone toolbar submenu and portal tabs subtrees.\n+Revert the previous fix and use a new popover placement mode "bottom-right" for the "Configure display columns" popover.\n+[vincentfretin]\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-14T08:53:02+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/9d77e3250c3ebf6634ecb799f8004b9d28b29180

Merge pull request #1002 from plone/fix-fc-zindex-issues

Fix folder contents z-index issues with toolbar and nav tabs

Files changed:
A news/1002.bugfix
M mockup/js/ui/views/popover.js
M mockup/less/popover.less
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/less/pattern.structure.less

b'diff --git a/mockup/js/ui/views/popover.js b/mockup/js/ui/views/popover.js\nindex 2e02bf118..6638f1510 100644\n--- a/mockup/js/ui/views/popover.js\n+++ b/mockup/js/ui/views/popover.js\n@@ -137,6 +137,9 @@ define([\n       actualHeight = $tip[0].offsetHeight;\n \n       switch (placement) {\n+        case \'bottom-right\':\n+          tp = {top: pos.top + pos.height, left: pos.left + pos.width - 40};\n+          break;\n         case \'bottom\':\n           tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2};\n           break;\n@@ -192,7 +195,8 @@ define([\n \n         this.positionArrow(delta - width + actualWidth, actualWidth, \'left\');\n \n-      } else {\n+      } else if (placement !== \'bottom-right\') {\n+        // If placement is bottom-right, don\'t override left position for the arrow that is defined in css to 20px.\n         this.positionArrow(actualHeight - height, actualHeight, \'top\');\n       }\n \ndiff --git a/mockup/less/popover.less b/mockup/less/popover.less\nindex f7246b18e..66d456f6a 100644\n--- a/mockup/less/popover.less\n+++ b/mockup/less/popover.less\n@@ -12,6 +12,23 @@\n     &.active {\n         display: block;\n     }\n+    // Offset the popover to account for the popover arrow\n+    &.bottom-right { margin-top: @popover-arrow-width; }\n+    &.bottom-right > .arrow {\n+        top: -@popover-arrow-outer-width;\n+        left: 20px;\n+        margin-left: -@popover-arrow-outer-width;\n+        border-top-width: 0;\n+        border-bottom-color: @popover-arrow-outer-fallback-color; // IE8 fallback\n+        border-bottom-color: @popover-arrow-outer-color;\n+        &:after {\n+          top: 1px;\n+          margin-left: -@popover-arrow-width;\n+          content: " ";\n+          border-top-width: 0;\n+          border-bottom-color: @popover-arrow-color;\n+        }\n+    }\n }\n .backdrop-popover {\n     background-color: #fff;\ndiff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js\nindex e87d8ff74..19f7256f9 100644\n--- a/mockup/patterns/structure/js/views/app.js\n+++ b/mockup/patterns/structure/js/views/app.js\n@@ -367,7 +367,8 @@ define([\n       self.columnsView = new ColumnsView({\n         app: self,\n         triggerView: columnsBtn,\n-        id: \'structure-columns\'\n+        id: \'structure-columns\',\n+        placement: \'bottom-right\'\n       });\n       items.push(columnsBtn);\n \ndiff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less\nindex 8c8dfadf5..b4ec75ce7 100644\n--- a/mockup/patterns/structure/less/pattern.structure.less\n+++ b/mockup/patterns/structure/less/pattern.structure.less\n@@ -85,7 +85,7 @@\n     .navbar {\n         position: sticky;\n         top: 0;\n-        z-index: 1060;\n+        z-index: 10;\n         background-color: #fafafa;\n \n         border: none;\n@@ -189,6 +189,10 @@\n         max-width: 650px;\n     }\n \n+    .popover.rearrange{\n+        max-width: 400px;\n+    }\n+\n     .upload-container .upload-area{\n         width: 500px;\n     }\ndiff --git a/news/1002.bugfix b/news/1002.bugfix\nnew file mode 100644\nindex 000000000..dd1769669\n--- /dev/null\n+++ b/news/1002.bugfix\n@@ -0,0 +1,4 @@\n+In mockup 3.2.0, the fix for \'folder contents "Configure display columns" dialog going under toolbar\'\n+introduced regression for Plone toolbar submenu and portal tabs subtrees.\n+Revert the previous fix and use a new popover placement mode "bottom-right" for the "Configure display columns" popover.\n+[vincentfretin]\n'

