Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-06-16T16:38:38-07:00
Author: Akshat Jain (Akshat2Jain) <101265586+Akshat2Jain@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/9097cfcb55a7b2a045a5c5e66c46cd04300798c2

Allow PRs from forks to run tests (#1659)

* Update black.yml

* Update flake8.yml

* Update pyroma.yml

* Update tests.yml

* Update update_remote_docs.yml

* Update zpretty.yml

* Update black.yml

* Update flake8.yml

* Update pyroma.yml

* Update tests.yml

* Update update_remote_docs.yml

* Update zpretty.yml

* Create 1659.internal

* Update black.yml

* Update update_remote_docs.yml

* Update and rename 1659.internal to 1656.internal

* Update tests.yml

* Update zpretty.yml

* Update flake8.yml

* Update black.yml

* Update flake8.yml

* Update pyroma.yml

* Update tests.yml

* Update zpretty.yml

* Update black.yml

* Update flake8.yml

* Update black.yml

* Update black.yml

* Update black.yml

* Update black.yml

* Update flake8.yml

* Update pyroma.yml

* Update tests.yml

* Update zpretty.yml

* Update update_remote_docs.yml

Files changed:
A news/1656.internal
M .github/workflows/black.yml
M .github/workflows/flake8.yml
M .github/workflows/pyroma.yml
M .github/workflows/tests.yml
M .github/workflows/update_remote_docs.yml
M .github/workflows/zpretty.yml

b'diff --git a/.github/workflows/black.yml b/.github/workflows/black.yml\nindex e7eeed7d4..57e85c144 100644\n--- a/.github/workflows/black.yml\n+++ b/.github/workflows/black.yml\n@@ -1,7 +1,8 @@\n name: Black\n-on: [push]\n+on: [push,pull_request]\n jobs:\n   build:\n+    if: github.event_name != \'pull_request\' || github.event.pull_request.head.repo.full_name != github.event.pull_request.base.repo.full_name\n     runs-on: ubuntu-latest\n     strategy:\n       fail-fast: false\ndiff --git a/.github/workflows/flake8.yml b/.github/workflows/flake8.yml\nindex dc32b52ff..e373ff62f 100644\n--- a/.github/workflows/flake8.yml\n+++ b/.github/workflows/flake8.yml\n@@ -1,7 +1,8 @@\n name: Flake 8\n-on: [push]\n+on: [push,pull_request]\n jobs:\n   build:\n+    if: github.event_name != \'pull_request\' || github.event.pull_request.head.repo.full_name != github.event.pull_request.base.repo.full_name\n     runs-on: ubuntu-latest\n     strategy:\n       fail-fast: false\ndiff --git a/.github/workflows/pyroma.yml b/.github/workflows/pyroma.yml\nindex d32c26bb5..bbe9d5b76 100644\n--- a/.github/workflows/pyroma.yml\n+++ b/.github/workflows/pyroma.yml\n@@ -1,7 +1,8 @@\n name: Pyroma\n-on: [push]\n+on: [push,pull_request]\n jobs:\n   build:\n+    if: github.event_name != \'pull_request\' || github.event.pull_request.head.repo.full_name != github.event.pull_request.base.repo.full_name\n     runs-on: ubuntu-latest\n     strategy:\n       fail-fast: false\ndiff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 963a5d929..81569399c 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -1,7 +1,8 @@\n name: Tests\n-on: [push]\n+on: [push,pull_request]\n jobs:\n   build:\n+    if: github.event_name != \'pull_request\' || github.event.pull_request.head.repo.full_name != github.event.pull_request.base.repo.full_name\n     runs-on: ubuntu-latest\n     strategy:\n       fail-fast: false\ndiff --git a/.github/workflows/update_remote_docs.yml b/.github/workflows/update_remote_docs.yml\nindex 524dfc745..0e9f54c71 100644\n--- a/.github/workflows/update_remote_docs.yml\n+++ b/.github/workflows/update_remote_docs.yml\n@@ -16,4 +16,4 @@ jobs:\n           -H "Authorization: Bearer ${{secrets.DOCUMENTATION_BUILD_APPLICATION_KEY}}" \\\n           -H "Accept: application/vnd.github.v3+json" \\\n           https://api.github.com/repos/plone/documentation/actions/workflows/update_submodule.yml/dispatches \\\n-          -d \'{"ref": "6-dev"}\'\n\\ No newline at end of file\n+          -d \'{"ref": "6-dev"}\'\ndiff --git a/.github/workflows/zpretty.yml b/.github/workflows/zpretty.yml\nindex 61f785c1d..9ebafb553 100644\n--- a/.github/workflows/zpretty.yml\n+++ b/.github/workflows/zpretty.yml\n@@ -1,7 +1,8 @@\n name: zpretty\n-on: [push]\n+on: [push,pull_request]\n jobs:\n   build:\n+    if: github.event_name != \'pull_request\' || github.event.pull_request.head.repo.full_name != github.event.pull_request.base.repo.full_name\n     runs-on: ubuntu-latest\n     strategy:\n       fail-fast: false\ndiff --git a/news/1656.internal b/news/1656.internal\nnew file mode 100644\nindex 000000000..e818df266\n--- /dev/null\n+++ b/news/1656.internal\n@@ -0,0 +1 @@\n+Allow GHA tests to run on PRs from forks. @Akshat2Jain\n'

