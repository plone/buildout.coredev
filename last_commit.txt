Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-10T22:03:55-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/4d671706c601986dd8a8b638246bc43abbf80a19

Avoid duplicate installation of plone.app.contenttypes profile

Files changed:
M src/plone/app/robotframework/testing.py

b'diff --git a/src/plone/app/robotframework/testing.py b/src/plone/app/robotframework/testing.py\nindex 70c936b..e412e9e 100644\n--- a/src/plone/app/robotframework/testing.py\n+++ b/src/plone/app/robotframework/testing.py\n@@ -45,7 +45,6 @@ class SimplePublicationLayer(Layer):\n \n     def setUp(self):\n         with ploneSite() as portal:\n-            applyProfile(portal, "plone.app.contenttypes:default")\n             portal.portal_workflow.setDefaultChain("simple_publication_workflow")\n \n     def tearDown(self):\n@@ -56,15 +55,8 @@ def tearDown(self):\n SIMPLE_PUBLICATION_FIXTURE = SimplePublicationLayer()\n \n \n-class SimplePublicationWithTypesLayer(Layer):\n-    defaultBases = (SIMPLE_PUBLICATION_FIXTURE,)\n-\n-    def setUp(self):\n-        with ploneSite() as portal:\n-            applyProfile(portal, "plone.app.contenttypes:default")\n-\n-\n-SIMPLE_PUBLICATION_WITH_TYPES_FIXTURE = SimplePublicationLayer()\n+SimplePublicationWithTypesLayer = SimplePublicationLayer\n+SIMPLE_PUBLICATION_WITH_TYPES_FIXTURE = SIMPLE_PUBLICATION_FIXTURE\n \n \n class MockMailHostLayer(Layer):\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-10T22:06:33-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/d83d87c02e515d796bbdbc56dfb225f71beb98e0

changelog

Files changed:
A news/154.bugfix

b'diff --git a/news/154.bugfix b/news/154.bugfix\nnew file mode 100644\nindex 0000000..88786f9\n--- /dev/null\n+++ b/news/154.bugfix\n@@ -0,0 +1 @@\n+Fix duplicate installation of plone.app.contenttypes:default profile. @davisagli\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-11T11:14:05-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/209853f395726d9b8417a939c152f1a9060b157e

Merge pull request #154 from plone/fix-duplicate-install-of-contenttypes

Avoid duplicate installation of plone.app.contenttypes profile

Files changed:
A news/154.bugfix
M src/plone/app/robotframework/testing.py

b'diff --git a/news/154.bugfix b/news/154.bugfix\nnew file mode 100644\nindex 0000000..88786f9\n--- /dev/null\n+++ b/news/154.bugfix\n@@ -0,0 +1 @@\n+Fix duplicate installation of plone.app.contenttypes:default profile. @davisagli\ndiff --git a/src/plone/app/robotframework/testing.py b/src/plone/app/robotframework/testing.py\nindex 70c936b..e412e9e 100644\n--- a/src/plone/app/robotframework/testing.py\n+++ b/src/plone/app/robotframework/testing.py\n@@ -45,7 +45,6 @@ class SimplePublicationLayer(Layer):\n \n     def setUp(self):\n         with ploneSite() as portal:\n-            applyProfile(portal, "plone.app.contenttypes:default")\n             portal.portal_workflow.setDefaultChain("simple_publication_workflow")\n \n     def tearDown(self):\n@@ -56,15 +55,8 @@ def tearDown(self):\n SIMPLE_PUBLICATION_FIXTURE = SimplePublicationLayer()\n \n \n-class SimplePublicationWithTypesLayer(Layer):\n-    defaultBases = (SIMPLE_PUBLICATION_FIXTURE,)\n-\n-    def setUp(self):\n-        with ploneSite() as portal:\n-            applyProfile(portal, "plone.app.contenttypes:default")\n-\n-\n-SIMPLE_PUBLICATION_WITH_TYPES_FIXTURE = SimplePublicationLayer()\n+SimplePublicationWithTypesLayer = SimplePublicationLayer\n+SIMPLE_PUBLICATION_WITH_TYPES_FIXTURE = SIMPLE_PUBLICATION_FIXTURE\n \n \n class MockMailHostLayer(Layer):\n'

