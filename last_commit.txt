Repository: plone.restapi


Branch: refs/heads/main
Date: 2024-10-16T08:32:56-07:00
Author: jackahl (jackahl) <44289551+jackahl@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/b9a56e1930748da15351b90d502304ca17a0ac5e

Use existing aliases controlpanel permissions for aliases endpoint (#1825)

* Use exisitng aliases controlpanel permissions for aliases endpoint

* Use ManagePortalAliases for alias delete endpoint on siteroot

Co-authored-by: David Glick &lt;david@glicksoftware.com&gt;

* Update news/1820.bugfix

---------

Co-authored-by: David Glick &lt;david@glicksoftware.com&gt;

Files changed:
A news/1820.bugfix
M src/plone/restapi/services/aliases/configure.zcml

b'diff --git a/news/1820.bugfix b/news/1820.bugfix\nnew file mode 100644\nindex 000000000..8f2aeaaf4\n--- /dev/null\n+++ b/news/1820.bugfix\n@@ -0,0 +1 @@\n+Aliases endpoint: Use "Manage Portal Aliases" and "Manage Content Aliases" permissions. @jackahl\ndiff --git a/src/plone/restapi/services/aliases/configure.zcml b/src/plone/restapi/services/aliases/configure.zcml\nindex c6499d117..b68d1050c 100644\n--- a/src/plone/restapi/services/aliases/configure.zcml\n+++ b/src/plone/restapi/services/aliases/configure.zcml\n@@ -8,7 +8,7 @@\n       accept="application/json,application/schema+json"\n       factory=".get.AliasesGet"\n       for="Products.CMFPlone.interfaces.IPloneSiteRoot"\n-      permission="zope2.View"\n+      permission="Products.CMFPlone.ManagePortalAliases"\n       name="@aliases"\n       />\n \n@@ -17,7 +17,7 @@\n       accept="text/csv"\n       factory=".get.AliasesGet"\n       for="Products.CMFPlone.interfaces.IPloneSiteRoot"\n-      permission="zope2.View"\n+      permission="Products.CMFPlone.ManagePortalAliases"\n       name="@aliases"\n       />\n \n@@ -26,7 +26,7 @@\n       accept="application/json,application/schema+json"\n       factory=".get.AliasesGet"\n       for="Products.CMFCore.interfaces.IContentish"\n-      permission="zope2.View"\n+      permission="Products.CMFPlone.ManageContextAliases"\n       name="@aliases"\n       />\n \n@@ -34,7 +34,7 @@\n       method="POST"\n       factory=".add.AliasesPost"\n       for="*"\n-      permission="cmf.ModifyPortalContent"\n+      permission="Products.CMFPlone.ManageContextAliases"\n       name="@aliases"\n       />\n \n@@ -42,7 +42,7 @@\n       method="POST"\n       factory=".add.AliasesRootPost"\n       for="Products.CMFPlone.interfaces.IPloneSiteRoot"\n-      permission="cmf.ModifyPortalContent"\n+      permission="Products.CMFPlone.ManagePortalAliases"\n       name="@aliases"\n       />\n \n@@ -50,7 +50,7 @@\n       method="DELETE"\n       factory=".delete.AliasesDelete"\n       for="*"\n-      permission="cmf.ModifyPortalContent"\n+      permission="Products.CMFPlone.ManageContextAliases"\n       name="@aliases"\n       />\n \n@@ -58,7 +58,7 @@\n       method="DELETE"\n       factory=".delete.AliasesDelete"\n       for="Products.CMFPlone.interfaces.IPloneSiteRoot"\n-      permission="cmf.ModifyPortalContent"\n+      permission="Products.CMFPlone.ManagePortalAliases"\n       name="@aliases"\n       />\n \n'

