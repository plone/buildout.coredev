Repository: plone.restapi


Branch: refs/heads/7.x.x
Date: 2021-10-11T20:00:38+02:00
Author: ichim-david (ichim-david) <ichim.david@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/f0d944d96e4f88f86c9ec90eb2010468fa6ee796

Pin package versions to fix tests (#1244)

* Pin jsonschema to a version that is still compatible with Python 2.7

* Pin flake8 and pycodestyle that doesn't crash on Python 2.7 or 3.8 and Plone 5.2

* Added news entry for history change

Files changed:
A news/1243.internal
M plone-4.3.x.cfg
M plone-5.2.x.cfg

b"diff --git a/news/1243.internal b/news/1243.internal\nnew file mode 100644\nindex 000000000..e2405c530\n--- /dev/null\n+++ b/news/1243.internal\n@@ -0,0 +1 @@\n+Fix tests for Plone 4.3 and 5.2 with Python 2.7 @ichim-david\ndiff --git a/plone-4.3.x.cfg b/plone-4.3.x.cfg\nindex deaaec389..4ac59cdd0 100644\n--- a/plone-4.3.x.cfg\n+++ b/plone-4.3.x.cfg\n@@ -34,3 +34,6 @@ plone.schema = 1.3.0\n \n # Click 8.0.0 breaks in Python 2.7\n Click = 7.1.2\n+\n+# version 4 breaks in Python 2.7\n+jsonschema = 3.2.0\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex f74bc193d..d828a416d 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -7,6 +7,9 @@ versions=versions\n \n [versions]\n black = 20.8b1\n+# Python 2.7 on Plone 5.2 fails without specific pins to flake\n+flake8 = 3.9.2\n+pycodestyle = 2.7.0\n \n # Error: The requirement ('virtualenv>=20.0.35') is not allowed by your [versions] constraint (20.0.26)\n virtualenv = 20.0.35\n"

