Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-04-23T23:58:45+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/5552bbcda1429075eb5edd1a960a3159de7cc8a6

locust: more scales test

Files changed:
M performance/images.py

b'diff --git a/performance/images.py b/performance/images.py\nindex 45bf980d..da1c59a7 100644\n--- a/performance/images.py\n+++ b/performance/images.py\n@@ -40,6 +40,19 @@ def image_01mb_get_scale_preview(self):\n     )\n \n \n+def image_01mb_get_scale_tile(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-1mb/@@images/image/tile",\n+        headers=headers,\n+        name="Image 01 MB GET (Scale Tile)",\n+    )\n+\n+\n def image_02mb_get(self):\n     headers = {\n         "Accept": "application/json",\n@@ -79,14 +92,57 @@ def image_10mb_get(self):\n     )\n \n \n+def image_10mb_get_scale_large(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-10mb/@@images/image/large",\n+        headers=headers,\n+        name="Image 10 MB GET (Scale Large)",\n+    )\n+\n+\n+def image_10mb_get_scale_preview(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-10mb/@@images/image/preview",\n+        headers=headers,\n+        name="Image 10 MB GET (Scale Preview)",\n+    )\n+\n+\n+def image_10mb_get_scale_tile(self):\n+    headers = {\n+        "Accept": "application/json",\n+        "Authorization": "Basic YWRtaW46YWRtaW4=",\n+        "Content-Type": "application/json",\n+    }\n+    self.client.get(\n+        "/testfolder-read/image-10mb/@@images/image/tile",\n+        headers=headers,\n+        name="Image 10 MB GET (Scale Tile)",\n+    )\n+\n+\n class UserBehavior(TaskSet):\n     tasks = {\n-        image_01mb_get: 10,\n-        image_01mb_get_scale_large: 20,\n-        image_01mb_get_scale_preview: 20,\n-        image_02mb_get: 10,\n-        image_03mb_get: 10,\n-        image_10mb_get: 5,\n+        image_01mb_get: 1,\n+        image_01mb_get_scale_large: 1,\n+        image_01mb_get_scale_preview: 1,\n+        image_01mb_get_scale_tile: 1,\n+        image_02mb_get: 1,\n+        image_03mb_get: 1,\n+        image_10mb_get: 1,\n+        image_10mb_get_scale_large: 1,\n+        image_10mb_get_scale_preview: 1,\n+        image_10mb_get_scale_tile: 1,\n     }\n \n     def on_start(self):\n'

