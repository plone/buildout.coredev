Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2020-07-08T11:04:04+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/0feaa8ad13f2928d4a8c0b2d4b9f8602cd76bed8

Avoid doing the search twice in listings by reusing the batch variable

Files changed:
A news/560.bugfix
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_tabular.pt

b'diff --git a/news/560.bugfix b/news/560.bugfix\nnew file mode 100644\nindex 00000000..a3f75480\n--- /dev/null\n+++ b/news/560.bugfix\n@@ -0,0 +1,2 @@\n+Avoid doing the search twice in listings by reusing the batch variable.\n+[vincentfretin]\ndiff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex c82dd6ce..350d24d2 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -129,7 +129,7 @@\n \n       <metal:empty metal:define-slot="no_items_in_listing">\n         <p class="discreet"\n-            tal:condition="not: view/batch"\n+            tal:condition="not: batch"\n             tal:content="view/no_items_message">\n           There are currently no items in this folder.\n         </p>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_tabular.pt b/plone/app/contenttypes/browser/templates/listing_tabular.pt\nindex 6ba21d1a..61dbc874 100644\n--- a/plone/app/contenttypes/browser/templates/listing_tabular.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_tabular.pt\n@@ -105,7 +105,7 @@\n \n     <metal:empty metal:define-slot="no_items_in_listing">\n     <p class="discreet"\n-    tal:condition="not: view/batch"\n+    tal:condition="not: batch"\n     tal:content="view/no_items_message">\n     There are currently no items in this folder.\n     </p>\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2020-07-08T12:25:49+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/3a7ea8c97730aac2f9416274efa633cdb2434ac7

Merge pull request #561 from plone/fix-batch-doing-search-twice

Avoid doing the search twice in listings by reusing the batch variable

Files changed:
A news/560.bugfix
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_tabular.pt

b'diff --git a/news/560.bugfix b/news/560.bugfix\nnew file mode 100644\nindex 00000000..a3f75480\n--- /dev/null\n+++ b/news/560.bugfix\n@@ -0,0 +1,2 @@\n+Avoid doing the search twice in listings by reusing the batch variable.\n+[vincentfretin]\ndiff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex c82dd6ce..350d24d2 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -129,7 +129,7 @@\n \n       <metal:empty metal:define-slot="no_items_in_listing">\n         <p class="discreet"\n-            tal:condition="not: view/batch"\n+            tal:condition="not: batch"\n             tal:content="view/no_items_message">\n           There are currently no items in this folder.\n         </p>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_tabular.pt b/plone/app/contenttypes/browser/templates/listing_tabular.pt\nindex 6ba21d1a..61dbc874 100644\n--- a/plone/app/contenttypes/browser/templates/listing_tabular.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_tabular.pt\n@@ -105,7 +105,7 @@\n \n     <metal:empty metal:define-slot="no_items_in_listing">\n     <p class="discreet"\n-    tal:condition="not: view/batch"\n+    tal:condition="not: batch"\n     tal:content="view/no_items_message">\n     There are currently no items in this folder.\n     </p>\n'

