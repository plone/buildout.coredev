Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-07-14T14:54:56-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.restapi/commit/82496539bd1080eec9114e42f178209eb80ee498

Update to Plone 6.0.6 (#1672)

* Update to Plone 6.0.6

* changelog

* update test response

Files changed:
A news/1672.internal
M Makefile
M plone-5.2.x.cfg
M plone-6.0.x.cfg
M requirements-6.0.txt
M src/plone/restapi/tests/http-examples/vocabularies.resp
D ci.cfg
D heroku.cfg

b'diff --git a/Makefile b/Makefile\nindex a1e6e002b..7cfc952d3 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -1,5 +1,3 @@\n-# keep in sync with: https://github.com/kitconcept/buildout/edit/master/Makefile\n-# update by running \'make update\'\n SHELL := /bin/bash\n CURRENT_DIR:=$(shell dirname $(realpath $(lastword $(MAKEFILE_LIST))))\n \n@@ -31,14 +29,6 @@ all: build-plone-6.0\n help: ## This help message\n \t@grep -E \'^[a-zA-Z_-]+:.*?## .*$$\' $(MAKEFILE_LIST) | sort | awk \'BEGIN {FS = ":.*?## "}; {printf "\\033[36m%-30s\\033[0m %s\\n", $$1, $$2}\'\n \n-.PHONY: Update Makefile and Buildout\n-update: ## Update Make and Buildout\n-\twget -O Makefile https://raw.githubusercontent.com/kitconcept/buildout/5.2/Makefile\n-\twget -O requirements.txt https://raw.githubusercontent.com/kitconcept/buildout/5.2/requirements.txt\n-\twget -O plone-5.2.x.cfg https://raw.githubusercontent.com/kitconcept/buildout/5.2/plone-5.2.x.cfg\n-\twget -O ci.cfg https://raw.githubusercontent.com/kitconcept/buildout/5.2/ci.cfg\n-\twget -O versions.cfg https://raw.githubusercontent.com/kitconcept/buildout/5.2/versions.cfg\n-\n .installed.cfg: bin/buildout *.cfg\n \n bin/buildout: bin/pip\ndiff --git a/ci.cfg b/ci.cfg\ndeleted file mode 100644\nindex af1a4f245..000000000\n--- a/ci.cfg\n+++ /dev/null\n@@ -1,7 +0,0 @@\n-[buildout]\n-extends = plone-x.x.x.cfg\n-\n-[code-analysis]\n-recipe = plone.recipe.codeanalysis\n-pre-commit-hook = False\n-return-status-codes = True\ndiff --git a/heroku.cfg b/heroku.cfg\ndeleted file mode 100644\nindex ee5c4d6e7..000000000\n--- a/heroku.cfg\n+++ /dev/null\n@@ -1,26 +0,0 @@\n-[buildout]\n-extends = buildout.cfg\n-relative-paths = true\n-\n-[instance]\n-relative-paths = true\n-eggs +=\n-    RelStorage\n-    psycopg2\n-rel-storage =\n-    keep-history false\n-    blob-dir /tmp/blobcache\n-    shared-blob-dir false\n-    type postgresql\n-    host PG_HOST\n-    dbname PG_DBNAME\n-    user PG_USER\n-    password PG_PASS\n-\n-[versions]\n-# zc.buildout = 1.7.1\n-plone.app.jquery = 1.8.3\n-docutils = 0.12\n-# pytz = 2012rc0\n-Pygments = 2.0\n-six = 1.5.2\ndiff --git a/news/1672.internal b/news/1672.internal\nnew file mode 100644\nindex 000000000..8f4c59c46\n--- /dev/null\n+++ b/news/1672.internal\n@@ -0,0 +1 @@\n+Update Makefile and buildout to use Plone 6.0.6. @davisagli\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex d3706718d..4c0929114 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -4,7 +4,7 @@ extends =\n     base.cfg\n \n [versions]\n-black = 21.7b0\n+black = 22.3.0\n \n # Use the newest plone.rest\n plone.rest = 3.0.0\ndiff --git a/plone-6.0.x.cfg b/plone-6.0.x.cfg\nindex 5d7a64e95..9f51f9e92 100644\n--- a/plone-6.0.x.cfg\n+++ b/plone-6.0.x.cfg\n@@ -1,6 +1,6 @@\n [buildout]\n extends =\n-    https://dist.plone.org/release/6.0.4/versions.cfg\n+    https://dist.plone.org/release/6.0.6/versions.cfg\n     base.cfg\n \n [buildout:python37]\n@@ -13,5 +13,5 @@ recipe = plone.recipe.zope2instance\n zodb-temporary-storage = off\n \n [versions]\n-black = 21.7b0\n+black = 22.3.0\n pygments = 2.14.0\ndiff --git a/requirements-6.0.txt b/requirements-6.0.txt\nindex 4f5ea3ac8..7d4750742 100644\n--- a/requirements-6.0.txt\n+++ b/requirements-6.0.txt\n@@ -1 +1 @@\n--r https://dist.plone.org/release/6.0.4/requirements.txt\n+-r https://dist.plone.org/release/6.0.6/requirements.txt\ndiff --git a/src/plone/restapi/tests/http-examples/vocabularies.resp b/src/plone/restapi/tests/http-examples/vocabularies.resp\nindex c8b7c4aee..107adfe4a 100644\n--- a/src/plone/restapi/tests/http-examples/vocabularies.resp\n+++ b/src/plone/restapi/tests/http-examples/vocabularies.resp\n@@ -2,14 +2,14 @@ HTTP/1.1 200 OK\n Content-Type: application/json\n \n [\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/plone.contentrules.events",\n-        "title": "plone.contentrules.events"\n-    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/Behaviors",\n         "title": "Behaviors"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.contentrules.events",\n+        "title": "plone.contentrules.events"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.AvailableContentLanguages",\n         "title": "plone.app.vocabularies.AvailableContentLanguages"\n@@ -90,10 +90,6 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.Principals",\n         "title": "plone.app.vocabularies.Principals"\n     },\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.Catalog",\n-        "title": "plone.app.vocabularies.Catalog"\n-    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.Actions",\n         "title": "plone.app.vocabularies.Actions"\n@@ -162,6 +158,10 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.event.SynchronizationStrategies",\n         "title": "plone.app.event.SynchronizationStrategies"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.Catalog",\n+        "title": "plone.app.vocabularies.Catalog"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.contenttypes.metadatafields",\n         "title": "plone.app.contenttypes.metadatafields"\n'

