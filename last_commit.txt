Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-05-13T11:57:45+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/3550562b1ad0fedec1538bbfe565befd8110f11c

Drop support for Python 2 and Plone 5.1 and 4.3. (#1122)

* Drop support for Python 2 and Plone 5.1 and 4.3.

* Add Python3 only classifier. Start testing 3.9

* Add python_requires to setup.py

* Remove py 3.9 again

* Do not make the generated wheels have py3 tag

Files changed:
A news/1121.breaking
A setup.cfg
M .github/workflows/ci.yml
M setup.py

b'diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 617db8467..c7b657ed1 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -6,27 +6,8 @@ jobs:\n     strategy:\n       fail-fast: false\n       matrix:\n-        python-version: [3.8, 3.7, 3.6, 2.7]\n-        plone-version: [5.2, 5.1, 4.3]\n-        exclude:\n-          - python-version: 3.6\n-            plone-version: 4.3\n-          - python-version: 3.6\n-            plone-version: 5.0\n-          - python-version: 3.6\n-            plone-version: 5.1\n-          - python-version: 3.7\n-            plone-version: 4.3\n-          - python-version: 3.7\n-            plone-version: 5.0\n-          - python-version: 3.7\n-            plone-version: 5.1\n-          - python-version: 3.8\n-            plone-version: 4.3\n-          - python-version: 3.8\n-            plone-version: 5.0\n-          - python-version: 3.8\n-            plone-version: 5.1\n+        python-version: [3.8, 3.7, 3.6]\n+        plone-version: [5.2]\n \n     steps:\n       # git checkout\ndiff --git a/news/1121.breaking b/news/1121.breaking\nnew file mode 100644\nindex 000000000..02cc27b71\n--- /dev/null\n+++ b/news/1121.breaking\n@@ -0,0 +1,2 @@\n+- Drop support for Python 2 and Plone 5.1 and 4.3. Plone RESTAPI >= 8 supports Python 3 and Plone 5.2/6.x only.\n+ [timo]\n\\ No newline at end of file\ndiff --git a/setup.cfg b/setup.cfg\nnew file mode 100644\nindex 000000000..1689ef3ea\n--- /dev/null\n+++ b/setup.cfg\n@@ -0,0 +1,4 @@\n+[bdist_wheel]\n+# Do not make the generated wheels have `py3` tag\n+# See https://packaging.python.org/guides/dropping-older-python-versions/#dealing-with-the-universal-wheels\n+universal = 0 \n\\ No newline at end of file\ndiff --git a/setup.py b/setup.py\nindex 176f0e7ef..0a1f34a58 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,7 +1,10 @@\n from setuptools import setup, find_packages\n+import sys\n \n version = "7.3.6.dev0"\n \n+assert sys.version_info >= (3, 6, 0), "plone.restapi requires Python 3.6.0+"\n+\n \n def read(filename):\n     with open(filename) as myfile:\n@@ -57,18 +60,15 @@ def read(filename):\n         "Development Status :: 5 - Production/Stable",\n         "Environment :: Web Environment",\n         "Framework :: Plone",\n-        "Framework :: Plone :: 4.3",\n-        "Framework :: Plone :: 5.0",\n-        "Framework :: Plone :: 5.1",\n         "Framework :: Plone :: 5.2",\n         "Framework :: Plone :: Core",\n         "Intended Audience :: Developers",\n         "Operating System :: OS Independent",\n         "Programming Language :: Python",\n-        "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n+        "Programming Language :: Python :: 3 :: Only",\n         "Topic :: Software Development :: Libraries :: Python Modules",\n     ],\n     keywords="plone rest restful hypermedia api json",\n@@ -79,6 +79,7 @@ def read(filename):\n     packages=find_packages("src"),\n     package_dir={"": "src"},\n     namespace_packages=["plone"],\n+    python_requires=">=3.6.0",\n     include_package_data=True,\n     zip_safe=False,\n     install_requires=[\n'

