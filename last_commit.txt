Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-03-24T17:13:08+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/c5d2577c57fc652ea8c67f8de98aaa316011197f

Skip using ci.cfg. Because you know buildout sucks... (#1100)

* Skip using ci.cfg. Because you know buildout sucks...

* Make sure we return code analysis status code on ci

* Fix code analysis label on ci

* Break things

* Revert "Break things"

This reverts commit 70054c054fd48600d5e2715f18e16f8e4cd2d62b.

Files changed:
M .github/workflows/ci.yml

b'diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex dc042c542..2bf97df03 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -51,12 +51,10 @@ jobs:\n       - run: pip install wheel\n       - name: pip install\n         run: pip install -r requirements.txt\n-      - name: choose Plone version\n-        run: sed -ie "s#plone-x.x.x.cfg#plone-${{ matrix.plone-version }}.x.cfg#" ci.cfg\n \n       # buildout\n       - name: buildout\n-        run: buildout -t 10 -c ci.cfg\n+        run: buildout -t 10 -c plone-${{ matrix.plone-version }}.x.cfg code-analysis:return-status-codes=True\n         env:\n           CI: true\n \n@@ -65,7 +63,7 @@ jobs:\n         run: if [ "${{ matrix.plone-version }}" == "5.2" ] && [ ${{ matrix.python-version }} == \'3.7\' ]; then pip install black && black src/ --check --diff; fi\n \n       # code analysis\n-      - name: black\n+      - name: code analysis\n         run: bin/code-analysis\n \n       # build sphinx\n'

