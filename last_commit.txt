Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2023-07-14T17:05:26+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/d6693dad98d2c3b6710c6805a6e43dd0ceaf1ef7

Patch: do not publish CMFCore folder filter methods.

See https://github.com/zopefoundation/Products.CMFCore/security/advisories/GHSA-4hpj-8rhv-9x87

Files changed:
A news/3826.bugfix
M Products/CMFPlone/patches/publishing.py

b"diff --git a/Products/CMFPlone/patches/publishing.py b/Products/CMFPlone/patches/publishing.py\nindex 598a6c38eb..680c9e1712 100644\n--- a/Products/CMFPlone/patches/publishing.py\n+++ b/Products/CMFPlone/patches/publishing.py\n@@ -2,12 +2,13 @@\n # From Products.PloneHotfix20160419\n # Plus extras for properties.\n # Plus Products.PloneHotfix20210518.\n+# Plus https://github.com/zopefoundation/Products.CMFCore/security/advisories/GHSA-4hpj-8rhv-9x87\n from OFS.PropertyManager import PropertyManager\n #from OFS.ZDOM import Document\n #from OFS.ZDOM import Node\n+from Products.CMFCore.PortalFolder import PortalFolderBase\n from Products.CMFPlone.Portal import PloneSite\n \n-\n try:\n     from plone.dexterity.content import Item\n     from plone.dexterity.content import Container\n@@ -97,3 +98,10 @@ def delete_method_docstring(klass, method_name):\n \n for method_name in property_methods:\n     delete_method_docstring(PropertyManager, method_name)\n+\n+folder_filter_methods = (\n+    'encodeFolderFilter',\n+    'decodeFolderFilter',\n+)\n+for method_name in folder_filter_methods:\n+    delete_method_docstring(PortalFolderBase, method_name)\ndiff --git a/news/3826.bugfix b/news/3826.bugfix\nnew file mode 100644\nindex 0000000000..91d6d7462d\n--- /dev/null\n+++ b/news/3826.bugfix\n@@ -0,0 +1,2 @@\n+Do not publish unused CMFCore folder filter methods.\n+[maurits]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2023-07-18T15:49:23+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/a60afaf3265799e509b81a77d4540a619a157450

Merge pull request #3826 from plone/maurits-dont-publish-cmfcore-folder-filter-methods

Patch: do not publish CMFCore folder filter methods. [5.2]

Files changed:
A news/3826.bugfix
M Products/CMFPlone/patches/publishing.py

b"diff --git a/Products/CMFPlone/patches/publishing.py b/Products/CMFPlone/patches/publishing.py\nindex 598a6c38eb..680c9e1712 100644\n--- a/Products/CMFPlone/patches/publishing.py\n+++ b/Products/CMFPlone/patches/publishing.py\n@@ -2,12 +2,13 @@\n # From Products.PloneHotfix20160419\n # Plus extras for properties.\n # Plus Products.PloneHotfix20210518.\n+# Plus https://github.com/zopefoundation/Products.CMFCore/security/advisories/GHSA-4hpj-8rhv-9x87\n from OFS.PropertyManager import PropertyManager\n #from OFS.ZDOM import Document\n #from OFS.ZDOM import Node\n+from Products.CMFCore.PortalFolder import PortalFolderBase\n from Products.CMFPlone.Portal import PloneSite\n \n-\n try:\n     from plone.dexterity.content import Item\n     from plone.dexterity.content import Container\n@@ -97,3 +98,10 @@ def delete_method_docstring(klass, method_name):\n \n for method_name in property_methods:\n     delete_method_docstring(PropertyManager, method_name)\n+\n+folder_filter_methods = (\n+    'encodeFolderFilter',\n+    'decodeFolderFilter',\n+)\n+for method_name in folder_filter_methods:\n+    delete_method_docstring(PortalFolderBase, method_name)\ndiff --git a/news/3826.bugfix b/news/3826.bugfix\nnew file mode 100644\nindex 0000000000..91d6d7462d\n--- /dev/null\n+++ b/news/3826.bugfix\n@@ -0,0 +1,2 @@\n+Do not publish unused CMFCore folder filter methods.\n+[maurits]\n"

