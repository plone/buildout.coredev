Repository: plone.staticresources


Branch: refs/heads/1.x
Date: 2021-02-19T07:55:15-06:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.staticresources/commit/2f31803b187065e3b0f467e82afa9f69403da2c8

Include upgrade step 12, which was missing.

Files changed:
A news/123.bugfix
M src/plone/staticresources/setuphandlers.py
M src/plone/staticresources/upgrades/configure.zcml

b'diff --git a/news/123.bugfix b/news/123.bugfix\nnew file mode 100644\nindex 00000000..5b35f12a\n--- /dev/null\n+++ b/news/123.bugfix\n@@ -0,0 +1,2 @@\n+Include upgrade step 12, which was missing.\n+[thet]\ndiff --git a/src/plone/staticresources/setuphandlers.py b/src/plone/staticresources/setuphandlers.py\nindex 6b064be2..7136d63c 100644\n--- a/src/plone/staticresources/setuphandlers.py\n+++ b/src/plone/staticresources/setuphandlers.py\n@@ -29,4 +29,5 @@ def getNonInstallableProfiles(self):\n             "plone.staticresources.upgrades:9",\n             "plone.staticresources.upgrades:10",\n             "plone.staticresources.upgrades:11",\n+            "plone.staticresources.upgrades:12",\n         ]\ndiff --git a/src/plone/staticresources/upgrades/configure.zcml b/src/plone/staticresources/upgrades/configure.zcml\nindex a62744c3..2c2d0f09 100644\n--- a/src/plone/staticresources/upgrades/configure.zcml\n+++ b/src/plone/staticresources/upgrades/configure.zcml\n@@ -12,5 +12,6 @@\n   <include file="9.zcml" />\n   <include file="10.zcml" />\n   <include file="11.zcml" />\n+  <include file="12.zcml" />\n \n </configure>\n'

Repository: plone.staticresources


Branch: refs/heads/1.x
Date: 2021-02-19T07:55:15-06:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.staticresources/commit/5d3a0b8303f273a7c79b2f3c3d6c3c755d00763d

remove wrong bundle with typo

Files changed:
A src/plone/staticresources/upgrades/13.zcml
A src/plone/staticresources/upgrades/profiles/13/registry.xml
M news/123.bugfix
M src/plone/staticresources/profiles/default/metadata.xml
M src/plone/staticresources/upgrades/configure.zcml

b'diff --git a/news/123.bugfix b/news/123.bugfix\nindex 5b35f12a..b1a31e76 100644\n--- a/news/123.bugfix\n+++ b/news/123.bugfix\n@@ -1,2 +1,5 @@\n Include upgrade step 12, which was missing.\n [thet]\n+\n+Remove bundle with typo.\n+[petschki]\ndiff --git a/src/plone/staticresources/profiles/default/metadata.xml b/src/plone/staticresources/profiles/default/metadata.xml\nindex a6ee2fc0..6ed29f19 100644\n--- a/src/plone/staticresources/profiles/default/metadata.xml\n+++ b/src/plone/staticresources/profiles/default/metadata.xml\n@@ -1,6 +1,6 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <metadata>\n-  <version>12</version>\n+  <version>13</version>\n   <dependencies>\n     <dependency>profile-plone.resource:default</dependency>\n   </dependencies>\ndiff --git a/src/plone/staticresources/upgrades/13.zcml b/src/plone/staticresources/upgrades/13.zcml\nnew file mode 100644\nindex 00000000..4d41bfa2\n--- /dev/null\n+++ b/src/plone/staticresources/upgrades/13.zcml\n@@ -0,0 +1,19 @@\n+<configure xmlns="http://namespaces.zope.org/zope"\n+  xmlns:gs="http://namespaces.zope.org/genericsetup">\n+\n+  <gs:registerProfile name="13"\n+    title="Update bundles"\n+    description=\'Configuration for version 13\'\n+    directory="profiles/13"\n+    for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+    provides="Products.GenericSetup.interfaces.EXTENSION" />\n+\n+  <gs:upgradeDepends\n+    source="12"\n+    destination="13"\n+    profile="plone.staticresources:default"\n+    title="Remove wrong bundle from upgrade profile 11"\n+    import_profile="plone.staticresources.upgrades:13"\n+    />\n+\n+</configure>\ndiff --git a/src/plone/staticresources/upgrades/configure.zcml b/src/plone/staticresources/upgrades/configure.zcml\nindex 2c2d0f09..7355ff9c 100644\n--- a/src/plone/staticresources/upgrades/configure.zcml\n+++ b/src/plone/staticresources/upgrades/configure.zcml\n@@ -13,5 +13,6 @@\n   <include file="10.zcml" />\n   <include file="11.zcml" />\n   <include file="12.zcml" />\n+  <include file="13.zcml" />\n \n </configure>\ndiff --git a/src/plone/staticresources/upgrades/profiles/13/registry.xml b/src/plone/staticresources/upgrades/profiles/13/registry.xml\nnew file mode 100644\nindex 00000000..62a0d88b\n--- /dev/null\n+++ b/src/plone/staticresources/upgrades/profiles/13/registry.xml\n@@ -0,0 +1,4 @@\n+<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n+<registry>\n+  <records remove="True" prefix="plone.bundles/resourceregistryt" interface=\'Products.CMFPlone.interfaces.IBundleRegistry\' />\n+</registry>\n'

Repository: plone.staticresources


Branch: refs/heads/1.x
Date: 2021-02-19T07:55:15-06:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.staticresources/commit/bc887dc9b08ea4cdbe689890de0e5d6e67a3202d

update non installable profiles

Files changed:
M src/plone/staticresources/setuphandlers.py

b'diff --git a/src/plone/staticresources/setuphandlers.py b/src/plone/staticresources/setuphandlers.py\nindex 7136d63c..21a922cf 100644\n--- a/src/plone/staticresources/setuphandlers.py\n+++ b/src/plone/staticresources/setuphandlers.py\n@@ -30,4 +30,5 @@ def getNonInstallableProfiles(self):\n             "plone.staticresources.upgrades:10",\n             "plone.staticresources.upgrades:11",\n             "plone.staticresources.upgrades:12",\n+            "plone.staticresources.upgrades:13",\n         ]\n'

