Repository: plone.tiles


Branch: refs/heads/master
Date: 2021-10-06T18:38:03+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.tiles/commit/ebe64d293f4ae01574519974ca7cdc621156d132

Fix incorrectly set condition for plone.protect.

Files changed:
A news/33.bugfix
M plone/tiles/configure.zcml

b'diff --git a/news/33.bugfix b/news/33.bugfix\nnew file mode 100644\nindex 0000000..627b0b2\n--- /dev/null\n+++ b/news/33.bugfix\n@@ -0,0 +1,2 @@\n+Fix incorrectly set condition for plone.protect.\n+[thet]\ndiff --git a/plone/tiles/configure.zcml b/plone/tiles/configure.zcml\nindex 44562a4..f53a53c 100644\n--- a/plone/tiles/configure.zcml\n+++ b/plone/tiles/configure.zcml\n@@ -61,40 +61,40 @@\n         permission="zope.Public"\n         />\n \n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".esi.ESIHead *"\n-        factory=".esi.ESIProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".esi.ESIBody *"\n-        factory=".esi.ESIProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".tile.Tile *"\n-        factory=".tile.TileProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n     <configure zcml:condition="installed plone.protect">\n-      <adapter\n-        name="plone.tiles.tiletheming"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".tile.Tile *"\n-        factory=".tile.TileThemingTransform"\n-        zcml:condition="installed plone.transformchain"\n-      />\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".esi.ESIHead *"\n+            factory=".esi.ESIProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n+\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".esi.ESIBody *"\n+            factory=".esi.ESIProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n+\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".tile.Tile *"\n+            factory=".tile.TileProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n     </configure>\n \n+    <adapter\n+      name="plone.tiles.tiletheming"\n+      provides="plone.transformchain.interfaces.ITransform"\n+      for=".tile.Tile *"\n+      factory=".tile.TileThemingTransform"\n+      zcml:condition="installed plone.transformchain"\n+    />\n+\n     <!-- Field Type converters -->\n     <adapter for="zope.schema.interfaces.IBytesLine"\n              factory="plone.tiles.fieldtypeconverters.NoConverter"\n'

Repository: plone.tiles


Branch: refs/heads/master
Date: 2021-10-06T23:13:08+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.tiles/commit/2ed1d0c3064772c4cbc7563f5031ee3258b5ea81

Merge pull request #33 from plone/thet-fix-condition-plone-protect

Fix incorrectly set condition for plone.protect.

Files changed:
A news/33.bugfix
M plone/tiles/configure.zcml

b'diff --git a/news/33.bugfix b/news/33.bugfix\nnew file mode 100644\nindex 0000000..627b0b2\n--- /dev/null\n+++ b/news/33.bugfix\n@@ -0,0 +1,2 @@\n+Fix incorrectly set condition for plone.protect.\n+[thet]\ndiff --git a/plone/tiles/configure.zcml b/plone/tiles/configure.zcml\nindex 44562a4..f53a53c 100644\n--- a/plone/tiles/configure.zcml\n+++ b/plone/tiles/configure.zcml\n@@ -61,40 +61,40 @@\n         permission="zope.Public"\n         />\n \n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".esi.ESIHead *"\n-        factory=".esi.ESIProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".esi.ESIBody *"\n-        factory=".esi.ESIProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n-    <adapter\n-        name="plone.protect.autocsrf"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".tile.Tile *"\n-        factory=".tile.TileProtectTransform"\n-        zcml:condition="installed plone.transformchain"\n-        />\n-\n     <configure zcml:condition="installed plone.protect">\n-      <adapter\n-        name="plone.tiles.tiletheming"\n-        provides="plone.transformchain.interfaces.ITransform"\n-        for=".tile.Tile *"\n-        factory=".tile.TileThemingTransform"\n-        zcml:condition="installed plone.transformchain"\n-      />\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".esi.ESIHead *"\n+            factory=".esi.ESIProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n+\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".esi.ESIBody *"\n+            factory=".esi.ESIProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n+\n+        <adapter\n+            name="plone.protect.autocsrf"\n+            provides="plone.transformchain.interfaces.ITransform"\n+            for=".tile.Tile *"\n+            factory=".tile.TileProtectTransform"\n+            zcml:condition="installed plone.transformchain"\n+            />\n     </configure>\n \n+    <adapter\n+      name="plone.tiles.tiletheming"\n+      provides="plone.transformchain.interfaces.ITransform"\n+      for=".tile.Tile *"\n+      factory=".tile.TileThemingTransform"\n+      zcml:condition="installed plone.transformchain"\n+    />\n+\n     <!-- Field Type converters -->\n     <adapter for="zope.schema.interfaces.IBytesLine"\n              factory="plone.tiles.fieldtypeconverters.NoConverter"\n'

