Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2024-05-31T09:12:47+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/ca1e406a7dd2d3a181c5a95cf04202230d396edd

prepare to work without pas.discussion installed.

Files changed:
A news/63.bugfix
M Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py

b'diff --git a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\nindex 70d3694..d487c20 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n@@ -674,20 +674,22 @@ def test_16_getWorklists(self):\n         if "comment_review_workflow" in keys:\n             # This test needs to work on both 4.0 and 4.1\n             keys.remove("comment_review_workflow")\n-\n+        expected = (\n+            "folder_workflow",\n+            "intranet_folder_workflow",\n+            "intranet_workflow",\n+            "one_state_workflow",\n+            "plone_workflow",\n+            "simple_publication_workflow",\n+        )\n+        installer = get_installer(self.portal)\n+        if installer.is_product_installed("plone.app.discussion"):\n+            expected += (\n+                "comment_one_state_workflow",\n+            )\n         self.assertEqual(\n             sorted(tuple(keys)),\n-            sorted(\n-                (\n-                    "comment_one_state_workflow",\n-                    "folder_workflow",\n-                    "intranet_folder_workflow",\n-                    "intranet_workflow",\n-                    "one_state_workflow",\n-                    "plone_workflow",\n-                    "simple_publication_workflow",\n-                )\n-            ),\n+            sorted(expected),\n         )\n         self.assertEqual(tuple(wf_tool.getWorklistsResults()), (document,))\n \ndiff --git a/news/63.bugfix b/news/63.bugfix\nnew file mode 100644\nindex 0000000..18dce2a\n--- /dev/null\n+++ b/news/63.bugfix\n@@ -0,0 +1 @@\n+Prepare to work with plone.app.discussion as a core add-on. [@jensens]\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2024-05-31T07:15:00Z
Author: pre-commit-ci[bot] (pre-commit-ci[bot]) <66853113+pre-commit-ci[bot]@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/f2b91fbc9192ef27b749553dfb83e83b7c569c6c

[pre-commit.ci] auto fixes from pre-commit.com hooks

for more information, see https://pre-commit.ci

Files changed:
M Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py

b'diff --git a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\nindex d487c20..02f702c 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n@@ -684,9 +684,7 @@ def test_16_getWorklists(self):\n         )\n         installer = get_installer(self.portal)\n         if installer.is_product_installed("plone.app.discussion"):\n-            expected += (\n-                "comment_one_state_workflow",\n-            )\n+            expected += ("comment_one_state_workflow",)\n         self.assertEqual(\n             sorted(tuple(keys)),\n             sorted(expected),\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2024-05-31T09:16:54+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/1f9bc0bc13216cdaf33955952eb967dddd4f6f01

Merge pull request #63 from plone/pa-discussion-core-addon

prepare to work without pas.discussion installed.

Files changed:
A news/63.bugfix
M Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py

b'diff --git a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\nindex 70d3694..02f702c 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_CMFPlacefulWorkflow.py\n@@ -674,20 +674,20 @@ def test_16_getWorklists(self):\n         if "comment_review_workflow" in keys:\n             # This test needs to work on both 4.0 and 4.1\n             keys.remove("comment_review_workflow")\n-\n+        expected = (\n+            "folder_workflow",\n+            "intranet_folder_workflow",\n+            "intranet_workflow",\n+            "one_state_workflow",\n+            "plone_workflow",\n+            "simple_publication_workflow",\n+        )\n+        installer = get_installer(self.portal)\n+        if installer.is_product_installed("plone.app.discussion"):\n+            expected += ("comment_one_state_workflow",)\n         self.assertEqual(\n             sorted(tuple(keys)),\n-            sorted(\n-                (\n-                    "comment_one_state_workflow",\n-                    "folder_workflow",\n-                    "intranet_folder_workflow",\n-                    "intranet_workflow",\n-                    "one_state_workflow",\n-                    "plone_workflow",\n-                    "simple_publication_workflow",\n-                )\n-            ),\n+            sorted(expected),\n         )\n         self.assertEqual(tuple(wf_tool.getWorklistsResults()), (document,))\n \ndiff --git a/news/63.bugfix b/news/63.bugfix\nnew file mode 100644\nindex 0000000..18dce2a\n--- /dev/null\n+++ b/news/63.bugfix\n@@ -0,0 +1 @@\n+Prepare to work with plone.app.discussion as a core add-on. [@jensens]\n'

