Repository: plone.app.viewletmanager


Branch: refs/heads/master
Date: 2022-09-01T11:31:35+02:00
Author: Stefan Antonelli (santonelli) <stefan.antonelli@operun.de>
Commit: https://github.com/plone/plone.app.viewletmanager/commit/5879caee78f43825d19081a9fd36a1dfa101a442

update markup to use bs cards

Files changed:
M plone/app/viewletmanager/manage-viewletmanager.pt
M plone/app/viewletmanager/manage-viewlets.pt

b'diff --git a/plone/app/viewletmanager/manage-viewletmanager.pt b/plone/app/viewletmanager/manage-viewletmanager.pt\nindex 497f61d..f34b8a5 100644\n--- a/plone/app/viewletmanager/manage-viewletmanager.pt\n+++ b/plone/app/viewletmanager/manage-viewletmanager.pt\n@@ -1,33 +1,52 @@\n-<div class="managedViewlets" tal:attributes="id view/normalized_name"\n-     i18n:domain="plone">\n-    <dl class="viewletmanager" tal:define="auth_token context/@@authenticator/token | nothing">\n-        <dt>\n-            ViewletManager: <span tal:content="view/name">ViewletManager name</span>\n-            (<span tal:content="view/interface" />)\n-        </dt>\n-        <dd>\n-            <dl tal:repeat="viewlet options/viewlets"\n-                tal:attributes="class python:\'viewlet %s\' % (viewlet[\'hidden\'] and \'hiddenViewlet\' or \'\')">\n-                <dt>\n-                    Viewlet: <span tal:replace="viewlet/name">Viewlet name</span>\n-                    (<span tal:replace="viewlet/index">Index</span>)\n-                    <a class="up"\n-                       tal:condition="viewlet/up_url | nothing"\n-                       tal:attributes="href string:${viewlet/up_url}&_authenticator=${auth_token}">&#9650;</a>\n-                    <a class="down"\n-                       tal:condition="viewlet/down_url | nothing"\n-                       tal:attributes="href string:${viewlet/down_url}&_authenticator=${auth_token}">&#9660;</a>\n-                    <a class="hide"\n-                       i18n:translate="label_hide_item"\n-                       tal:attributes="href string:${viewlet/hide_url}&_authenticator=${auth_token}">Hide</a>\n-                    <a class="show"\n-                       i18n:translate="label_show_item"\n-                       tal:attributes="href string:${viewlet/show_url}&_authenticator=${auth_token}">Show</a>\n-                </dt>\n-                <dd class="clearfix">\n-                    <div tal:replace="structure viewlet/content"></div>\n-                </dd>\n-            </dl>\n-        </dd>\n-    </dl>\n-</div>\n+<div class="container mb-3">\n+\n+  <div class="managedViewlets" tal:attributes="id view/normalized_name" i18n:domain="plone">\n+\n+    <div class="card" tal:define="auth_token context/@@authenticator/token | nothing">\n+\n+      <div class="card-header">\n+        ViewletManager <span class="text-muted" tal:content="view/name">ViewletManager name</span> (<span tal:content="view/interface" />)\n+      </div>\n+\n+      <div class="card-body">\n+\n+        <div tal:repeat="viewlet options/viewlets" tal:attributes="class python:\'viewlet %s\' % (viewlet[\'hidden\'] and \'hiddenViewlet\' or \'\')">\n+\n+          <div class="card mb-3">\n+\n+            <div class="card-header d-flex">\n+\n+              <div class="me-auto">\n+                Viewlet <span class="text-muted" tal:content="viewlet/name">Viewlet name</span> (<span tal:replace="viewlet/index">Index</span>)\n+              </div>\n+\n+              <a class="btn btn-sm btn-outline-primary up mx-1 text-decoration-none" tal:condition="viewlet/up_url | nothing" tal:attributes="href string:${viewlet/up_url}&_authenticator=${auth_token}">\n+                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-short" viewBox="0 0 16 16">\n+                  <path fill-rule="evenodd" d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"/>\n+                </svg>\n+              </a>\n+              <a class="btn btn-sm btn-outline-primary down mx-1 text-decoration-none" tal:condition="viewlet/down_url | nothing" tal:attributes="href string:${viewlet/down_url}&_authenticator=${auth_token}">\n+                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-short" viewBox="0 0 16 16">\n+                  <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"/>\n+                </svg>\n+              </a>\n+              <a class="btn btn-sm btn-outline-primary hide mx-1 text-decoration-none" i18n:translate="label_hide_item" tal:attributes="href string:${viewlet/hide_url}&_authenticator=${auth_token}">Hide</a>\n+              <a class="btn btn-sm btn-outline-primary show mx-1 text-decoration-none" i18n:translate="label_show_item" tal:attributes="href string:${viewlet/show_url}&_authenticator=${auth_token}">Show</a>\n+\n+            </div>\n+\n+            <div class="card-body">\n+              <div tal:replace="structure viewlet/content"></div>\n+            </div>\n+\n+          </div>\n+\n+        </div>\n+\n+      </div>\n+\n+    </div>\n+\n+  </div>\n+\n+</div>\n\\ No newline at end of file\ndiff --git a/plone/app/viewletmanager/manage-viewlets.pt b/plone/app/viewletmanager/manage-viewlets.pt\nindex 0b3a2e2..add7796 100644\n--- a/plone/app/viewletmanager/manage-viewlets.pt\n+++ b/plone/app/viewletmanager/manage-viewlets.pt\n@@ -14,7 +14,7 @@\n                             e.preventDefault();\n                             var url = $(e.currentTarget).attr(\'href\'),\n                                 vm = $(e.delegateTarget);\n-                            $(vm).load(url + \' #\' + $(vm).attr(\'id\') + \'.managedViewlets > dl\');\n+                            $(vm).load(url + \' #\' + $(vm).attr(\'id\') + \'.managedViewlets > div\');\n                       });\n                   });\n               })(jQuery);\n@@ -25,43 +25,46 @@\n <metal:main fill-slot="main">\n \n     <style type="text/css" media="screen">\n-        .viewletmanager, .viewlet { display: block; margin: .5em;}\n-        .viewletmanager { border: 1px solid #000;}\n-        .viewletmanager > dt { border-bottom: 1px solid #000; }\n-        .viewletmanager > dt, .viewlet > dt { font-size: .8em; background: #EEE; padding: .5em; }\n-        .viewlet { border: 1px solid #999; }\n-        .viewlet > dt { border-bottom: 1px solid #999; }\n-        .viewlet > dt > a.show { display: none !important; }\n-        .viewlet > dt > a.hide { display: inline !important; }\n-        .viewletmanager dd, .viewlet dd { padding: .5em; }\n-        .viewlet.hiddenViewlet { opacity: 0.5; }\n-        .viewlet.hiddenViewlet > dt > a.hide { display:none !important; }\n-        .viewlet.hiddenViewlet > dt > a.show { display: inline !important; }\n+        #portal-top { margin-top: 1em; }\n+        #portal-footer-wrapper { background-color: unset; color: unset; text-align: left; padding: 0; }\n+        #plone-toolbar { padding-top: 1em; }        \n+        #plone-toolbar .card-header { color: #000; }\n+        #plone-toolbar .card-body { background-color: #333; }\n+        #plone-toolbar .d-flex { display: block; }\n+        #plone-toolbar .btn { margin: 5px 5px 0 0; }\n     </style>\n \n-    <div tal:replace="structure provider:plone.abovecontenttitle" />\n+    <div class="xcontainer">\n \n-    <h1 class="documentFirstHeading"\n-        i18n:translate="label_title">\n-      Title\n-    </h1>\n+        <div tal:replace="structure provider:plone.abovecontenttitle" />\n \n-    <div tal:replace="structure provider:plone.belowcontenttitle" />\n+        <div class="container my5">\n+          <h1 class="" i18n:translate="label_title">\n+              Title\n+          </h1>\n+        </div>\n \n-    <div class="documentDescription"\n-       i18n:translate="label_description">\n-        Summary\n-    </div>\n+        <div tal:replace="structure provider:plone.belowcontenttitle" />\n \n-    <div tal:replace="structure provider:plone.abovecontentbody" />\n+        <div class="container my-5">\n+          <div class="lead" i18n:translate="label_description">\n+              Summary\n+          </div>\n+        </div>\n \n-    <div id="content-core">\n-        <p>\n-            This item does not have any body text, click the edit tab to change it.\n-        </p>\n-    </div>\n+        <div tal:replace="structure provider:plone.abovecontentbody" />\n \n-    <div tal:replace="structure provider:plone.belowcontentbody" />\n+        <div class="container my-5">\n+          <div id="content-core">\n+              <p>\n+                  This item does not have any body text, click the edit tab to change it.\n+              </p>\n+          </div>\n+        </div>\n+\n+        <div tal:replace="structure provider:plone.belowcontentbody" />\n+    \n+    </div>\n \n </metal:main>\n \n'

Repository: plone.app.viewletmanager


Branch: refs/heads/master
Date: 2022-09-01T11:37:52+02:00
Author: Stefan Antonelli (santonelli) <stefan.antonelli@operun.de>
Commit: https://github.com/plone/plone.app.viewletmanager/commit/444abd0def7793216fefb495575f45014f4c71d8

add changelog

Files changed:
A news/26.bugfix

b'diff --git a/news/26.bugfix b/news/26.bugfix\nnew file mode 100644\nindex 0000000..ecbe634\n--- /dev/null\n+++ b/news/26.bugfix\n@@ -0,0 +1,2 @@\n+Update markup due to disabled Diazo rules for this view\n+  [santonelli]\n\\ No newline at end of file\n'

Repository: plone.app.viewletmanager


Branch: refs/heads/master
Date: 2022-09-01T21:26:57+03:00
Author: Maik Derstappen (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.viewletmanager/commit/55de75715a40bc23161213983c45b76cdacca399

Merge pull request #26 from plone/santonelli-update-markup

Update markup to use Bootstrap Cards

Files changed:
A news/26.bugfix
M plone/app/viewletmanager/manage-viewletmanager.pt
M plone/app/viewletmanager/manage-viewlets.pt

b'diff --git a/news/26.bugfix b/news/26.bugfix\nnew file mode 100644\nindex 0000000..ecbe634\n--- /dev/null\n+++ b/news/26.bugfix\n@@ -0,0 +1,2 @@\n+Update markup due to disabled Diazo rules for this view\n+  [santonelli]\n\\ No newline at end of file\ndiff --git a/plone/app/viewletmanager/manage-viewletmanager.pt b/plone/app/viewletmanager/manage-viewletmanager.pt\nindex 497f61d..f34b8a5 100644\n--- a/plone/app/viewletmanager/manage-viewletmanager.pt\n+++ b/plone/app/viewletmanager/manage-viewletmanager.pt\n@@ -1,33 +1,52 @@\n-<div class="managedViewlets" tal:attributes="id view/normalized_name"\n-     i18n:domain="plone">\n-    <dl class="viewletmanager" tal:define="auth_token context/@@authenticator/token | nothing">\n-        <dt>\n-            ViewletManager: <span tal:content="view/name">ViewletManager name</span>\n-            (<span tal:content="view/interface" />)\n-        </dt>\n-        <dd>\n-            <dl tal:repeat="viewlet options/viewlets"\n-                tal:attributes="class python:\'viewlet %s\' % (viewlet[\'hidden\'] and \'hiddenViewlet\' or \'\')">\n-                <dt>\n-                    Viewlet: <span tal:replace="viewlet/name">Viewlet name</span>\n-                    (<span tal:replace="viewlet/index">Index</span>)\n-                    <a class="up"\n-                       tal:condition="viewlet/up_url | nothing"\n-                       tal:attributes="href string:${viewlet/up_url}&_authenticator=${auth_token}">&#9650;</a>\n-                    <a class="down"\n-                       tal:condition="viewlet/down_url | nothing"\n-                       tal:attributes="href string:${viewlet/down_url}&_authenticator=${auth_token}">&#9660;</a>\n-                    <a class="hide"\n-                       i18n:translate="label_hide_item"\n-                       tal:attributes="href string:${viewlet/hide_url}&_authenticator=${auth_token}">Hide</a>\n-                    <a class="show"\n-                       i18n:translate="label_show_item"\n-                       tal:attributes="href string:${viewlet/show_url}&_authenticator=${auth_token}">Show</a>\n-                </dt>\n-                <dd class="clearfix">\n-                    <div tal:replace="structure viewlet/content"></div>\n-                </dd>\n-            </dl>\n-        </dd>\n-    </dl>\n-</div>\n+<div class="container mb-3">\n+\n+  <div class="managedViewlets" tal:attributes="id view/normalized_name" i18n:domain="plone">\n+\n+    <div class="card" tal:define="auth_token context/@@authenticator/token | nothing">\n+\n+      <div class="card-header">\n+        ViewletManager <span class="text-muted" tal:content="view/name">ViewletManager name</span> (<span tal:content="view/interface" />)\n+      </div>\n+\n+      <div class="card-body">\n+\n+        <div tal:repeat="viewlet options/viewlets" tal:attributes="class python:\'viewlet %s\' % (viewlet[\'hidden\'] and \'hiddenViewlet\' or \'\')">\n+\n+          <div class="card mb-3">\n+\n+            <div class="card-header d-flex">\n+\n+              <div class="me-auto">\n+                Viewlet <span class="text-muted" tal:content="viewlet/name">Viewlet name</span> (<span tal:replace="viewlet/index">Index</span>)\n+              </div>\n+\n+              <a class="btn btn-sm btn-outline-primary up mx-1 text-decoration-none" tal:condition="viewlet/up_url | nothing" tal:attributes="href string:${viewlet/up_url}&_authenticator=${auth_token}">\n+                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-short" viewBox="0 0 16 16">\n+                  <path fill-rule="evenodd" d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"/>\n+                </svg>\n+              </a>\n+              <a class="btn btn-sm btn-outline-primary down mx-1 text-decoration-none" tal:condition="viewlet/down_url | nothing" tal:attributes="href string:${viewlet/down_url}&_authenticator=${auth_token}">\n+                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-short" viewBox="0 0 16 16">\n+                  <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"/>\n+                </svg>\n+              </a>\n+              <a class="btn btn-sm btn-outline-primary hide mx-1 text-decoration-none" i18n:translate="label_hide_item" tal:attributes="href string:${viewlet/hide_url}&_authenticator=${auth_token}">Hide</a>\n+              <a class="btn btn-sm btn-outline-primary show mx-1 text-decoration-none" i18n:translate="label_show_item" tal:attributes="href string:${viewlet/show_url}&_authenticator=${auth_token}">Show</a>\n+\n+            </div>\n+\n+            <div class="card-body">\n+              <div tal:replace="structure viewlet/content"></div>\n+            </div>\n+\n+          </div>\n+\n+        </div>\n+\n+      </div>\n+\n+    </div>\n+\n+  </div>\n+\n+</div>\n\\ No newline at end of file\ndiff --git a/plone/app/viewletmanager/manage-viewlets.pt b/plone/app/viewletmanager/manage-viewlets.pt\nindex 0b3a2e2..add7796 100644\n--- a/plone/app/viewletmanager/manage-viewlets.pt\n+++ b/plone/app/viewletmanager/manage-viewlets.pt\n@@ -14,7 +14,7 @@\n                             e.preventDefault();\n                             var url = $(e.currentTarget).attr(\'href\'),\n                                 vm = $(e.delegateTarget);\n-                            $(vm).load(url + \' #\' + $(vm).attr(\'id\') + \'.managedViewlets > dl\');\n+                            $(vm).load(url + \' #\' + $(vm).attr(\'id\') + \'.managedViewlets > div\');\n                       });\n                   });\n               })(jQuery);\n@@ -25,43 +25,46 @@\n <metal:main fill-slot="main">\n \n     <style type="text/css" media="screen">\n-        .viewletmanager, .viewlet { display: block; margin: .5em;}\n-        .viewletmanager { border: 1px solid #000;}\n-        .viewletmanager > dt { border-bottom: 1px solid #000; }\n-        .viewletmanager > dt, .viewlet > dt { font-size: .8em; background: #EEE; padding: .5em; }\n-        .viewlet { border: 1px solid #999; }\n-        .viewlet > dt { border-bottom: 1px solid #999; }\n-        .viewlet > dt > a.show { display: none !important; }\n-        .viewlet > dt > a.hide { display: inline !important; }\n-        .viewletmanager dd, .viewlet dd { padding: .5em; }\n-        .viewlet.hiddenViewlet { opacity: 0.5; }\n-        .viewlet.hiddenViewlet > dt > a.hide { display:none !important; }\n-        .viewlet.hiddenViewlet > dt > a.show { display: inline !important; }\n+        #portal-top { margin-top: 1em; }\n+        #portal-footer-wrapper { background-color: unset; color: unset; text-align: left; padding: 0; }\n+        #plone-toolbar { padding-top: 1em; }        \n+        #plone-toolbar .card-header { color: #000; }\n+        #plone-toolbar .card-body { background-color: #333; }\n+        #plone-toolbar .d-flex { display: block; }\n+        #plone-toolbar .btn { margin: 5px 5px 0 0; }\n     </style>\n \n-    <div tal:replace="structure provider:plone.abovecontenttitle" />\n+    <div class="xcontainer">\n \n-    <h1 class="documentFirstHeading"\n-        i18n:translate="label_title">\n-      Title\n-    </h1>\n+        <div tal:replace="structure provider:plone.abovecontenttitle" />\n \n-    <div tal:replace="structure provider:plone.belowcontenttitle" />\n+        <div class="container my5">\n+          <h1 class="" i18n:translate="label_title">\n+              Title\n+          </h1>\n+        </div>\n \n-    <div class="documentDescription"\n-       i18n:translate="label_description">\n-        Summary\n-    </div>\n+        <div tal:replace="structure provider:plone.belowcontenttitle" />\n \n-    <div tal:replace="structure provider:plone.abovecontentbody" />\n+        <div class="container my-5">\n+          <div class="lead" i18n:translate="label_description">\n+              Summary\n+          </div>\n+        </div>\n \n-    <div id="content-core">\n-        <p>\n-            This item does not have any body text, click the edit tab to change it.\n-        </p>\n-    </div>\n+        <div tal:replace="structure provider:plone.abovecontentbody" />\n \n-    <div tal:replace="structure provider:plone.belowcontentbody" />\n+        <div class="container my-5">\n+          <div id="content-core">\n+              <p>\n+                  This item does not have any body text, click the edit tab to change it.\n+              </p>\n+          </div>\n+        </div>\n+\n+        <div tal:replace="structure provider:plone.belowcontentbody" />\n+    \n+    </div>\n \n </metal:main>\n \n'

