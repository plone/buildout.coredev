Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2021-05-24T17:37:26-03:00
Author: wesleybl (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/a6121fe7a1545f73f73f47e988a5e159bead1ec6

Makes test Add a choice field with a named vocabulary more robust

This test fails randomly. Sometimes the keyword doesn't give an error
but doesn't do what it should. Now, in case of an error, we try again.

This try fix:

    Element 'css=div[data-field_id="languages"] a.fieldSettings' did not
appear in 30 seconds.

Files changed:
M plone/schemaeditor/tests/robot/test_fields.robot

b'diff --git a/plone/schemaeditor/tests/robot/test_fields.robot b/plone/schemaeditor/tests/robot/test_fields.robot\nindex 049ce4b..ca353af 100644\n--- a/plone/schemaeditor/tests/robot/test_fields.robot\n+++ b/plone/schemaeditor/tests/robot/test_fields.robot\n@@ -33,8 +33,8 @@ Add a choice field with a named vocabulary\n     Focus  form-widgets-__name__\n     Wait until keyword succeeds  10  1  Textfield Value Should Be  form-widgets-__name__  languages\n     Input text for sure  form-widgets-description  Spoken languages\n-    Select from list  form-widgets-factory  Multiple Choice\n-    Click button  css=.plone-modal-footer #form-buttons-add\n+    Wait until keyword succeeds  10  1  Select From List By Label  form-widgets-factory  Multiple Choice\n+    Wait until keyword succeeds  10  1  Click button  css=.plone-modal-footer #form-buttons-add\n     Wait until page contains element  css=div[data-field_id="languages"] a.fieldSettings\n \n     Open field settings  languages\n'

Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2021-05-24T21:30:23-03:00
Author: wesleybl (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/f074fb256201ef719e999e3f8ee042e0a362f467

Makes test Add a choice field with a named vocabulary more robust 2

Wait until the setting button is visible on the screen

Fix:

    Keyword 'Page Should Contain Element' failed after retrying for 10
seconds. The last error was: Page should have contained element
'css=.pb-ajax &gt; div,.plone-modal' but did not.

Files changed:
M plone/schemaeditor/tests/robot/test_fields.robot

b"diff --git a/plone/schemaeditor/tests/robot/test_fields.robot b/plone/schemaeditor/tests/robot/test_fields.robot\nindex ca353af..0a9905a 100644\n--- a/plone/schemaeditor/tests/robot/test_fields.robot\n+++ b/plone/schemaeditor/tests/robot/test_fields.robot\n@@ -182,4 +182,6 @@ Add field\n \n Open field settings\n     [Arguments]    ${field_id}\n-    Click Overlay Link  xpath=//div[@data-field_id='${field_id}']//a[@class='fieldSettings pat-plone-modal']\n+    ${locator}  Set Variable  //div[@data-field_id='${field_id}']//a[@class='fieldSettings pat-plone-modal']\n+    Wait until element is visible  xpath=${locator}\n+    Click Overlay Link  xpath=${locator}\n"

Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2021-05-26T20:03:16+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.schemaeditor/commit/e691f1a247fa7ccf171cbffa92f4597d65460e98

Merge pull request #84 from plone/fix_test_robot

Makes test Add a choice field with a named vocabulary more robust

Files changed:
M plone/schemaeditor/tests/robot/test_fields.robot

b'diff --git a/plone/schemaeditor/tests/robot/test_fields.robot b/plone/schemaeditor/tests/robot/test_fields.robot\nindex 049ce4b..0a9905a 100644\n--- a/plone/schemaeditor/tests/robot/test_fields.robot\n+++ b/plone/schemaeditor/tests/robot/test_fields.robot\n@@ -33,8 +33,8 @@ Add a choice field with a named vocabulary\n     Focus  form-widgets-__name__\n     Wait until keyword succeeds  10  1  Textfield Value Should Be  form-widgets-__name__  languages\n     Input text for sure  form-widgets-description  Spoken languages\n-    Select from list  form-widgets-factory  Multiple Choice\n-    Click button  css=.plone-modal-footer #form-buttons-add\n+    Wait until keyword succeeds  10  1  Select From List By Label  form-widgets-factory  Multiple Choice\n+    Wait until keyword succeeds  10  1  Click button  css=.plone-modal-footer #form-buttons-add\n     Wait until page contains element  css=div[data-field_id="languages"] a.fieldSettings\n \n     Open field settings  languages\n@@ -182,4 +182,6 @@ Add field\n \n Open field settings\n     [Arguments]    ${field_id}\n-    Click Overlay Link  xpath=//div[@data-field_id=\'${field_id}\']//a[@class=\'fieldSettings pat-plone-modal\']\n+    ${locator}  Set Variable  //div[@data-field_id=\'${field_id}\']//a[@class=\'fieldSettings pat-plone-modal\']\n+    Wait until element is visible  xpath=${locator}\n+    Click Overlay Link  xpath=${locator}\n'

