Repository: plone.api


Branch: refs/heads/master
Date: 2023-10-28T14:25:40-07:00
Author: Andreas Jung (zopyx) <yet@gmx.de>
Commit: https://github.com/plone/plone.api/commit/edbbe1780f2c2c7126a918213811e7f18d2eb5c4

More informative error message in content.create()
Fixes #516

Files changed:
A news/516.feature
M src/plone/api/content.py

b'diff --git a/news/516.feature b/news/516.feature\nnew file mode 100644\nindex 00000000..d12b914c\n--- /dev/null\n+++ b/news/516.feature\n@@ -0,0 +1 @@\n+- more informative error message in plone.api.content.create() [ajung]\ndiff --git a/src/plone/api/content.py b/src/plone/api/content.py\nindex c578d6b3..f85790ee 100644\n--- a/src/plone/api/content.py\n+++ b/src/plone/api/content.py\n@@ -78,11 +78,13 @@ def create(\n         types = [fti.getId() for fti in container.allowedContentTypes()]\n \n         raise InvalidParameterError(\n-            "Cannot add a \'{obj_type}\' object to the container.\\n"\n+            "Cannot add a \'{obj_type}\' object with id={obj_id} to the container {container_path}.\\n"\n             "Allowed types are:\\n"\n             "{allowed_types}\\n"\n             "{message}".format(\n                 obj_type=type,\n+                obj_id=content_id,\n+                container_path="/".join(container.getPhysicalPath()),\n                 allowed_types="\\n".join(sorted(types)),\n                 message=str(e),\n             ),\n'

Repository: plone.api


Branch: refs/heads/master
Date: 2023-10-28T14:26:39-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.api/commit/08efd509dc1aedb9261e9f18278aaebcaab9c887

Update news/516.feature

Files changed:
M news/516.feature

b'diff --git a/news/516.feature b/news/516.feature\nindex d12b914c..09487bdb 100644\n--- a/news/516.feature\n+++ b/news/516.feature\n@@ -1 +1 @@\n-- more informative error message in plone.api.content.create() [ajung]\n+More informative error message in plone.api.content.create() [ajung]\n'

Repository: plone.api


Branch: refs/heads/master
Date: 2023-10-29T11:27:16+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/0405e5af5b96ebe101ca8ced3d0735f7ccb16536

Merge pull request #517 from plone/ajung-fix-516

More informative error message in content.create()

Files changed:
A news/516.feature
M src/plone/api/content.py

b'diff --git a/news/516.feature b/news/516.feature\nnew file mode 100644\nindex 00000000..09487bdb\n--- /dev/null\n+++ b/news/516.feature\n@@ -0,0 +1 @@\n+More informative error message in plone.api.content.create() [ajung]\ndiff --git a/src/plone/api/content.py b/src/plone/api/content.py\nindex c578d6b3..f85790ee 100644\n--- a/src/plone/api/content.py\n+++ b/src/plone/api/content.py\n@@ -78,11 +78,13 @@ def create(\n         types = [fti.getId() for fti in container.allowedContentTypes()]\n \n         raise InvalidParameterError(\n-            "Cannot add a \'{obj_type}\' object to the container.\\n"\n+            "Cannot add a \'{obj_type}\' object with id={obj_id} to the container {container_path}.\\n"\n             "Allowed types are:\\n"\n             "{allowed_types}\\n"\n             "{message}".format(\n                 obj_type=type,\n+                obj_id=content_id,\n+                container_path="/".join(container.getPhysicalPath()),\n                 allowed_types="\\n".join(sorted(types)),\n                 message=str(e),\n             ),\n'

