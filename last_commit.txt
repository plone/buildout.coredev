Repository: mockup


Branch: refs/heads/master
Date: 2020-06-20T17:26:45+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/f06391fd484f89d628a562a02c25195a395be308

Fix Upload tab in TinyMCE Image showing [object Object]

Files changed:
A news/986.bugfix
M mockup/patterns/tinymce/templates/image.xml

b'diff --git a/mockup/patterns/tinymce/templates/image.xml b/mockup/patterns/tinymce/templates/image.xml\nindex 882cc147d..bf89d9360 100644\n--- a/mockup/patterns/tinymce/templates/image.xml\n+++ b/mockup/patterns/tinymce/templates/image.xml\n@@ -32,7 +32,7 @@\n \n       <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n       <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n-        <legend id="tinylink-uploadImage"><%- upload %></legend>\n+        <legend id="tinylink-uploadImage"><%- uploadText %></legend>\n         <div class="uploadify-me"></div>\n       </fieldset>\n       <% } %>\ndiff --git a/news/986.bugfix b/news/986.bugfix\nnew file mode 100644\nindex 000000000..df7138e75\n--- /dev/null\n+++ b/news/986.bugfix\n@@ -0,0 +1,2 @@\n+Fix Upload tab in TinyMCE Image showing [object Object]\n+[vincentfretin]\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-06-21T11:16:16+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/a6fa639b9e80ec04d9143bf451e73fd51d6ff0ae

Fix folder contents 'Configure display column' dialog going under toolbar.

Files changed:
M mockup/patterns/structure/less/pattern.structure.less
M news/986.bugfix

b'diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less\nindex ad98bbac8..8c8dfadf5 100644\n--- a/mockup/patterns/structure/less/pattern.structure.less\n+++ b/mockup/patterns/structure/less/pattern.structure.less\n@@ -85,7 +85,7 @@\n     .navbar {\n         position: sticky;\n         top: 0;\n-        z-index: 10;\n+        z-index: 1060;\n         background-color: #fafafa;\n \n         border: none;\ndiff --git a/news/986.bugfix b/news/986.bugfix\nindex df7138e75..daf500a3e 100644\n--- a/news/986.bugfix\n+++ b/news/986.bugfix\n@@ -1,2 +1,5 @@\n-Fix Upload tab in TinyMCE Image showing [object Object]\n+Fix Upload tab in TinyMCE Image showing [object Object].\n+https://github.com/plone/Products.CMFPlone/issues/3120\n+Fix folder contents "Configure display column" dialog going under toolbar.\n+https://github.com/plone/Products.CMFPlone/issues/3124\n [vincentfretin]\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-06-24T09:39:12+02:00
Author: Daniel Jowett (djowett-ftw) <54800639+djowett-ftw@users.noreply.github.com>
Commit: https://github.com/plone/mockup/commit/ad2773a4dd810b673cdf285af798b7f1e7817da1

Backport lost tinymce translations (#930)

* Restore translations of 'Remove link'

* Add missing translationa in tinymce pattern by...

    copying generateModalHtml function from master branch,
    also some backported xml changes from 71ddf6f387

* Add 2 further missing translations in tinymce pattern

Files changed:
A news/910.bugfix
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tinymce/templates/link.xml

b'diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js\nindex 5a4d2ec69..68894a106 100644\n--- a/mockup/patterns/tinymce/js/links.js\n+++ b/mockup/patterns/tinymce/js/links.js\n@@ -347,7 +347,7 @@ define([\n \n     editor.addButton(\'unlink\', {\n       icon: \'unlink\',\n-      tooltip: \'Remove link(s)\',\n+      tooltip: \'Remove link\',\n       cmd: \'unlink\',\n       stateSelector: \'a[href]\'\n     });\n@@ -472,6 +472,8 @@ define([\n         internal: this.options.text.internal,\n         external: this.options.text.external,\n         anchor: this.options.text.anchor,\n+        anchorLabel: this.options.text.anchorLabel,\n+        target: this.options.text.target,\n         linkTypes: this.options.linkTypes,\n         externalText: this.options.text.external,\n         emailText: this.options.text.email,\ndiff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js\nindex a49dfff02..e8c27060c 100644\n--- a/mockup/patterns/tinymce/pattern.js\n+++ b/mockup/patterns/tinymce/pattern.js\n@@ -140,6 +140,8 @@ define([\n         externalText: _t(\'External URL (can be relative within this site or absolute if it starts with http:// or https://)\'),\n         email: _t(\'Email Address\'),\n         anchor: _t(\'Anchor\'),\n+        anchorLabel: _t(\'Select an anchor\'),\n+        target: _t(\'Target\'),\n         subject: _t(\'Email Subject (optional)\'),\n         image: _t(\'Image\'),\n         imageAlign: _t(\'Align\'),\ndiff --git a/mockup/patterns/tinymce/templates/link.xml b/mockup/patterns/tinymce/templates/link.xml\nindex e2deff878..53ad0177f 100644\n--- a/mockup/patterns/tinymce/templates/link.xml\n+++ b/mockup/patterns/tinymce/templates/link.xml\n@@ -39,7 +39,7 @@\n \n       <% if(_.contains(linkTypes, \'email\')){ %>\n       <fieldset class="linkType email" data-linkType="email">\n-        <legend id="tinylink-email">Email</legend>\n+        <legend id="tinylink-email"><%- emailText %></legend>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label><%- emailText %></label>\n@@ -58,7 +58,7 @@\n         <legend id="tinylink-anchor"><%- anchor %></legend>\n         <div>\n           <div class="form-group main">\n-            <label>Select an anchor</label>\n+            <label><%- anchorLabel %></label>\n             <div class="input-wrapper">\n               <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n             </div>\n@@ -71,7 +71,7 @@\n \n     <div class="common-controls">\n       <div class="form-group">\n-        <label>Target</label>\n+        <label><%- target %></label>\n         <select name="target">\n           <% _.each(targetList, function(target){ %>\n             <option value="<%- target.value %>"><%- target.text %></option>\ndiff --git a/news/910.bugfix b/news/910.bugfix\nnew file mode 100644\nindex 000000000..f33a9b215\n--- /dev/null\n+++ b/news/910.bugfix\n@@ -0,0 +1,5 @@\n+tinymce pattern: Add missing translations by...\n+    - copying generateModalHtml function from master branch,\n+    - adding some backported xml changes from 71ddf6f387\n+    - adding 2 further translations (not yet in master)\n+[djowett-ftw]\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-06-24T11:09:20+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/ee295587a1386eafe42be7bc600a8299919dae62

The yarn upgrade e6bd1977871c7dbeb75b0eccc395687320e681b8 made the tests failed, reverting this underscore upgrade make the tests passed again

Files changed:
M yarn.lock

b'diff --git a/yarn.lock b/yarn.lock\nindex 91e39f81d..715561ba3 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -5106,9 +5106,9 @@ underscore@1.3.3:\n   integrity sha1-R6xTaD2vgyv6lS4XdEF9pHgXrkI=\n \n underscore@>=1.4.3, underscore@>=1.5.0:\n-  version "1.10.2"\n-  resolved "https://registry.yarnpkg.com/underscore/-/underscore-1.10.2.tgz#73d6aa3668f3188e4adb0f1943bd12cfd7efaaaf"\n-  integrity sha512-N4P+Q/BuyuEKFJ43B9gYuOj4TQUHXX+j2FqguVOpjkssLUUrnJofCcBccJSCoeturDoZU6GorDTHSvUDlSQbTg==\n+  version "1.9.1"\n+  resolved "https://registry.yarnpkg.com/underscore/-/underscore-1.9.1.tgz#06dce34a0e68a7babc29b365b8e74b8925203961"\n+  integrity sha512-5/4etnCkd9c8gwgowi5/om/mYO5ajCaOgdzj/oW+0eQV9WxKBDZw5+ycmKmeaTXjInS/W0BzpGLo2xR2aBwZdg==\n \n underscore@~1.4.4:\n   version "1.4.4"\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-06-24T11:28:52+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/a6cbe288aac8b5c618723dca305c24b252c3fbfe

Merge pull request #986 from plone/fix-upload-tab

Revert to underscore 1.9.1 to fix the tests
Fix regressions in TinyMCE link and image modals
Fix folder contents 'Configure display column' dialog going under toolbar

Files changed:
A news/910.bugfix
A news/986.bugfix
M mockup/patterns/structure/less/pattern.structure.less
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tinymce/templates/image.xml
M mockup/patterns/tinymce/templates/link.xml
M yarn.lock

b'diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less\nindex ad98bbac8..8c8dfadf5 100644\n--- a/mockup/patterns/structure/less/pattern.structure.less\n+++ b/mockup/patterns/structure/less/pattern.structure.less\n@@ -85,7 +85,7 @@\n     .navbar {\n         position: sticky;\n         top: 0;\n-        z-index: 10;\n+        z-index: 1060;\n         background-color: #fafafa;\n \n         border: none;\ndiff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js\nindex 5a4d2ec69..68894a106 100644\n--- a/mockup/patterns/tinymce/js/links.js\n+++ b/mockup/patterns/tinymce/js/links.js\n@@ -347,7 +347,7 @@ define([\n \n     editor.addButton(\'unlink\', {\n       icon: \'unlink\',\n-      tooltip: \'Remove link(s)\',\n+      tooltip: \'Remove link\',\n       cmd: \'unlink\',\n       stateSelector: \'a[href]\'\n     });\n@@ -472,6 +472,8 @@ define([\n         internal: this.options.text.internal,\n         external: this.options.text.external,\n         anchor: this.options.text.anchor,\n+        anchorLabel: this.options.text.anchorLabel,\n+        target: this.options.text.target,\n         linkTypes: this.options.linkTypes,\n         externalText: this.options.text.external,\n         emailText: this.options.text.email,\ndiff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js\nindex a49dfff02..e8c27060c 100644\n--- a/mockup/patterns/tinymce/pattern.js\n+++ b/mockup/patterns/tinymce/pattern.js\n@@ -140,6 +140,8 @@ define([\n         externalText: _t(\'External URL (can be relative within this site or absolute if it starts with http:// or https://)\'),\n         email: _t(\'Email Address\'),\n         anchor: _t(\'Anchor\'),\n+        anchorLabel: _t(\'Select an anchor\'),\n+        target: _t(\'Target\'),\n         subject: _t(\'Email Subject (optional)\'),\n         image: _t(\'Image\'),\n         imageAlign: _t(\'Align\'),\ndiff --git a/mockup/patterns/tinymce/templates/image.xml b/mockup/patterns/tinymce/templates/image.xml\nindex 882cc147d..bf89d9360 100644\n--- a/mockup/patterns/tinymce/templates/image.xml\n+++ b/mockup/patterns/tinymce/templates/image.xml\n@@ -32,7 +32,7 @@\n \n       <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n       <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n-        <legend id="tinylink-uploadImage"><%- upload %></legend>\n+        <legend id="tinylink-uploadImage"><%- uploadText %></legend>\n         <div class="uploadify-me"></div>\n       </fieldset>\n       <% } %>\ndiff --git a/mockup/patterns/tinymce/templates/link.xml b/mockup/patterns/tinymce/templates/link.xml\nindex e2deff878..53ad0177f 100644\n--- a/mockup/patterns/tinymce/templates/link.xml\n+++ b/mockup/patterns/tinymce/templates/link.xml\n@@ -39,7 +39,7 @@\n \n       <% if(_.contains(linkTypes, \'email\')){ %>\n       <fieldset class="linkType email" data-linkType="email">\n-        <legend id="tinylink-email">Email</legend>\n+        <legend id="tinylink-email"><%- emailText %></legend>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label><%- emailText %></label>\n@@ -58,7 +58,7 @@\n         <legend id="tinylink-anchor"><%- anchor %></legend>\n         <div>\n           <div class="form-group main">\n-            <label>Select an anchor</label>\n+            <label><%- anchorLabel %></label>\n             <div class="input-wrapper">\n               <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n             </div>\n@@ -71,7 +71,7 @@\n \n     <div class="common-controls">\n       <div class="form-group">\n-        <label>Target</label>\n+        <label><%- target %></label>\n         <select name="target">\n           <% _.each(targetList, function(target){ %>\n             <option value="<%- target.value %>"><%- target.text %></option>\ndiff --git a/news/910.bugfix b/news/910.bugfix\nnew file mode 100644\nindex 000000000..f33a9b215\n--- /dev/null\n+++ b/news/910.bugfix\n@@ -0,0 +1,5 @@\n+tinymce pattern: Add missing translations by...\n+    - copying generateModalHtml function from master branch,\n+    - adding some backported xml changes from 71ddf6f387\n+    - adding 2 further translations (not yet in master)\n+[djowett-ftw]\ndiff --git a/news/986.bugfix b/news/986.bugfix\nnew file mode 100644\nindex 000000000..daf500a3e\n--- /dev/null\n+++ b/news/986.bugfix\n@@ -0,0 +1,5 @@\n+Fix Upload tab in TinyMCE Image showing [object Object].\n+https://github.com/plone/Products.CMFPlone/issues/3120\n+Fix folder contents "Configure display column" dialog going under toolbar.\n+https://github.com/plone/Products.CMFPlone/issues/3124\n+[vincentfretin]\ndiff --git a/yarn.lock b/yarn.lock\nindex 91e39f81d..715561ba3 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -5106,9 +5106,9 @@ underscore@1.3.3:\n   integrity sha1-R6xTaD2vgyv6lS4XdEF9pHgXrkI=\n \n underscore@>=1.4.3, underscore@>=1.5.0:\n-  version "1.10.2"\n-  resolved "https://registry.yarnpkg.com/underscore/-/underscore-1.10.2.tgz#73d6aa3668f3188e4adb0f1943bd12cfd7efaaaf"\n-  integrity sha512-N4P+Q/BuyuEKFJ43B9gYuOj4TQUHXX+j2FqguVOpjkssLUUrnJofCcBccJSCoeturDoZU6GorDTHSvUDlSQbTg==\n+  version "1.9.1"\n+  resolved "https://registry.yarnpkg.com/underscore/-/underscore-1.9.1.tgz#06dce34a0e68a7babc29b365b8e74b8925203961"\n+  integrity sha512-5/4etnCkd9c8gwgowi5/om/mYO5ajCaOgdzj/oW+0eQV9WxKBDZw5+ycmKmeaTXjInS/W0BzpGLo2xR2aBwZdg==\n \n underscore@~1.4.4:\n   version "1.4.4"\n'

