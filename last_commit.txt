Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2024-06-07T00:07:41+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.PlonePAS/commit/c03dccbea54be35c6410379db7f58ccf08ff282f

Do not test with visible_ids boolean property, as this may get removed.

See https://github.com/plone/plone.app.contenttypes/pull/693

Files changed:
A news/125.tests
M src/Products/PlonePAS/tests/test_properties.py

b'diff --git a/news/125.tests b/news/125.tests\nnew file mode 100644\nindex 00000000..3bd3285d\n--- /dev/null\n+++ b/news/125.tests\n@@ -0,0 +1,2 @@\n+Do not test with ``visible_ids`` boolean property, as this may get removed.\n+[maurits]\ndiff --git a/src/Products/PlonePAS/tests/test_properties.py b/src/Products/PlonePAS/tests/test_properties.py\nindex 37ee865c..e0e0afc0 100644\n--- a/src/Products/PlonePAS/tests/test_properties.py\n+++ b/src/Products/PlonePAS/tests/test_properties.py\n@@ -211,6 +211,10 @@ def setUp(self):\n         self.md = getToolByName(self.portal, "portal_memberdata")\n         self.gt = getToolByName(self.portal, "portal_groups")\n \n+        # All existing boolean properties might get removed at some point,\n+        # so add a new one for testing.\n+        self.md.manage_addProperty("fluffy", False, "boolean")\n+\n         # Create a new Member\n         self.mt.addMember(\n             "member1",\n@@ -273,11 +277,11 @@ def testInexactStringSearch(self):\n         self.assertEqual(results, [])\n \n     def testBooleanSearch(self):\n-        results = self.pas.searchUsers(visible_ids=True)\n+        results = self.pas.searchUsers(fluffy=True)\n         results = [info["userid"] for info in results]\n         self.assertEqual(results, [])\n \n-        results = self.pas.searchUsers(visible_ids=False)\n+        results = self.pas.searchUsers(fluffy=False)\n         results = [info["userid"] for info in results]\n         self.assertEqual(results, ["member1", "member2"])\n \n'

Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2024-06-07T05:45:44-04:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.PlonePAS/commit/f755f201651eb955865167c60f6d3d2d2d9f16af

Merge pull request #88 from plone/remove-portal-properties-tool

Do not test with visible_ids boolean property, as this may get removed.

Files changed:
A news/125.tests
M src/Products/PlonePAS/tests/test_properties.py

b'diff --git a/news/125.tests b/news/125.tests\nnew file mode 100644\nindex 00000000..3bd3285d\n--- /dev/null\n+++ b/news/125.tests\n@@ -0,0 +1,2 @@\n+Do not test with ``visible_ids`` boolean property, as this may get removed.\n+[maurits]\ndiff --git a/src/Products/PlonePAS/tests/test_properties.py b/src/Products/PlonePAS/tests/test_properties.py\nindex 37ee865c..e0e0afc0 100644\n--- a/src/Products/PlonePAS/tests/test_properties.py\n+++ b/src/Products/PlonePAS/tests/test_properties.py\n@@ -211,6 +211,10 @@ def setUp(self):\n         self.md = getToolByName(self.portal, "portal_memberdata")\n         self.gt = getToolByName(self.portal, "portal_groups")\n \n+        # All existing boolean properties might get removed at some point,\n+        # so add a new one for testing.\n+        self.md.manage_addProperty("fluffy", False, "boolean")\n+\n         # Create a new Member\n         self.mt.addMember(\n             "member1",\n@@ -273,11 +277,11 @@ def testInexactStringSearch(self):\n         self.assertEqual(results, [])\n \n     def testBooleanSearch(self):\n-        results = self.pas.searchUsers(visible_ids=True)\n+        results = self.pas.searchUsers(fluffy=True)\n         results = [info["userid"] for info in results]\n         self.assertEqual(results, [])\n \n-        results = self.pas.searchUsers(visible_ids=False)\n+        results = self.pas.searchUsers(fluffy=False)\n         results = [info["userid"] for info in results]\n         self.assertEqual(results, ["member1", "member2"])\n \n'

