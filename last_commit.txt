Repository: Products.LinguaPlone


Branch: refs/heads/master
Date: 2017-06-26T12:19:38+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.LinguaPlone/commit/aa8839e644b437ad3afcd54bc72e132fcb3e58f5

Do not uninstall by hand when running the uninstall-step since uninstalling already uninstalls

Files changed:
M CHANGES.rst
M Products/LinguaPlone/setuphandlers.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex ae1452a..b643f28 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Do not uninstall by hand when running the uninstall-step since uninstalling already uninstalls.\n+  [pbauer]\n \n \n 4.2.1 (2017-04-03)\ndiff --git a/Products/LinguaPlone/setuphandlers.py b/Products/LinguaPlone/setuphandlers.py\nindex 28342c7..99a3565 100644\n--- a/Products/LinguaPlone/setuphandlers.py\n+++ b/Products/LinguaPlone/setuphandlers.py\n@@ -29,15 +29,5 @@ def importReindexLanguageIndex(context):\n def uninstall(context):\n     if context.readDataFile("linguaplone-uninstall.txt") is None:\n         return\n-    site = context.getSite()\n     logger = context.getLogger(\'LinguaPlone\')\n-    qi = getToolByName(site, \'portal_quickinstaller\')\n-    try:\n-        qi.uninstallProducts(products=[\'LinguaPlone\'])\n-    except AttributeError:\n-        # Already uninstalled. Don\'t fail.\n-        pass\n-    o = qi._getOb(\'LinguaPlone\', None)\n-    if o:\n-        assert(not o.isInstalled())\n-    logger.info(\'Uninstalled LinguaPlone from portal_quickinstaller.\')\n+    logger.info(\'Uninstalled LinguaPlone.\')\n'

Repository: Products.LinguaPlone


Branch: refs/heads/master
Date: 2020-09-10T14:45:40+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.LinguaPlone/commit/7bea2d97ec52481b22dd4774396f937917b72108

Merge pull request #28 from plone/fix_uninstall

Do not uninstall by hand when running the uninstall-step since uninstâ€¦

Files changed:
M CHANGES.rst
M Products/LinguaPlone/setuphandlers.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 1902668..11f1824 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Do not uninstall by hand when running the uninstall-step since uninstalling already uninstalls.\n+  [pbauer]\n \n \n 4.3.0 (2018-02-23)\ndiff --git a/Products/LinguaPlone/setuphandlers.py b/Products/LinguaPlone/setuphandlers.py\nindex 28342c7..99a3565 100644\n--- a/Products/LinguaPlone/setuphandlers.py\n+++ b/Products/LinguaPlone/setuphandlers.py\n@@ -29,15 +29,5 @@ def importReindexLanguageIndex(context):\n def uninstall(context):\n     if context.readDataFile("linguaplone-uninstall.txt") is None:\n         return\n-    site = context.getSite()\n     logger = context.getLogger(\'LinguaPlone\')\n-    qi = getToolByName(site, \'portal_quickinstaller\')\n-    try:\n-        qi.uninstallProducts(products=[\'LinguaPlone\'])\n-    except AttributeError:\n-        # Already uninstalled. Don\'t fail.\n-        pass\n-    o = qi._getOb(\'LinguaPlone\', None)\n-    if o:\n-        assert(not o.isInstalled())\n-    logger.info(\'Uninstalled LinguaPlone from portal_quickinstaller.\')\n+    logger.info(\'Uninstalled LinguaPlone.\')\n'

