Repository: Products.Archetypes


Branch: refs/heads/1.9.x
Date: 2020-06-24T12:30:49+02:00
Author: Valtteri Karppinen (vkarppinen) <karppinenvaltteri@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/1ff51af03b17a6ef643260adbd3b28d0c79d0dad

Support jquery &gt; 1.6; enable adding text over max limit

Files changed:
A news/93.bugfix
M Products/Archetypes/skins/archetypes/widgets/js/textcount.js

b'diff --git a/Products/Archetypes/skins/archetypes/widgets/js/textcount.js b/Products/Archetypes/skins/archetypes/widgets/js/textcount.js\nindex ab95352a..b09ff827 100644\n--- a/Products/Archetypes/skins/archetypes/widgets/js/textcount.js\n+++ b/Products/Archetypes/skins/archetypes/widgets/js/textcount.js\n@@ -1,12 +1,15 @@\n-<!-- Original:  Ronnie T. Moore -->\n-<!-- Dynamic \'fix\' by: Nannette Thacker -->\n+// Original:  Ronnie T. Moore\n+// Dynamic \'fix\' by: Nannette Thacker\n function textCounter(field, countfield, maxlimit) {\n-  var fieldval = $(field).attr(\'value\');\n+  var fieldval = jQuery(field).val();\n+  var counterElem = jQuery(\'input[name="\' + countfield + \'"]\');\n   if (fieldval.length > maxlimit) {\n-      // if too long...trim it!\n-      $(field).attr(\'value\',  fieldval.substring(0, maxlimit));\n-      alert( \'This field is limited to \' + maxlimit + \' characters in length.\' );\n+    // if too long...trim it!\n+    jQuery(field).val(fieldval.substring(0, maxlimit));\n+    counterElem.css(\'border-color\', \'red\');\n+  } else {\n+    counterElem.css(\'border-color\', \'#ccc\');\n   }\n   // update \'characters left\' counter\n-  $(\'input[name="\' + countfield + \'"]\').attr(\'value\', Math.max(maxlimit - fieldval.length, 0));\n+  counterElem.val(Math.max(maxlimit - fieldval.length, 0));\n }\ndiff --git a/news/93.bugfix b/news/93.bugfix\nnew file mode 100644\nindex 00000000..af3478ce\n--- /dev/null\n+++ b/news/93.bugfix\n@@ -0,0 +1,5 @@\n+textcount.js support for jquery>1.6.\n+\n+make it impossible to enter text longer than ``maxlimit``\n+by replacing ``maxlimit alert()`` with highlighting textcountfield.\n+[vkarppinen]\n'

Repository: Products.Archetypes


Branch: refs/heads/1.9.x
Date: 2020-06-25T11:30:48+02:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.Archetypes/commit/c55ca9832bf5ed1cce15f6118fc29fc16679affe

Preparing release 1.9.21

Files changed:
M CHANGES.rst
M setup.py
D news/93.bugfix

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex fdb831af..003bdb04 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -8,6 +8,19 @@ Changelog\n \n .. towncrier release notes start\n \n+1.9.21 (2020-06-25)\n+-------------------\n+\n+Bug fixes:\n+\n+\n+- textcount.js support for jquery>1.6.\n+\n+  make it impossible to enter text longer than ``maxlimit``\n+  by replacing ``maxlimit alert()`` with highlighting textcountfield.\n+  [vkarppinen] (#93)\n+\n+\n 1.9.20 (2019-05-21)\n -------------------\n \ndiff --git a/news/93.bugfix b/news/93.bugfix\ndeleted file mode 100644\nindex af3478ce..00000000\n--- a/news/93.bugfix\n+++ /dev/null\n@@ -1,5 +0,0 @@\n-textcount.js support for jquery>1.6.\n-\n-make it impossible to enter text longer than ``maxlimit``\n-by replacing ``maxlimit alert()`` with highlighting textcountfield.\n-[vkarppinen]\ndiff --git a/setup.py b/setup.py\nindex 4024a426..7f5a5500 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,6 +1,6 @@\n from setuptools import setup, find_packages\n \n-version = '1.9.21.dev0'\n+version = '1.9.21'\n \n setup(name='Products.Archetypes',\n       version=version,\n"

Repository: Products.Archetypes


Branch: refs/heads/1.9.x
Date: 2020-06-25T11:31:18+02:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.Archetypes/commit/9dbe1448e80aad4688d4a972c1517089288705ef

Back to development: 1.9.22

Files changed:
M setup.py

b"diff --git a/setup.py b/setup.py\nindex 7f5a5500..7fc87c7b 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,6 +1,6 @@\n from setuptools import setup, find_packages\n \n-version = '1.9.21'\n+version = '1.9.22.dev0'\n \n setup(name='Products.Archetypes',\n       version=version,\n"

