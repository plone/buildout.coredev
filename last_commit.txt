Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2020-09-28T14:49:08+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFFormController/commit/72b57cf3daf8724d29e9d7a085c44cdd7ad04bc3

Tests: set request method to POST in a way that works on Plone 6 as well.

Files changed:
A news/3057.bugfix
M Products/CMFFormController/tests/testRedirectTo.py

b'diff --git a/Products/CMFFormController/tests/testRedirectTo.py b/Products/CMFFormController/tests/testRedirectTo.py\nindex 4424014..35a9628 100644\n--- a/Products/CMFFormController/tests/testRedirectTo.py\n+++ b/Products/CMFFormController/tests/testRedirectTo.py\n@@ -7,8 +7,8 @@\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.testing.zope import Browser\n from plone.protect import createToken\n-from plone.testing.z2 import Browser\n \n import transaction\n import unittest\n@@ -98,6 +98,7 @@ def test_attacker_redirect(self):\n \n         # The same without the testbrowser\n         self.assertIsNone(self.request.response.headers.get(\'location\'))\n+        self.request.environ["REQUEST_METHOD"] = "POST"\n         self.request.REQUEST_METHOD = \'POST\'\n         self.request.form[\'workflow_action\'] = \'publish\'\n         self.request.form[\'paths\'] = path\ndiff --git a/news/3057.bugfix b/news/3057.bugfix\nnew file mode 100644\nindex 0000000..3f3971f\n--- /dev/null\n+++ b/news/3057.bugfix\n@@ -0,0 +1,2 @@\n+Tests: set request method to POST in a way that works on Plone 6 as well.\n+[maurits]\n'

Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2020-09-28T18:06:16+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFFormController/commit/a3b0b67bd323225177887d244afef3ce7b7aba0d

Merge pull request #26 from plone/maurits/folder_publish

Tests: set request method to POST in a way that works on Plone 6 too

Files changed:
A news/3057.bugfix
M Products/CMFFormController/tests/testRedirectTo.py

b'diff --git a/Products/CMFFormController/tests/testRedirectTo.py b/Products/CMFFormController/tests/testRedirectTo.py\nindex 4424014..35a9628 100644\n--- a/Products/CMFFormController/tests/testRedirectTo.py\n+++ b/Products/CMFFormController/tests/testRedirectTo.py\n@@ -7,8 +7,8 @@\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.testing.zope import Browser\n from plone.protect import createToken\n-from plone.testing.z2 import Browser\n \n import transaction\n import unittest\n@@ -98,6 +98,7 @@ def test_attacker_redirect(self):\n \n         # The same without the testbrowser\n         self.assertIsNone(self.request.response.headers.get(\'location\'))\n+        self.request.environ["REQUEST_METHOD"] = "POST"\n         self.request.REQUEST_METHOD = \'POST\'\n         self.request.form[\'workflow_action\'] = \'publish\'\n         self.request.form[\'paths\'] = path\ndiff --git a/news/3057.bugfix b/news/3057.bugfix\nnew file mode 100644\nindex 0000000..3f3971f\n--- /dev/null\n+++ b/news/3057.bugfix\n@@ -0,0 +1,2 @@\n+Tests: set request method to POST in a way that works on Plone 6 as well.\n+[maurits]\n'

