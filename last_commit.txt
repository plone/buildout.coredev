Repository: mockup


Branch: refs/heads/2.7.x
Date: 2020-04-29T19:51:06+02:00
Author: Daniel Jowett (djowett-ftw) <54800639+djowett-ftw@users.noreply.github.com>
Commit: https://github.com/plone/mockup/commit/5107fd7f5aef461c8e6446addfe74a488aaf71cb

Backport lost tinymce translations (#930)

* Restore translations of 'Remove link'

* Add missing translationa in tinymce pattern by...

    copying generateModalHtml function from master branch,
    also some backported xml changes from 71ddf6f387

* Add 2 further missing translations in tinymce pattern

Files changed:
A news/910.bugfix
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tinymce/templates/image.xml
M mockup/patterns/tinymce/templates/link.xml

b'diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js\nindex 91fa49a06..494a1c076 100644\n--- a/mockup/patterns/tinymce/js/links.js\n+++ b/mockup/patterns/tinymce/js/links.js\n@@ -347,7 +347,7 @@ define([\n \n     editor.addButton(\'unlink\', {\n       icon: \'unlink\',\n-      tooltip: \'Remove link(s)\',\n+      tooltip: \'Remove link\',\n       cmd: \'unlink\',\n       stateSelector: \'a[href]\'\n     });\n@@ -466,13 +466,23 @@ define([\n         upload: this.options.upload,\n         text: this.options.text,\n         insertHeading: this.options.text.insertHeading,\n+        insertImageHelp: this.options.text.insertImageHelp,\n+        uploadText: this.options.text.upload,\n+        insertLinkHelp: this.options.text.insertLinkHelp,\n+        internal: this.options.text.internal,\n+        external: this.options.text.external,\n+        anchor: this.options.text.anchor,\n+        anchorLabel: this.options.text.anchorLabel,\n+        target: this.options.text.target,\n         linkTypes: this.options.linkTypes,\n         externalText: this.options.text.external,\n         emailText: this.options.text.email,\n         subjectText: this.options.text.subject,\n         targetList: this.options.targetList,\n         titleText: this.options.text.title,\n-        externalImageText: this.options.text.externalImage,\n+        internalImageText: this.options.text.internalImage,\n+        externalImage: this.options.text.externalImage,\n+        externalImageText: this.options.text.externalImageText,\n         altText: this.options.text.alt,\n         imageAlignText: this.options.text.imageAlign,\n         scaleText: this.options.text.scale,\ndiff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js\nindex e942d81ef..d2a1deaf3 100644\n--- a/mockup/patterns/tinymce/pattern.js\n+++ b/mockup/patterns/tinymce/pattern.js\n@@ -136,15 +136,23 @@ define([\n         insertHeading: _t(\'Insert link\'),\n         title: _t(\'Title\'),\n         internal: _t(\'Internal\'),\n-        external: _t(\'External URL (can be relative within this site or absolute if it starts with http:// or https://)\'),\n+        external: _t(\'External\'),\n+        externalText: _t(\'External URL (can be relative within this site or absolute if it starts with http:// or https://)\'),\n         email: _t(\'Email Address\'),\n         anchor: _t(\'Anchor\'),\n+        anchorLabel: _t(\'Select an anchor\'),\n+        target: _t(\'Target\'),\n         subject: _t(\'Email Subject (optional)\'),\n         image: _t(\'Image\'),\n         imageAlign: _t(\'Align\'),\n         scale: _t(\'Size\'),\n         alt: _t(\'Alternative Text\'),\n-        externalImage: _t(\'External Image URL (can be relative within this site or absolute if it starts with http:// or https://)\')\n+        insertImageHelp: _t(\'Specify an image. It can be on this site already (Internal Image), an image you upload (Upload), or from an external site (External Image).\'),\n+        internalImage: _t(\'Internal Image\'),\n+        externalImage: _t(\'External Image\'),\n+        externalImageText: _t(\'External Image URL (can be relative within this site or absolute if it starts with http:// or https://)\'),\n+        upload: _t(\'Upload\'),\n+        insertLinkHelp: _t(\'Specify the object to link to. It can be on this site already (Internal), an object you upload (Upload), from an external site (External), an email address (Email), or an anchor on this page (Anchor).\'),\n       },\n       // URL generation options\n       loadingBaseUrl: \'../../../bower_components/tinymce-builded/js/tinymce/\',\n@@ -165,9 +173,10 @@ define([\n         {title: \'Large\', value: \'large\'}\n       ],\n       imageClasses: {\n-        \'image-inline\': \'Inline\',\n-        \'image-right\': \'Right\',\n-        \'image-left\': \'Left\'\n+        \'image-inline\': _t(\'Inline\'),\n+        \'image-right\': _t(\'Right\'),\n+        \'image-left\': _t(\'Left\'),\n+        \'image-responsive\': _t(\'Responsive\')\n       },\n       targetList: [\n         {text: _t(\'Open in this window / frame\'), value: \'\'},\ndiff --git a/mockup/patterns/tinymce/templates/image.xml b/mockup/patterns/tinymce/templates/image.xml\nindex 90b45c4cd..96e4d56a8 100644\n--- a/mockup/patterns/tinymce/templates/image.xml\n+++ b/mockup/patterns/tinymce/templates/image.xml\n@@ -2,7 +2,7 @@\n   <div class="linkModal">\n     <h1><%- insertHeading %></h1>\n     <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n-    <p class="info">Specify an image. It can be on this site already ("Internal Image"), an image you upload ("Upload"), or from an external site ("External Image").</p>\n+    <p class="info"><%- insertImageHelp %></p>\n     <% } %>\n \n     <div class="linkTypes pat-autotoc autotabs"\n@@ -10,7 +10,7 @@\n \n         <% if(_.contains(linkTypes, \'image\')){ %>\n       <fieldset class="linkType image" data-linkType="image">\n-        <legend id="tinylink-image">Internal Image</legend>\n+        <legend id="tinylink-image"><%- internalImageText %></legend>\n         <div class="form-inline">\n           <div class="form-group main">\n             <input type="text" name="image" />\n@@ -32,14 +32,14 @@\n \n       <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n       <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n-        <legend id="tinylink-uploadImage">Upload</legend>\n+        <legend id="tinylink-uploadImage"><%- uploadText %></legend>\n         <div class="uploadify-me"></div>\n       </fieldset>\n       <% } %>\n \n       <% if(_.contains(linkTypes, \'externalImage\')){ %>\n       <fieldset class="linkType externalImage" data-linkType="externalImage">\n-        <legend id="tinylink-externalImage">External Image</legend>\n+        <legend id="tinylink-externalImage"><%- externalImage %></legend>\n         <div>\n           <div class="form-group main">\n             <label><%- externalImageText %></label>\ndiff --git a/mockup/patterns/tinymce/templates/link.xml b/mockup/patterns/tinymce/templates/link.xml\nindex b8a686c88..b77616513 100644\n--- a/mockup/patterns/tinymce/templates/link.xml\n+++ b/mockup/patterns/tinymce/templates/link.xml\n@@ -2,14 +2,14 @@\n   <div class="linkModal">\n     <h1><%- insertHeading %></h1>\n     <% if(upload){ %>\n-    <p class="info">Specify the object to link to. It can be on this site already ("Internal"), an object you upload ("Upload"), from an external site ("External"), an email address ("Email"), or an anchor on this page ("Anchor").</p>\n+    <p class="info"><%- insertLinkHelp %></p>\n     <% } %>\n \n     <div class="linkTypes pat-autotoc autotabs"\n          data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n \n       <fieldset class="linkType internal" data-linkType="internal">\n-        <legend id="tinylink-internal">Internal</legend>\n+        <legend id="tinylink-internal"><%- internal %></legend>\n         <div>\n           <div class="form-group main">\n             <!-- this gives the name to the "linkType" -->\n@@ -20,13 +20,13 @@\n \n       <% if(upload){ %>\n       <fieldset class="linkType upload" data-linkType="upload">\n-        <legend id="tinylink-upload">Upload</legend>\n+        <legend id="tinylink-upload"><%- uploadText %></legend>\n         <div class="uploadify-me"></div>\n       </fieldset>\n       <% } %>\n \n       <fieldset class="linkType external" data-linkType="external">\n-        <legend id="tinylink-external">External</legend>\n+        <legend id="tinylink-external"><%- external %></legend>\n         <div class="form-group main">\n           <label for="external"><%- externalText %></label>\n           <input type="text" name="external" />\n@@ -34,7 +34,7 @@\n       </fieldset>\n \n       <fieldset class="linkType email" data-linkType="email">\n-        <legend id="tinylink-email">Email</legend>\n+        <legend id="tinylink-email"><%- emailText %></legend>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label><%- emailText %></label>\n@@ -48,10 +48,10 @@\n       </fieldset>\n \n       <fieldset class="linkType anchor" data-linkType="anchor">\n-        <legend id="tinylink-anchor">Anchor</legend>\n+        <legend id="tinylink-anchor"><%- anchor %></legend>\n         <div>\n           <div class="form-group main">\n-            <label>Select an anchor</label>\n+            <label><%- anchorLabel %></label>\n             <div class="input-wrapper">\n               <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n             </div>\n@@ -63,7 +63,7 @@\n \n     <div class="common-controls">\n       <div class="form-group">\n-        <label>Target</label>\n+        <label><%- target %></label>\n         <select name="target">\n           <% _.each(targetList, function(target){ %>\n             <option value="<%- target.value %>"><%- target.text %></option>\ndiff --git a/news/910.bugfix b/news/910.bugfix\nnew file mode 100644\nindex 000000000..f33a9b215\n--- /dev/null\n+++ b/news/910.bugfix\n@@ -0,0 +1,5 @@\n+tinymce pattern: Add missing translations by...\n+    - copying generateModalHtml function from master branch,\n+    - adding some backported xml changes from 71ddf6f387\n+    - adding 2 further translations (not yet in master)\n+[djowett-ftw]\n'

