Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-06-11T12:26:31+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/01dab6e6d4eecf56f0e5b8739bf9255015517395

Fixed saving ignored exception types in Python 3.

Fixes https://github.com/plone/Products.CMFPlone/issues/3115

Files changed:
A news/3115.bugfix
M Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py

b"diff --git a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\nindex ab5cbf4ac4..b321accd8e 100644\n--- a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\n+++ b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\n@@ -8,9 +8,11 @@\n ##title=\n \n from Products.CMFPlone import PloneMessageFactory as _\n+from Products.CMFPlone.utils import safe_nativestring\n \n request = context.REQUEST\n \n+ignored_exceptions = map(safe_nativestring, ignored_exceptions)\n context.error_log.setProperties(keep_entries, copy_to_zlog, ignored_exceptions)\n context.plone_utils.addPortalMessage(_(u'Changes made.'))\n \ndiff --git a/news/3115.bugfix b/news/3115.bugfix\nnew file mode 100644\nindex 0000000000..db971854f2\n--- /dev/null\n+++ b/news/3115.bugfix\n@@ -0,0 +1 @@\n+Fixed saving ignored exception types in Python 3.  [maurits]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-06-11T20:32:48+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/5a977a3b06c9ce46a271ccb17bf2506fb0442b01

Merge pull request #3116 from plone/maurits/issue-3115-error-log-bytes

Fixed saving ignored exception types in Python 3.

Files changed:
A news/3115.bugfix
M Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py

b"diff --git a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\nindex ab5cbf4ac4..b321accd8e 100644\n--- a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\n+++ b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_setProperties.py\n@@ -8,9 +8,11 @@\n ##title=\n \n from Products.CMFPlone import PloneMessageFactory as _\n+from Products.CMFPlone.utils import safe_nativestring\n \n request = context.REQUEST\n \n+ignored_exceptions = map(safe_nativestring, ignored_exceptions)\n context.error_log.setProperties(keep_entries, copy_to_zlog, ignored_exceptions)\n context.plone_utils.addPortalMessage(_(u'Changes made.'))\n \ndiff --git a/news/3115.bugfix b/news/3115.bugfix\nnew file mode 100644\nindex 0000000000..db971854f2\n--- /dev/null\n+++ b/news/3115.bugfix\n@@ -0,0 +1 @@\n+Fixed saving ignored exception types in Python 3.  [maurits]\n"

