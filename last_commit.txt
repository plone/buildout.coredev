Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2020-05-26T15:38:18+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/7cc37906a65bc1e99f3e9db420b2adf63026e972

Upgrade steps for HTMLFilter defaults

Files changed:
A news/233.bugfix
A plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml
M plone/app/upgrade/v51/profiles/to_517/registry.xml
M plone/app/upgrade/v60/profiles/to_alpha1/registry.xml

b'diff --git a/news/233.bugfix b/news/233.bugfix\nnew file mode 100644\nindex 00000000..04423370\n--- /dev/null\n+++ b/news/233.bugfix\n@@ -0,0 +1,2 @@\n+add upgrade steps for HTMLFilter defaults.\n+[petschki]\ndiff --git a/plone/app/upgrade/v51/profiles/to_517/registry.xml b/plone/app/upgrade/v51/profiles/to_517/registry.xml\nindex 1156921b..ba67afbb 100644\n--- a/plone/app/upgrade/v51/profiles/to_517/registry.xml\n+++ b/plone/app/upgrade/v51/profiles/to_517/registry.xml\n@@ -5,4 +5,13 @@\n       <element>Collection</element>\n     </value>\n   </records>\n-</registry>\n\\ No newline at end of file\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml b/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml\nnew file mode 100644\nindex 00000000..4cc8e641\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml\n@@ -0,0 +1,11 @@\n+<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n+<registry>\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml b/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\nindex a9dd5cff..e76da90c 100644\n--- a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\n+++ b/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\n@@ -1,4 +1,20 @@\n <?xml version="1.0"?>\n <registry>\n-    <records interface="plone.app.theming.interfaces.IThemeSettings" />\n+  <records interface="plone.app.theming.interfaces.IThemeSettings" />\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema" prefix="plone">\n+    <value key="default_page_types" purge="false">\n+      <element>Collection</element>\n+    </value>\n+  </records>\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+\n </registry>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2020-05-27T07:57:02+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/f42a09f47173aff76b338ba18ae9fff0dda3b207

Merge pull request #234 from plone/petschk/htmlfilter-upgradesteps

Upgrade steps for HTMLFilter defaults

Files changed:
A news/233.bugfix
A plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml
M plone/app/upgrade/v51/profiles/to_517/registry.xml
M plone/app/upgrade/v60/profiles/to_alpha1/registry.xml

b'diff --git a/news/233.bugfix b/news/233.bugfix\nnew file mode 100644\nindex 00000000..04423370\n--- /dev/null\n+++ b/news/233.bugfix\n@@ -0,0 +1,2 @@\n+add upgrade steps for HTMLFilter defaults.\n+[petschki]\ndiff --git a/plone/app/upgrade/v51/profiles/to_517/registry.xml b/plone/app/upgrade/v51/profiles/to_517/registry.xml\nindex 1156921b..ba67afbb 100644\n--- a/plone/app/upgrade/v51/profiles/to_517/registry.xml\n+++ b/plone/app/upgrade/v51/profiles/to_517/registry.xml\n@@ -5,4 +5,13 @@\n       <element>Collection</element>\n     </value>\n   </records>\n-</registry>\n\\ No newline at end of file\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml b/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml\nnew file mode 100644\nindex 00000000..4cc8e641\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_522/registry/controlpanel.xml\n@@ -0,0 +1,11 @@\n+<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n+<registry>\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml b/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\nindex a9dd5cff..e76da90c 100644\n--- a/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\n+++ b/plone/app/upgrade/v60/profiles/to_alpha1/registry.xml\n@@ -1,4 +1,20 @@\n <?xml version="1.0"?>\n <registry>\n-    <records interface="plone.app.theming.interfaces.IThemeSettings" />\n+  <records interface="plone.app.theming.interfaces.IThemeSettings" />\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema" prefix="plone">\n+    <value key="default_page_types" purge="false">\n+      <element>Collection</element>\n+    </value>\n+  </records>\n+\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.IFilterSchema" prefix="plone">\n+    <value key="valid_tags" purge="false">\n+      <element>hr</element>\n+    </value>\n+    <value key="custom_attributes" purge="false">\n+      <element>style</element>\n+    </value>\n+  </records>\n+\n </registry>\n'

