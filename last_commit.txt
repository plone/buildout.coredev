Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2021-02-24T17:06:26+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/16dcd63b2bb8552731f12b2b43086845b6cdb150

Fixed tests in combination with Products.PluggableAuthService 2.6.0.

Files changed:
A news/3251.bugfix
M Products/CMFPlone/tests/testCookieAuth.py

b"diff --git a/Products/CMFPlone/tests/testCookieAuth.py b/Products/CMFPlone/tests/testCookieAuth.py\nindex 9ae8ae1810..3469d9a077 100644\n--- a/Products/CMFPlone/tests/testCookieAuth.py\n+++ b/Products/CMFPlone/tests/testCookieAuth.py\n@@ -32,7 +32,7 @@ def testAutoLoginPage(self):\n         self.assertIn('200', self.browser.headers['status'])\n         self.assertEqual(\n             self.browser.url,\n-            'http://nohost/plone/login?came_from=http%3A//nohost/plone/test-folder'  # noqa: E501\n+            'http://nohost/plone/login?came_from=/plone/test-folder'  # noqa: E501\n         )\n \n     def testInsufficientPrivileges(self):\n@@ -43,7 +43,7 @@ def testInsufficientPrivileges(self):\n         self.assertIn('200', self.browser.headers['status'])\n         self.assertEqual(\n             self.browser.url,\n-            'http://nohost/plone/login?came_from=http%3A//nohost/plone/test-folder'  # noqa: E501\n+            'http://nohost/plone/login?came_from=/plone/test-folder'  # noqa: E501\n         )\n \n     def testSetSessionCookie(self):\ndiff --git a/news/3251.bugfix b/news/3251.bugfix\nnew file mode 100644\nindex 0000000000..5240287ecf\n--- /dev/null\n+++ b/news/3251.bugfix\n@@ -0,0 +1,2 @@\n+Fixed tests in combination with Products.PluggableAuthService 2.6.0.\n+[maurits]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2021-02-24T17:07:16+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/4b717d38b84b231fa17f6662dca2ce433ff1f7e4

Merge pull request #3251 from plone/maurits/fix-tests-pas-260

Fix tests in combination with Products.PluggableAuthService 2.6.0. [5.2]

Files changed:
A news/3251.bugfix
M Products/CMFPlone/tests/testCookieAuth.py

b"diff --git a/Products/CMFPlone/tests/testCookieAuth.py b/Products/CMFPlone/tests/testCookieAuth.py\nindex 9ae8ae1810..3469d9a077 100644\n--- a/Products/CMFPlone/tests/testCookieAuth.py\n+++ b/Products/CMFPlone/tests/testCookieAuth.py\n@@ -32,7 +32,7 @@ def testAutoLoginPage(self):\n         self.assertIn('200', self.browser.headers['status'])\n         self.assertEqual(\n             self.browser.url,\n-            'http://nohost/plone/login?came_from=http%3A//nohost/plone/test-folder'  # noqa: E501\n+            'http://nohost/plone/login?came_from=/plone/test-folder'  # noqa: E501\n         )\n \n     def testInsufficientPrivileges(self):\n@@ -43,7 +43,7 @@ def testInsufficientPrivileges(self):\n         self.assertIn('200', self.browser.headers['status'])\n         self.assertEqual(\n             self.browser.url,\n-            'http://nohost/plone/login?came_from=http%3A//nohost/plone/test-folder'  # noqa: E501\n+            'http://nohost/plone/login?came_from=/plone/test-folder'  # noqa: E501\n         )\n \n     def testSetSessionCookie(self):\ndiff --git a/news/3251.bugfix b/news/3251.bugfix\nnew file mode 100644\nindex 0000000000..5240287ecf\n--- /dev/null\n+++ b/news/3251.bugfix\n@@ -0,0 +1,2 @@\n+Fixed tests in combination with Products.PluggableAuthService 2.6.0.\n+[maurits]\n"

