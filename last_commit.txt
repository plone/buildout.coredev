Repository: plone.app.layout


Branch: refs/heads/master
Date: 2024-06-15T23:23:09+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.layout/commit/6e5c2f895529551ef26f4a6f7015d878d2a0f568

Remove `portal_properties` code.  Remove `plone_tools.properties`.

Files changed:
A news/125.breaking
M plone/app/layout/globals/interfaces.py
M plone/app/layout/globals/tests/test_tools.py
M plone/app/layout/globals/tools.py
M plone/app/layout/sitemap/tests/test_sitemap.py
M setup.py

b'diff --git a/news/125.breaking b/news/125.breaking\nnew file mode 100644\nindex 00000000..0c448eac\n--- /dev/null\n+++ b/news/125.breaking\n@@ -0,0 +1,2 @@\n+Remove `portal_properties` code.  Remove `plone_tools.properties`.\n+[maurits]\ndiff --git a/plone/app/layout/globals/interfaces.py b/plone/app/layout/globals/interfaces.py\nindex 1e9f1ae9..87a48416 100644\n--- a/plone/app/layout/globals/interfaces.py\n+++ b/plone/app/layout/globals/interfaces.py\n@@ -75,9 +75,6 @@ def catalog():\n     def membership():\n         """The portal_membership tool"""\n \n-    def properties():\n-        """The portal_properties tool"""\n-\n     def types():\n         """The portal_types tool"""\n \ndiff --git a/plone/app/layout/globals/tests/test_tools.py b/plone/app/layout/globals/tests/test_tools.py\nindex f35b4481..aeb464b2 100644\n--- a/plone/app/layout/globals/tests/test_tools.py\n+++ b/plone/app/layout/globals/tests/test_tools.py\n@@ -29,11 +29,6 @@ def test_membership(self):\n             self.view.membership(), getToolByName(self.folder, "portal_membership")\n         )\n \n-    def test_properties(self):\n-        self.assertEqual(\n-            self.view.properties(), getToolByName(self.folder, "portal_properties")\n-        )\n-\n     def test_types(self):\n         self.assertEqual(self.view.types(), getToolByName(self.folder, "portal_types"))\n \ndiff --git a/plone/app/layout/globals/tools.py b/plone/app/layout/globals/tools.py\nindex fd04b816..11baac07 100644\n--- a/plone/app/layout/globals/tools.py\n+++ b/plone/app/layout/globals/tools.py\n@@ -21,10 +21,6 @@ def catalog(self):\n     def membership(self):\n         return getToolByName(self.context, "portal_membership")\n \n-    @memoize_contextless\n-    def properties(self):\n-        return getToolByName(self.context, "portal_properties")\n-\n     @memoize_contextless\n     def url(self):\n         return getToolByName(self.context, "portal_url")\ndiff --git a/plone/app/layout/sitemap/tests/test_sitemap.py b/plone/app/layout/sitemap/tests/test_sitemap.py\nindex 0c8e868d..b3c4533b 100644\n--- a/plone/app/layout/sitemap/tests/test_sitemap.py\n+++ b/plone/app/layout/sitemap/tests/test_sitemap.py\n@@ -44,10 +44,6 @@ def setUp(self):\n         # wftool._default_chain == \'plone_workflow\'\n         self.wftool.setChainForPortalTypes(["Document"], "simple_publication_workflow")\n \n-        self.site_properties = getToolByName(\n-            self.portal, "portal_properties"\n-        ).site_properties\n-\n         # setup private content that isn\'t accessible for anonymous\n         setRoles(self.portal, TEST_USER_ID, ["Manager"])\n         self.portal.invokeFactory(id="private", type_name="Document")\ndiff --git a/setup.py b/setup.py\nindex 9a8ab870..363a11b7 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -3,7 +3,7 @@\n from setuptools import setup\n \n \n-version = "4.1.2.dev0"\n+version = "5.0.0.dev0"\n \n long_description = (\n     f"{Path(\'README.rst\').read_text()}\\n{Path(\'CHANGES.rst\').read_text()}"\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2024-06-16T09:50:24+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/f79940557679c15ec2a42bc119af5fa3a40256cc

Merge pull request #371 from plone/remove-portal_properties

Remove `portal_properties` code.  Remove `plone_tools.properties`.

Files changed:
A news/125.breaking
M plone/app/layout/globals/interfaces.py
M plone/app/layout/globals/tests/test_tools.py
M plone/app/layout/globals/tools.py
M plone/app/layout/sitemap/tests/test_sitemap.py
M setup.py

b'diff --git a/news/125.breaking b/news/125.breaking\nnew file mode 100644\nindex 00000000..0c448eac\n--- /dev/null\n+++ b/news/125.breaking\n@@ -0,0 +1,2 @@\n+Remove `portal_properties` code.  Remove `plone_tools.properties`.\n+[maurits]\ndiff --git a/plone/app/layout/globals/interfaces.py b/plone/app/layout/globals/interfaces.py\nindex 1e9f1ae9..87a48416 100644\n--- a/plone/app/layout/globals/interfaces.py\n+++ b/plone/app/layout/globals/interfaces.py\n@@ -75,9 +75,6 @@ def catalog():\n     def membership():\n         """The portal_membership tool"""\n \n-    def properties():\n-        """The portal_properties tool"""\n-\n     def types():\n         """The portal_types tool"""\n \ndiff --git a/plone/app/layout/globals/tests/test_tools.py b/plone/app/layout/globals/tests/test_tools.py\nindex f35b4481..aeb464b2 100644\n--- a/plone/app/layout/globals/tests/test_tools.py\n+++ b/plone/app/layout/globals/tests/test_tools.py\n@@ -29,11 +29,6 @@ def test_membership(self):\n             self.view.membership(), getToolByName(self.folder, "portal_membership")\n         )\n \n-    def test_properties(self):\n-        self.assertEqual(\n-            self.view.properties(), getToolByName(self.folder, "portal_properties")\n-        )\n-\n     def test_types(self):\n         self.assertEqual(self.view.types(), getToolByName(self.folder, "portal_types"))\n \ndiff --git a/plone/app/layout/globals/tools.py b/plone/app/layout/globals/tools.py\nindex fd04b816..11baac07 100644\n--- a/plone/app/layout/globals/tools.py\n+++ b/plone/app/layout/globals/tools.py\n@@ -21,10 +21,6 @@ def catalog(self):\n     def membership(self):\n         return getToolByName(self.context, "portal_membership")\n \n-    @memoize_contextless\n-    def properties(self):\n-        return getToolByName(self.context, "portal_properties")\n-\n     @memoize_contextless\n     def url(self):\n         return getToolByName(self.context, "portal_url")\ndiff --git a/plone/app/layout/sitemap/tests/test_sitemap.py b/plone/app/layout/sitemap/tests/test_sitemap.py\nindex 0c8e868d..b3c4533b 100644\n--- a/plone/app/layout/sitemap/tests/test_sitemap.py\n+++ b/plone/app/layout/sitemap/tests/test_sitemap.py\n@@ -44,10 +44,6 @@ def setUp(self):\n         # wftool._default_chain == \'plone_workflow\'\n         self.wftool.setChainForPortalTypes(["Document"], "simple_publication_workflow")\n \n-        self.site_properties = getToolByName(\n-            self.portal, "portal_properties"\n-        ).site_properties\n-\n         # setup private content that isn\'t accessible for anonymous\n         setRoles(self.portal, TEST_USER_ID, ["Manager"])\n         self.portal.invokeFactory(id="private", type_name="Document")\ndiff --git a/setup.py b/setup.py\nindex 9a8ab870..363a11b7 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -3,7 +3,7 @@\n from setuptools import setup\n \n \n-version = "4.1.2.dev0"\n+version = "5.0.0.dev0"\n \n long_description = (\n     f"{Path(\'README.rst\').read_text()}\\n{Path(\'CHANGES.rst\').read_text()}"\n'

