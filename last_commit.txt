Repository: plone.scale


Branch: refs/heads/master
Date: 2024-06-12T11:50:56-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.scale/commit/cf687e58e5b4c07a3d14580d006dcc978c3d2233

Set PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True

Files changed:
A news/14.bugfix
M plone/scale/scale.py

b"diff --git a/news/14.bugfix b/news/14.bugfix\nnew file mode 100644\nindex 0000000..09ad50c\n--- /dev/null\n+++ b/news/14.bugfix\n@@ -0,0 +1 @@\n+Set PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True to try to load damaged images. @davisagli\ndiff --git a/plone/scale/scale.py b/plone/scale/scale.py\nindex c3f7624..e84e998 100644\n--- a/plone/scale/scale.py\n+++ b/plone/scale/scale.py\n@@ -39,6 +39,9 @@ def none_as_int(the_int):\n # details.\n PIL.ImageFile.MAXBLOCK = 1000000\n \n+# Try to load images even if they're truncated or have a failing CRC.\n+PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True\n+\n MAX_PIXELS = 8192 * 8192\n \n \n"

Repository: plone.scale


Branch: refs/heads/master
Date: 2024-06-12T19:59:58-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.scale/commit/5ef4f472754082ef89aa3b10e63c11c0cf2abdb0

Merge pull request #96 from plone/load-truncated

Files changed:
A news/14.bugfix
M plone/scale/scale.py

b"diff --git a/news/14.bugfix b/news/14.bugfix\nnew file mode 100644\nindex 0000000..09ad50c\n--- /dev/null\n+++ b/news/14.bugfix\n@@ -0,0 +1 @@\n+Set PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True to try to load damaged images. @davisagli\ndiff --git a/plone/scale/scale.py b/plone/scale/scale.py\nindex c3f7624..e84e998 100644\n--- a/plone/scale/scale.py\n+++ b/plone/scale/scale.py\n@@ -39,6 +39,9 @@ def none_as_int(the_int):\n # details.\n PIL.ImageFile.MAXBLOCK = 1000000\n \n+# Try to load images even if they're truncated or have a failing CRC.\n+PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True\n+\n MAX_PIXELS = 8192 * 8192\n \n \n"

