Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-12-18T15:19:02+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/28406a5b8489f6374a4aff58b6caf954005a8d90

Remove Travis (#1036)

* Delete .travis.yml

* Rename travis.cfg -&gt; ci.cfg

Files changed:
A ci.cfg
M .github/workflows/ci.yml
M Makefile
D .travis.yml
D travis.cfg

b'diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 72c8295b1..6167a76a2 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -53,11 +53,11 @@ jobs:\n       - name: pip install\n         run: pip install -r requirements.txt\n       - name: choose Plone version\n-        run: sed -ie "s#plone-x.x.x.cfg#plone-${{ matrix.plone-version }}.x.cfg#" travis.cfg\n+        run: sed -ie "s#plone-x.x.x.cfg#plone-${{ matrix.plone-version }}.x.cfg#" ci.cfg\n \n       # buildout\n       - name: buildout\n-        run: buildout -t 10 -c travis.cfg\n+        run: buildout -t 10 -c ci.cfg\n         env:\n           CI: true\n \ndiff --git a/.travis.yml b/.travis.yml\ndeleted file mode 100644\nindex 575208640..000000000\n--- a/.travis.yml\n+++ /dev/null\n@@ -1,69 +0,0 @@\n-os: linux\n-language: python\n-python:\n-  - "2.7"\n-  - "3.6"\n-  - "3.7"\n-  - "3.8"\n-dist: xenial\n-# services:\n-#   - docker\n-cache:\n-  pip: true\n-  directories:\n-    - $HOME/buildout-cache\n-env:\n-  global:\n-    # - secure: "tj9kO7Uyn7AY2Z6zhdOggLSYheaD8e+qKA7ZXvdWTrL2HtPAtnNJK8keQGj1JLQyy6bRfoOCt51aL8+Lc0fzcACaLFpAPjleSLtUChphPOh/dqTu1QX5oL0SxZ94B4ZC5+qfaSAQHMwbiiWUW0us9QtJpxQQmiJUekqiTdQDNEo="\n-    # - secure: "j06un+j2gHjlGfg+xMcvKG2osf1HSzBq/cPPNIonnjGQY3GJfT/YRzYnHe5LJPPt7IJDD7hAEPentRJ4C0zP66U6gcQ2HjWPsMIcvzlgnXoT2QaaCVkMA9YS4WOsN0C5iY/R64GjFwR7J+/bgeG64XvfhpuQ/UBP2+U68PqSBtM="\n-    - ZSERVER_PORT=55001\n-  jobs:\n-    - PLONE_VERSION=4.3.x\n-    - PLONE_VERSION=5.1.x\n-    - PLONE_VERSION=5.2.x\n-jobs:\n-  exclude:\n-    - python: "3.6"\n-      env: PLONE_VERSION=4.3.x\n-    - python: "3.6"\n-      env: PLONE_VERSION=5.0.x\n-    - python: "3.6"\n-      env: PLONE_VERSION=5.1.x\n-    - python: "3.7"\n-      env: PLONE_VERSION=4.3.x\n-    - python: "3.7"\n-      env: PLONE_VERSION=5.0.x\n-    - python: "3.7"\n-      env: PLONE_VERSION=5.1.x\n-    - python: "3.8"\n-      env: PLONE_VERSION=4.3.x\n-    - python: "3.8"\n-      env: PLONE_VERSION=5.0.x\n-    - python: "3.8"\n-      env: PLONE_VERSION=5.1.x\n-before_install:\n-  - mkdir -p $HOME/buildout-cache/{eggs,downloads}\n-  - mkdir $HOME/.buildout\n-  - echo "[buildout]" > $HOME/.buildout/default.cfg\n-  - echo "download-cache = $HOME/buildout-cache/downloads" >> $HOME/.buildout/default.cfg\n-  - echo "eggs-directory = $HOME/buildout-cache/eggs" >> $HOME/.buildout/default.cfg\n-  - virtualenv -p `which python` .\n-  - bin/pip install -r requirements.txt\n-install:\n-  - sed -ie "s#plone-x.x.x.cfg#plone-$PLONE_VERSION.cfg#" travis.cfg\n-  - bin/buildout -t 10 -c travis.cfg\n-script:\n-  - if [ "$PLONE_VERSION" == "5.2.x" ] && [ $TRAVIS_PYTHON_VERSION == \'3.7\' ]; then pip install black && black src/ --check; fi\n-  - bin/code-analysis\n-  - if [ "$PLONE_VERSION" == "5.2.x" ] && [ $TRAVIS_PYTHON_VERSION == \'3.7\' ]; then bin/sphinxbuilder ; fi\n-  - bin/test\n-  - bin/test-no-uncommitted-doc-changes\n-  - if [ "$PLONE_VERSION" == "5.2.x" ] && [ $TRAVIS_PYTHON_VERSION == \'3.7\' ]; then bin/test-no-sphinx-warnings ; fi\n-after_success:\n-  - bin/test-coverage\n-  - pip install coverage==5.1 coveralls\n-  - coveralls\n-  # - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"\n-  # - if [ ! $TRAVIS_TAG ]; then docker build --tag plone/plone.restapi:plone-$PLONE_VERSION-$(git rev-parse HEAD) --tag plone/plone.restapi:latest . ; fi\n-  # - if [ $TRAVIS_TAG ]; then docker build --tag plone/plone.restapi:plone-$PLONE_VERSION-$(git rev-parse HEAD) . --tag plone/plone.restapi:plone-$PLONE_VERSION-$TRAVIS_TAG --tag plone/plone.restapi:latest ; fi\n-  # - docker push plone/plone.restapi\ndiff --git a/Makefile b/Makefile\nindex 5f715f567..9af7ff733 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -27,7 +27,7 @@ update: ## Update Make and Buildout\n \twget -O plone-4.3.x.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/plone-4.3.x.cfg\n \twget -O plone-5.1.x.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/plone-5.1.x.cfg\n \twget -O plone-5.2.x.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/plone-5.2.x.cfg\n-\twget -O travis.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/travis.cfg\n+\twget -O ci.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/ci.cfg\n \twget -O versions.cfg https://raw.githubusercontent.com/kitconcept/buildout/master/versions.cfg\n \n .installed.cfg: bin/buildout *.cfg\ndiff --git a/travis.cfg b/ci.cfg\nsimilarity index 100%\nrename from travis.cfg\nrename to ci.cfg\n'

