Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2021-01-20T20:32:13+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/e0c458f9d65bf98b127e929c91eecc86965ce14a

Removed mock request.SESSION from tests.

We do not do anythin with request.SESSION.

Files changed:
M Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M Products/CMFPlacefulWorkflow/tests/test_configlet.py

b'diff --git a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\nindex bc71f79..8c0d52d 100644\n--- a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n+++ b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n@@ -28,10 +28,6 @@ class CMFPlacefulWorkflowTestCase(unittest.TestCase):\n \n     layer = PRODUCTS_CMFPLACEFULWORKFLOW_FUNCTIONAL_TESTING\n \n-    class Session(dict):\n-        def set(self, key, value):\n-            self[key] = value\n-\n     def getPermissionsOfRole(self, role):\n         perms = self.portal.permissionsOfRole(role)\n         return [p[\'name\'] for p in perms if p[\'selected\']]\ndiff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\nindex fb4b029..f0f969f 100644\n--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n@@ -57,7 +57,6 @@ def setupSecurityContext(self, ):\n     def setUp(self, ):\n         self.portal = self.layer[\'portal\']\n         self.app = self.layer[\'app\']\n-        self.app.REQUEST[\'SESSION\'] = self.Session()\n         setRoles(self.portal, TEST_USER_ID, [\'Manager\'])\n         self.catalog = getToolByName(self.portal, \'portal_catalog\')\n         self.workflow = getToolByName(self.portal, \'portal_workflow\')\ndiff --git a/Products/CMFPlacefulWorkflow/tests/test_configlet.py b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\nindex 06c6e00..e6fa451 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n@@ -35,7 +35,6 @@ def setUp(self):\n         """Init some shortcuts member variables."""\n         self.portal = self.layer[\'portal\']\n         self.app = self.layer[\'app\']\n-        self.app.REQUEST[\'SESSION\'] = self.Session()\n         setRoles(self.portal, TEST_USER_ID, [\'Manager\'])\n         self.ppw = getToolByName(self.portal, \'portal_placeful_workflow\')\n \n'

