Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2020-08-21T12:04:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.z3cform/commit/9580fcb06b722420ce9a0d28581158d3855a0249

Fixed repeat syntax in multi input to also work in Zope 4.5.

Fixes https://github.com/plone/plone.app.z3cform/issues/116

Files changed:
A news/116.bugfix
M plone/app/z3cform/templates/multi_input.pt

b'diff --git a/news/116.bugfix b/news/116.bugfix\nnew file mode 100644\nindex 0000000..d1bc9ec\n--- /dev/null\n+++ b/news/116.bugfix\n@@ -0,0 +1,2 @@\n+Fixed repeat syntax in multi input to also work in Zope 4.5.\n+[maurits]\ndiff --git a/plone/app/z3cform/templates/multi_input.pt b/plone/app/z3cform/templates/multi_input.pt\nindex b412252..136edc4 100644\n--- a/plone/app/z3cform/templates/multi_input.pt\n+++ b/plone/app/z3cform/templates/multi_input.pt\n@@ -4,7 +4,8 @@\n              tal:define="hidden python:widget.mode == \'hidden\';\n                          showLabel view/showLabel;\n                          checkbox_disabled python:not view.allowRemoving and \'disabled\' or nothing;\n-                         key_widget python:view.key_widgets[repeat[\'widget\'].index()];\n+                         index repeat/widget/index;\n+                         key_widget python:view.key_widgets[index];\n                          error widget/error;\n                          key_error key_widget/error|nothing;\n                          error_class python:(error or key_error) and \' error\' or \'\';\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2020-08-21T16:02:17+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/39f0c7fc361fca968b5f91dd8b15d762e5eb79f8

Merge pull request #117 from plone/maurits/issue-116-multi-input-repeat-index

Fixed repeat syntax in multi input to also work in Zope 4.5.

Files changed:
A news/116.bugfix
M plone/app/z3cform/templates/multi_input.pt

b'diff --git a/news/116.bugfix b/news/116.bugfix\nnew file mode 100644\nindex 0000000..d1bc9ec\n--- /dev/null\n+++ b/news/116.bugfix\n@@ -0,0 +1,2 @@\n+Fixed repeat syntax in multi input to also work in Zope 4.5.\n+[maurits]\ndiff --git a/plone/app/z3cform/templates/multi_input.pt b/plone/app/z3cform/templates/multi_input.pt\nindex b412252..136edc4 100644\n--- a/plone/app/z3cform/templates/multi_input.pt\n+++ b/plone/app/z3cform/templates/multi_input.pt\n@@ -4,7 +4,8 @@\n              tal:define="hidden python:widget.mode == \'hidden\';\n                          showLabel view/showLabel;\n                          checkbox_disabled python:not view.allowRemoving and \'disabled\' or nothing;\n-                         key_widget python:view.key_widgets[repeat[\'widget\'].index()];\n+                         index repeat/widget/index;\n+                         key_widget python:view.key_widgets[index];\n                          error widget/error;\n                          key_error key_widget/error|nothing;\n                          error_class python:(error or key_error) and \' error\' or \'\';\n'

