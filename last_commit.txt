Repository: plone.app.contentmenu


Branch: refs/heads/master
Date: 2020-07-08T16:03:03+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contentmenu/commit/b56dc02d584a7100a715ef00cc5b8d234513c539

Fix review state icon position in toolbar when the user doesn't have the permission to change the review state.

Files changed:
A news/29.bugfix
M plone/app/contentmenu/contentmenu.pt

b'diff --git a/news/29.bugfix b/news/29.bugfix\nnew file mode 100644\nindex 0000000..44c450a\n--- /dev/null\n+++ b/news/29.bugfix\n@@ -0,0 +1,3 @@\n+Fix review state icon position in toolbar when the user doesn\'t have the permission to change the review state.\n+This fixes https://github.com/plone/plonetheme.barceloneta/issues/110\n+[vincentfretin]\ndiff --git a/plone/app/contentmenu/contentmenu.pt b/plone/app/contentmenu/contentmenu.pt\nindex 9e40030..ac44ded 100644\n--- a/plone/app/contentmenu/contentmenu.pt\n+++ b/plone/app/contentmenu/contentmenu.pt\n@@ -10,12 +10,13 @@\n       <a\n           href="#"\n           i18n:attributes="title;"\n-          tal:attributes="href menuItem/action;\n+          tal:attributes="href python:menuItem[\'action\'] or \'javascript:void(0)\';\n+                          style python:not menuItem[\'action\'] and \'cursor: default;; pointer-events: none\' or None;\n                           title menuItem/description;\n                           class string:label-${state_class}"\n           tal:define="state_class menuItem/extra/class | nothing;\n                       state_class python:state_class and state_class or \'\'"\n-          tal:omit-tag="not:menuItem/action">\n+          >\n         <span\n             aria-hidden="true"\n             class=""\n'

Repository: plone.app.contentmenu


Branch: refs/heads/master
Date: 2020-07-09T10:17:31+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contentmenu/commit/b786ef883fc3a0900caa93a68f77c7e13a2840c0

Merge pull request #29 from plone/fix-toolbar-state

fix state icon position in toolbar when no permission

Files changed:
A news/29.bugfix
M plone/app/contentmenu/contentmenu.pt

b'diff --git a/news/29.bugfix b/news/29.bugfix\nnew file mode 100644\nindex 0000000..44c450a\n--- /dev/null\n+++ b/news/29.bugfix\n@@ -0,0 +1,3 @@\n+Fix review state icon position in toolbar when the user doesn\'t have the permission to change the review state.\n+This fixes https://github.com/plone/plonetheme.barceloneta/issues/110\n+[vincentfretin]\ndiff --git a/plone/app/contentmenu/contentmenu.pt b/plone/app/contentmenu/contentmenu.pt\nindex 9e40030..ac44ded 100644\n--- a/plone/app/contentmenu/contentmenu.pt\n+++ b/plone/app/contentmenu/contentmenu.pt\n@@ -10,12 +10,13 @@\n       <a\n           href="#"\n           i18n:attributes="title;"\n-          tal:attributes="href menuItem/action;\n+          tal:attributes="href python:menuItem[\'action\'] or \'javascript:void(0)\';\n+                          style python:not menuItem[\'action\'] and \'cursor: default;; pointer-events: none\' or None;\n                           title menuItem/description;\n                           class string:label-${state_class}"\n           tal:define="state_class menuItem/extra/class | nothing;\n                       state_class python:state_class and state_class or \'\'"\n-          tal:omit-tag="not:menuItem/action">\n+          >\n         <span\n             aria-hidden="true"\n             class=""\n'

