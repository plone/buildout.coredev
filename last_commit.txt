Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2022-04-19T09:09:46+02:00
Author: Wesley Barroso Lopes (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/db2498b459c5a674bcb19023768cc4945a5cf1c7

Remove date range search fix, which was done in Products.ZCatalog (#3507)

Products.ZCatalog 5.4 fix #3007 in a more comprehensive way. So the
correction made in Products.CMFPlone can be removed.

Files changed:
A news/3432.bugfix
M Products/CMFPlone/browser/search.py

b"diff --git a/Products/CMFPlone/browser/search.py b/Products/CMFPlone/browser/search.py\nindex b4abbca2df..984a907821 100644\n--- a/Products/CMFPlone/browser/search.py\n+++ b/Products/CMFPlone/browser/search.py\n@@ -13,7 +13,6 @@\n from zope.component import queryUtility\n from zope.i18nmessageid import MessageFactory\n from zope.publisher.browser import BrowserView\n-from ZPublisher.HTTPRequest import record\n from ZTUtils import make_query\n \n import json\n@@ -122,11 +121,6 @@ def _filter_query(self, query):\n                 # created not a mapping\n                 del query['created']\n \n-        # https://github.com/plone/Products.CMFPlone/issues/3007\n-        # If 'created' exists and is of type 'record', then cast it as dict\n-        if 'created' in query and isinstance(query['created'], record):\n-            query['created'] = dict(query['created'])\n-\n         # respect `types_not_searched` setting\n         types = query.get('portal_type', [])\n         if 'query' in types:\ndiff --git a/news/3432.bugfix b/news/3432.bugfix\nnew file mode 100644\nindex 0000000000..dd272a593f\n--- /dev/null\n+++ b/news/3432.bugfix\n@@ -0,0 +1,2 @@\n+Remove date range search fix, which was done in Products.ZCatalog.\n+[wesleybl]\n"

