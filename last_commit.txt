Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-06-17T00:09:38+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/f36f7f05ccbf8acb9da37eb23b94d3c47cec4f21

Update links

From old "plone_control_panel" to newer "@@overview-controlpanel".

Fixes:
https://github.com/plone/Products.CMFPlone/issues/573

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/plone-frontpage.pt
M Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
M Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
M Products/CMFPlone/controlpanel/browser/maintenance.pt
M Products/CMFPlone/controlpanel/browser/resourceregistry.pt
M Products/CMFPlone/controlpanel/browser/types.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
M Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
M Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
M Products/CMFPlone/tests/csrf.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index eb90c1f..6b7a3d8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,10 @@ Changelog
 5.0b3 (unreleased)
 ------------------
 
+- Update links to point to '@@overview-controlpanel'.
+  Fixes https://github.com/plone/Products.CMFPlone/issues/573
+  [gforcada]
+
 - Fix email validation of long domain names.
   [gotcha]
 
diff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt
index 59961d3..d401a7b 100644
--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt
+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt
@@ -71,7 +71,7 @@ Before you start exploring your newly created Plone site, please do the followin
     </li>
 
     <li>…and many more settings are available in the
-        <a href="plone_control_panel">Site Setup</a>.
+        <a href="@@overview-controlpanel">Site Setup</a>.
     </li>
 
 </ul>
diff --git a/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt b/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
index 4de47e7..cc2814f 100644
--- a/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
+++ b/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
@@ -12,7 +12,7 @@
 
   <a href=""
      id="setup-link"
-     tal:attributes="href string:$portal_url/plone_control_panel"
+     tal:attributes="href string:$portal_url/@@overview-controlpanel"
      i18n:translate="">
       Site Setup
   </a> &rsaquo;
diff --git a/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt b/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
index f802aeb..7b522a5 100644
--- a/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
+++ b/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
@@ -12,7 +12,7 @@
 
   <a href=""
      id="setup-link"
-     tal:attributes="href string:$portal_url/plone_control_panel"
+     tal:attributes="href string:$portal_url/@@overview-controlpanel"
      i18n:translate="">
       Site Setup
   </a> &rsaquo;
diff --git a/Products/CMFPlone/controlpanel/browser/maintenance.pt b/Products/CMFPlone/controlpanel/browser/maintenance.pt
index 152e16b..1160b68 100644
--- a/Products/CMFPlone/controlpanel/browser/maintenance.pt
+++ b/Products/CMFPlone/controlpanel/browser/maintenance.pt
@@ -27,7 +27,7 @@
 
          <a href=""
             id="setup-link"
-            tal:attributes="href string:$portal_url/plone_control_panel"
+            tal:attributes="href string:$portal_url/@@overview-controlpanel"
             i18n:translate="">
              Site Setup
          </a>
@@ -165,7 +165,7 @@
          <div id="content-core">
              <a href=""
                 class="link-parent"
-                tal:attributes="href string:$portal_url/plone_control_panel"
+                tal:attributes="href string:$portal_url/@@overview-controlpanel"
                 i18n:translate="label_up_to_plone_setup">
                  Up to Site Setup
              </a>
diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
index d5fda8d..67ed37a 100644
--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
@@ -13,7 +13,7 @@
 
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
        Site Setup
     </a>
diff --git a/Products/CMFPlone/controlpanel/browser/types.py b/Products/CMFPlone/controlpanel/browser/types.py
index 2c9935c..5327450 100644
--- a/Products/CMFPlone/controlpanel/browser/types.py
+++ b/Products/CMFPlone/controlpanel/browser/types.py
@@ -79,7 +79,7 @@ def handleSave(self, action):
     def handleCancel(self, action):
         IStatusMessage(self.request).addStatusMessage(
             _(u"Changes canceled."), "info")
-        self.request.response.redirect("plone_control_panel")
+        self.request.response.redirect("@@overview-controlpanel")
 
     @property
     @memoize
@@ -266,7 +266,7 @@ def __call__(self):
 
         elif cancel_button:
             self.request.response.redirect(
-                self.context.absolute_url() + '/plone_control_panel')
+                self.context.absolute_url() + '/@@overview-controlpanel')
             postback = False
 
         if postback:
diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
index 14f53c7..5bef433 100644
--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
@@ -24,7 +24,7 @@
   <article id="content">
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
       Site Setup
     </a>
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
index 154c193..efb07db 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
@@ -35,7 +35,7 @@ def setUp(self):
 
     def test_editing_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_editing_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
index b3a0474..4fac669 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
@@ -34,7 +34,7 @@ def setUp(self):
 
     def test_filter_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Site').click()
 
     def test_filter_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
index b3ef817..1e0bda0 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
@@ -45,7 +45,7 @@ def _inject_available_languages_field(self, value):
 
     def test_language_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Language').click()
         self.assertTrue("Language Settings" in self.browser.contents)
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
index a383fb8..b1a7039 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
@@ -33,7 +33,7 @@ def setUp(self):
 
     def test_mail_controlpanel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Mail').click()
 
     def test_mail_controlpanel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
index 1e1ac26..aed28a4 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
@@ -42,7 +42,7 @@ def setUp(self):
 
     def test_maintenance_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_maintenance_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
index 2176953..1d82bfe 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_markup_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Markup').click()
 
     def test_markup_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
index 600ec88..e79c1a7 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_navigation_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Navigation').click()
         self.assertTrue("Navigation Settings" in self.browser.contents)
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
index 0d015bb..59aef91 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_search_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Search').click()
 
     def test_search_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
index 098cd47..ab93965 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
@@ -33,7 +33,7 @@ def setUp(self):
 
     def test_security_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Security').click()
 
     def test_security_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
index ba2a8a4..36b0b4f 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
@@ -40,7 +40,7 @@ def setUp(self):
 
     def test_site_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Site').click()
 
     def test_site_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
index f20f91d..10ae02a 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
@@ -30,7 +30,7 @@ def setUp(self):
 
     def test_syndication_controlpanel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Syndication').click()
 
     def test_syndication_controlpanel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
index 43898f5..3dc594d 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
@@ -26,7 +26,7 @@ def setUp(self):
 
     def test_types_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_standard_type_select(self):
@@ -39,7 +39,7 @@ def test_standard_type_cancel(self):
         self.browser.open(self.types_url)
         self.browser.getControl(name='type_id').value = ['Link']
         self.browser.getControl('Cancel').click()
-        self.assertIn('plone_control_panel', self.browser.url)
+        self.assertIn('@@overview-controlpanel', self.browser.url)
 
     def test_standard_type_allow_commenting(self):
         self.browser.open(self.types_url)
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
index b82a6f2..f017cac 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
@@ -105,7 +105,7 @@ def setUp(self):
 
     def test_usergroups_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Users and Groups').click()
         self.assertEqual(
             self.browser.url,
diff --git a/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt b/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
index 990c328..c60dd07 100644
--- a/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
+++ b/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
@@ -14,7 +14,7 @@
     tal:condition="controlPanel/maySeeSomeConfiglets">
   <header class="portletHeader">
         <a href=""
-           tal:attributes="href string:${portal_url}/plone_control_panel"
+           tal:attributes="href string:${portal_url}/@@overview-controlpanel"
            i18n:translate="">Site Setup</a>
   </header>
 
diff --git a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
index ee00466..f5076cf 100644
--- a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
+++ b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
@@ -12,7 +12,7 @@
 
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
         Site Setup
     </a>
diff --git a/Products/CMFPlone/tests/csrf.txt b/Products/CMFPlone/tests/csrf.txt
index 270fa51..f7b8985 100644
--- a/Products/CMFPlone/tests/csrf.txt
+++ b/Products/CMFPlone/tests/csrf.txt
@@ -186,7 +186,7 @@ Make sure users and roles can be managed through the control panel. First
 we need to alter the security settings so that no email roundtrip is required
 anymore (which at the same time tests the security control panel):
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Security').click()
   >>> browser.getControl(name='form.widgets.enable_user_pwd_choice:list').value = ['selected']
   >>> browser.getControl('Save').click()
@@ -218,7 +218,7 @@ anymore (which at the same time tests the security control panel):
 
 Let's also try adding that user to a group:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Users and Groups').click()
   >>> browser.getControl('Show all').click()
   >>> browser.getLink('johnny').click()
@@ -242,7 +242,7 @@ There's an alternative way to adding a user to a group in which the group in
 question is selected first and the user can then be added via the "Group
 Members" tab:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Users and Groups').click()
   >>> browser.getLink(url='/@@usergroup-groupprefs').click()
   >>> browser.getLink('Reviewers').click()
@@ -393,7 +393,7 @@ Some parts of the control panel have already been tested, but the "configlets"
 haven't. Luckily most of them are using the same form handlers and template,
 so testing one of them already makes sure the protection works in most cases:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Security').click()
   >>> browser.getControl(name='form.widgets.enable_self_reg:list').value
   []
@@ -423,7 +423,7 @@ limitations, which is why we need to log in as the portal owner first:
   >>> z2.login(app['acl_users'], 'app')
   >>> import transaction; transaction.commit()
   >>> app_browser.addHeader('Authorization', 'Basic app:secret')
-  >>> app_browser.open('http://nohost/plone/plone_control_panel')
+  >>> app_browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> app_browser.getLink('Maintenance').click()
   >>> app_browser.getControl(name='_authenticator', index=0).value = 'invalid!'
   >>> app_browser.getControl(name='_authenticator', index=1).value = 'invalid!'


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-06-19T07:40:33+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/7b5f6cfeb55ad86662c786b98fde6ba16be420cc

Merge pull request #634 from plone/update-links-573

Update links

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/plone-frontpage.pt
M Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
M Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
M Products/CMFPlone/controlpanel/browser/maintenance.pt
M Products/CMFPlone/controlpanel/browser/resourceregistry.pt
M Products/CMFPlone/controlpanel/browser/types.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
M Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
M Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
M Products/CMFPlone/tests/csrf.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index eb90c1f..6b7a3d8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,10 @@ Changelog
 5.0b3 (unreleased)
 ------------------
 
+- Update links to point to '@@overview-controlpanel'.
+  Fixes https://github.com/plone/Products.CMFPlone/issues/573
+  [gforcada]
+
 - Fix email validation of long domain names.
   [gotcha]
 
diff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt
index 59961d3..d401a7b 100644
--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt
+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt
@@ -71,7 +71,7 @@ Before you start exploring your newly created Plone site, please do the followin
     </li>
 
     <li>…and many more settings are available in the
-        <a href="plone_control_panel">Site Setup</a>.
+        <a href="@@overview-controlpanel">Site Setup</a>.
     </li>
 
 </ul>
diff --git a/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt b/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
index 4de47e7..cc2814f 100644
--- a/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
+++ b/Products/CMFPlone/controlpanel/browser/controlpanel_usergroups_layout.pt
@@ -12,7 +12,7 @@
 
   <a href=""
      id="setup-link"
-     tal:attributes="href string:$portal_url/plone_control_panel"
+     tal:attributes="href string:$portal_url/@@overview-controlpanel"
      i18n:translate="">
       Site Setup
   </a> &rsaquo;
diff --git a/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt b/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
index f802aeb..7b522a5 100644
--- a/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
+++ b/Products/CMFPlone/controlpanel/browser/filter_controlpanel.pt
@@ -12,7 +12,7 @@
 
   <a href=""
      id="setup-link"
-     tal:attributes="href string:$portal_url/plone_control_panel"
+     tal:attributes="href string:$portal_url/@@overview-controlpanel"
      i18n:translate="">
       Site Setup
   </a> &rsaquo;
diff --git a/Products/CMFPlone/controlpanel/browser/maintenance.pt b/Products/CMFPlone/controlpanel/browser/maintenance.pt
index 152e16b..1160b68 100644
--- a/Products/CMFPlone/controlpanel/browser/maintenance.pt
+++ b/Products/CMFPlone/controlpanel/browser/maintenance.pt
@@ -27,7 +27,7 @@
 
          <a href=""
             id="setup-link"
-            tal:attributes="href string:$portal_url/plone_control_panel"
+            tal:attributes="href string:$portal_url/@@overview-controlpanel"
             i18n:translate="">
              Site Setup
          </a>
@@ -165,7 +165,7 @@
          <div id="content-core">
              <a href=""
                 class="link-parent"
-                tal:attributes="href string:$portal_url/plone_control_panel"
+                tal:attributes="href string:$portal_url/@@overview-controlpanel"
                 i18n:translate="label_up_to_plone_setup">
                  Up to Site Setup
              </a>
diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
index d5fda8d..67ed37a 100644
--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
@@ -13,7 +13,7 @@
 
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
        Site Setup
     </a>
diff --git a/Products/CMFPlone/controlpanel/browser/types.py b/Products/CMFPlone/controlpanel/browser/types.py
index 2c9935c..5327450 100644
--- a/Products/CMFPlone/controlpanel/browser/types.py
+++ b/Products/CMFPlone/controlpanel/browser/types.py
@@ -79,7 +79,7 @@ def handleSave(self, action):
     def handleCancel(self, action):
         IStatusMessage(self.request).addStatusMessage(
             _(u"Changes canceled."), "info")
-        self.request.response.redirect("plone_control_panel")
+        self.request.response.redirect("@@overview-controlpanel")
 
     @property
     @memoize
@@ -266,7 +266,7 @@ def __call__(self):
 
         elif cancel_button:
             self.request.response.redirect(
-                self.context.absolute_url() + '/plone_control_panel')
+                self.context.absolute_url() + '/@@overview-controlpanel')
             postback = False
 
         if postback:
diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
index 14f53c7..5bef433 100644
--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.pt
@@ -24,7 +24,7 @@
   <article id="content">
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
       Site Setup
     </a>
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
index 154c193..efb07db 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_editing.py
@@ -35,7 +35,7 @@ def setUp(self):
 
     def test_editing_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_editing_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
index b3a0474..4fac669 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_filter.py
@@ -34,7 +34,7 @@ def setUp(self):
 
     def test_filter_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Site').click()
 
     def test_filter_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
index b3ef817..1e0bda0 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_language.py
@@ -45,7 +45,7 @@ def _inject_available_languages_field(self, value):
 
     def test_language_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Language').click()
         self.assertTrue("Language Settings" in self.browser.contents)
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
index a383fb8..b1a7039 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_mail.py
@@ -33,7 +33,7 @@ def setUp(self):
 
     def test_mail_controlpanel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Mail').click()
 
     def test_mail_controlpanel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
index 1e1ac26..aed28a4 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_maintenance.py
@@ -42,7 +42,7 @@ def setUp(self):
 
     def test_maintenance_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_maintenance_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
index 2176953..1d82bfe 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_markup.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_markup_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Markup').click()
 
     def test_markup_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
index 600ec88..e79c1a7 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_navigation.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_navigation_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Navigation').click()
         self.assertTrue("Navigation Settings" in self.browser.contents)
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
index 0d015bb..59aef91 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_search.py
@@ -29,7 +29,7 @@ def setUp(self):
 
     def test_search_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Search').click()
 
     def test_search_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
index 098cd47..ab93965 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_security.py
@@ -33,7 +33,7 @@ def setUp(self):
 
     def test_security_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Security').click()
 
     def test_security_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
index ba2a8a4..36b0b4f 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_site.py
@@ -40,7 +40,7 @@ def setUp(self):
 
     def test_site_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Site').click()
 
     def test_site_control_panel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
index f20f91d..10ae02a 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_syndication.py
@@ -30,7 +30,7 @@ def setUp(self):
 
     def test_syndication_controlpanel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Syndication').click()
 
     def test_syndication_controlpanel_backlink(self):
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
index 2315848..5f539ae 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_types.py
@@ -26,7 +26,7 @@ def setUp(self):
 
     def test_types_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Editing').click()
 
     def test_standard_type_select(self):
@@ -39,7 +39,7 @@ def test_standard_type_cancel(self):
         self.browser.open(self.types_url)
         self.browser.getControl(name='type_id').value = ['Link']
         self.browser.getControl('Cancel').click()
-        self.assertIn('plone_control_panel', self.browser.url)
+        self.assertIn('@@overview-controlpanel', self.browser.url)
 
     def test_standard_type_allow_commenting(self):
         self.browser.open(self.types_url)
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
index b82a6f2..f017cac 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups.py
@@ -105,7 +105,7 @@ def setUp(self):
 
     def test_usergroups_control_panel_link(self):
         self.browser.open(
-            "%s/plone_control_panel" % self.portal_url)
+            "%s/@@overview-controlpanel" % self.portal_url)
         self.browser.getLink('Users and Groups').click()
         self.assertEqual(
             self.browser.url,
diff --git a/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt b/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
index 990c328..c60dd07 100644
--- a/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
+++ b/Products/CMFPlone/skins/plone_prefs/portlet_prefs.pt
@@ -14,7 +14,7 @@
     tal:condition="controlPanel/maySeeSomeConfiglets">
   <header class="portletHeader">
         <a href=""
-           tal:attributes="href string:${portal_url}/plone_control_panel"
+           tal:attributes="href string:${portal_url}/@@overview-controlpanel"
            i18n:translate="">Site Setup</a>
   </header>
 
diff --git a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
index ee00466..f5076cf 100644
--- a/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
+++ b/Products/CMFPlone/skins/plone_prefs/prefs_error_log_form.pt
@@ -12,7 +12,7 @@
 
     <a href=""
        id="setup-link"
-       tal:attributes="href string:$portal_url/plone_control_panel"
+       tal:attributes="href string:$portal_url/@@overview-controlpanel"
        i18n:translate="">
         Site Setup
     </a>
diff --git a/Products/CMFPlone/tests/csrf.txt b/Products/CMFPlone/tests/csrf.txt
index 270fa51..f7b8985 100644
--- a/Products/CMFPlone/tests/csrf.txt
+++ b/Products/CMFPlone/tests/csrf.txt
@@ -186,7 +186,7 @@ Make sure users and roles can be managed through the control panel. First
 we need to alter the security settings so that no email roundtrip is required
 anymore (which at the same time tests the security control panel):
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Security').click()
   >>> browser.getControl(name='form.widgets.enable_user_pwd_choice:list').value = ['selected']
   >>> browser.getControl('Save').click()
@@ -218,7 +218,7 @@ anymore (which at the same time tests the security control panel):
 
 Let's also try adding that user to a group:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Users and Groups').click()
   >>> browser.getControl('Show all').click()
   >>> browser.getLink('johnny').click()
@@ -242,7 +242,7 @@ There's an alternative way to adding a user to a group in which the group in
 question is selected first and the user can then be added via the "Group
 Members" tab:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Users and Groups').click()
   >>> browser.getLink(url='/@@usergroup-groupprefs').click()
   >>> browser.getLink('Reviewers').click()
@@ -393,7 +393,7 @@ Some parts of the control panel have already been tested, but the "configlets"
 haven't. Luckily most of them are using the same form handlers and template,
 so testing one of them already makes sure the protection works in most cases:
 
-  >>> browser.open('http://nohost/plone/plone_control_panel')
+  >>> browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> browser.getLink('Security').click()
   >>> browser.getControl(name='form.widgets.enable_self_reg:list').value
   []
@@ -423,7 +423,7 @@ limitations, which is why we need to log in as the portal owner first:
   >>> z2.login(app['acl_users'], 'app')
   >>> import transaction; transaction.commit()
   >>> app_browser.addHeader('Authorization', 'Basic app:secret')
-  >>> app_browser.open('http://nohost/plone/plone_control_panel')
+  >>> app_browser.open('http://nohost/plone/@@overview-controlpanel')
   >>> app_browser.getLink('Maintenance').click()
   >>> app_browser.getControl(name='_authenticator', index=0).value = 'invalid!'
   >>> app_browser.getControl(name='_authenticator', index=1).value = 'invalid!'


