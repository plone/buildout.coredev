Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-10T22:24:50-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/ddf971ba0380d10891d0c5f7404ceab57ac8e55b

Fix printing the server URL in non-reload mode

Files changed:
M src/plone/app/robotframework/server.py

b'diff --git a/src/plone/app/robotframework/server.py b/src/plone/app/robotframework/server.py\nindex 6f8205e..8059adc 100644\n--- a/src/plone/app/robotframework/server.py\n+++ b/src/plone/app/robotframework/server.py\n@@ -79,16 +79,19 @@ def print_urls(zope_layer, xmlrpc_server):\n     When doing that it is helpful that the URLs with the chosen ports are printed to stdout.\n     """\n \n+    print("Robot XMLRPC: http://{}:{}".format(*xmlrpc_server.server_address))\n+\n     for layer in zope_layer.baseResolutionOrder:\n         # Walk up the testing layers and look for the first zserver in order to get the\n         # actual server name and server port.\n         zserver = getattr(layer, "zserver", None)\n-        if not zserver:\n-            continue\n-        print(f"ZSERVER: http://{zserver.server_name}:{zserver.server_port}")\n-        break\n-\n-    print("XMLRPC: http://{}:{}".format(*xmlrpc_server.server_address))\n+        if zserver:\n+            print(f"Zope is running at: http://{zserver.server_name}:{zserver.server_port}/")\n+            break\n+        server = getattr(layer, "server", None)\n+        if server:\n+            print(f"Zope is running at: {server.application_url}")\n+            break\n \n \n def start_reload(\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-10T22:28:11-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/88aa6cb384199fccf56d07f96ad15071b649360c

changelog

Files changed:
A news/155.bugfix

b'diff --git a/news/155.bugfix b/news/155.bugfix\nnew file mode 100644\nindex 0000000..7703dcc\n--- /dev/null\n+++ b/news/155.bugfix\n@@ -0,0 +1 @@\n+Fix printing the server URL when robot-server is run without reloading enabled. @davisagli\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-10T22:28:48-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/a0063561335cd428df488af6ab92f6ec804e93a7

lint

Files changed:
M src/plone/app/robotframework/server.py

b'diff --git a/src/plone/app/robotframework/server.py b/src/plone/app/robotframework/server.py\nindex 8059adc..a054af5 100644\n--- a/src/plone/app/robotframework/server.py\n+++ b/src/plone/app/robotframework/server.py\n@@ -86,7 +86,9 @@ def print_urls(zope_layer, xmlrpc_server):\n         # actual server name and server port.\n         zserver = getattr(layer, "zserver", None)\n         if zserver:\n-            print(f"Zope is running at: http://{zserver.server_name}:{zserver.server_port}/")\n+            print(\n+                f"Zope is running at: http://{zserver.server_name}:{zserver.server_port}/"\n+            )\n             break\n         server = getattr(layer, "server", None)\n         if server:\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2024-02-11T15:17:34-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/7e77733ba30742ad98e4345ca0ceb745d65529cf

Merge pull request #155 from plone/fix-print-server-url

Fix printing the server URL in non-reload mode

Files changed:
A news/155.bugfix
M src/plone/app/robotframework/server.py

b'diff --git a/news/155.bugfix b/news/155.bugfix\nnew file mode 100644\nindex 0000000..7703dcc\n--- /dev/null\n+++ b/news/155.bugfix\n@@ -0,0 +1 @@\n+Fix printing the server URL when robot-server is run without reloading enabled. @davisagli\ndiff --git a/src/plone/app/robotframework/server.py b/src/plone/app/robotframework/server.py\nindex 6f8205e..a054af5 100644\n--- a/src/plone/app/robotframework/server.py\n+++ b/src/plone/app/robotframework/server.py\n@@ -79,16 +79,21 @@ def print_urls(zope_layer, xmlrpc_server):\n     When doing that it is helpful that the URLs with the chosen ports are printed to stdout.\n     """\n \n+    print("Robot XMLRPC: http://{}:{}".format(*xmlrpc_server.server_address))\n+\n     for layer in zope_layer.baseResolutionOrder:\n         # Walk up the testing layers and look for the first zserver in order to get the\n         # actual server name and server port.\n         zserver = getattr(layer, "zserver", None)\n-        if not zserver:\n-            continue\n-        print(f"ZSERVER: http://{zserver.server_name}:{zserver.server_port}")\n-        break\n-\n-    print("XMLRPC: http://{}:{}".format(*xmlrpc_server.server_address))\n+        if zserver:\n+            print(\n+                f"Zope is running at: http://{zserver.server_name}:{zserver.server_port}/"\n+            )\n+            break\n+        server = getattr(layer, "server", None)\n+        if server:\n+            print(f"Zope is running at: {server.application_url}")\n+            break\n \n \n def start_reload(\n'

