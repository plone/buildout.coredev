Repository: plone.app.testing


Branch: refs/heads/master
Date: 2024-06-19T21:48:44+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.testing/commit/89dfa1db45c537ba9e6e8039aef49f33d0d65c21

PloneFixture: explicitly install plone.app.contenttypes:default.

The `addPloneSite` factory in Plone 6.1 no longer installs this by default.
See https://github.com/plone/Products.CMFPlone/issues/3961

Files changed:
A news/3961.feature
M src/plone/app/testing/layers.py

b'diff --git a/news/3961.feature b/news/3961.feature\nnew file mode 100644\nindex 0000000..2c653dc\n--- /dev/null\n+++ b/news/3961.feature\n@@ -0,0 +1,4 @@\n+PloneFixture: explicitly install plone.app.contenttypes:default.\n+The `addPloneSite` factory in Plone 6.1 no longer installs this by default.\n+[maurits]\n+\ndiff --git a/src/plone/app/testing/layers.py b/src/plone/app/testing/layers.py\nindex e1eb75b..6b787c3 100644\n--- a/src/plone/app/testing/layers.py\n+++ b/src/plone/app/testing/layers.py\n@@ -70,7 +70,10 @@ class PloneFixture(Layer):\n     )\n \n     # Extension profiles to be installed with site setup\n-    extensionProfiles = ("plonetheme.barceloneta:default",)\n+    extensionProfiles = (\n+        "plone.app.contenttypes:default",\n+        "plonetheme.barceloneta:default",\n+    )\n \n     # Layer lifecycle\n \n'

Repository: plone.app.testing


Branch: refs/heads/master
Date: 2024-07-26T22:02:51+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.testing/commit/72970c70321e3331bfe75a8424237cff4b7758ea

Merge pull request #97 from plone/distributions

PloneFixture: explicitly install plone.app.contenttypes:default.

Files changed:
A news/3961.feature
M src/plone/app/testing/layers.py

b'diff --git a/news/3961.feature b/news/3961.feature\nnew file mode 100644\nindex 0000000..2c653dc\n--- /dev/null\n+++ b/news/3961.feature\n@@ -0,0 +1,4 @@\n+PloneFixture: explicitly install plone.app.contenttypes:default.\n+The `addPloneSite` factory in Plone 6.1 no longer installs this by default.\n+[maurits]\n+\ndiff --git a/src/plone/app/testing/layers.py b/src/plone/app/testing/layers.py\nindex e1eb75b..6b787c3 100644\n--- a/src/plone/app/testing/layers.py\n+++ b/src/plone/app/testing/layers.py\n@@ -70,7 +70,10 @@ class PloneFixture(Layer):\n     )\n \n     # Extension profiles to be installed with site setup\n-    extensionProfiles = ("plonetheme.barceloneta:default",)\n+    extensionProfiles = (\n+        "plone.app.contenttypes:default",\n+        "plonetheme.barceloneta:default",\n+    )\n \n     # Layer lifecycle\n \n'

