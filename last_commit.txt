Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-09-03T16:14:26+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/4919238e96e4df283a00782ab86757605f9b04ab

Fixed deprecation warning for zope.site.hooks.

Note: we still have `zope.site` in our `setup.py` `install_requires`.
We should probably keep it there in 5.2, to keep backwards compatibility for other packages that may not have it in their own install_requires.

Also, I am not sure if we are indirectly depending on other code in `zope.site`, or if the entire package is deprecated.

Files changed:
A news/3130.bugfix
M Products/CMFPlone/browser/contact_info.py
M Products/CMFPlone/controlpanel/bbb/mail.py
M Products/CMFPlone/controlpanel/bbb/search.py
M Products/CMFPlone/controlpanel/bbb/security.py
M Products/CMFPlone/controlpanel/bbb/usergroups.py
M Products/CMFPlone/controlpanel/events.py

b'diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py\nindex a696e17790..72eacdb566 100644\n--- a/Products/CMFPlone/browser/contact_info.py\n+++ b/Products/CMFPlone/browser/contact_info.py\n@@ -12,7 +12,7 @@\n from smtplib import SMTPException\n from z3c.form import form, button\n from zope.component import getUtility\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n import logging\n \ndiff --git a/Products/CMFPlone/controlpanel/bbb/mail.py b/Products/CMFPlone/controlpanel/bbb/mail.py\nindex c9abf7e20c..91a2bcb385 100644\n--- a/Products/CMFPlone/controlpanel/bbb/mail.py\n+++ b/Products/CMFPlone/controlpanel/bbb/mail.py\n@@ -6,7 +6,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(IMailSchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/search.py b/Products/CMFPlone/controlpanel/bbb/search.py\nindex 1b001c6f01..40745cb424 100644\n--- a/Products/CMFPlone/controlpanel/bbb/search.py\n+++ b/Products/CMFPlone/controlpanel/bbb/search.py\n@@ -5,7 +5,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(ISearchSchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/security.py b/Products/CMFPlone/controlpanel/bbb/security.py\nindex 39edfc792e..4d5dcfc6d7 100644\n--- a/Products/CMFPlone/controlpanel/bbb/security.py\n+++ b/Products/CMFPlone/controlpanel/bbb/security.py\n@@ -6,7 +6,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(ISecuritySchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/usergroups.py b/Products/CMFPlone/controlpanel/bbb/usergroups.py\nindex 7ee9659735..365beca9a8 100644\n--- a/Products/CMFPlone/controlpanel/bbb/usergroups.py\n+++ b/Products/CMFPlone/controlpanel/bbb/usergroups.py\n@@ -2,7 +2,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n from plone.registry.interfaces import IRegistry\n from Products.CMFPlone.interfaces import IUserGroupsSettingsSchema\n from Products.CMFPlone.interfaces import IPloneSiteRoot\ndiff --git a/Products/CMFPlone/controlpanel/events.py b/Products/CMFPlone/controlpanel/events.py\nindex 5170529cf0..267b0d9abd 100644\n--- a/Products/CMFPlone/controlpanel/events.py\n+++ b/Products/CMFPlone/controlpanel/events.py\n@@ -12,7 +12,7 @@\n from zope.component import queryUtility\n from zope.interface import implementer\n from zope.ramcache.interfaces.ram import IRAMCache\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(IConfigurationChangedEvent)\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000000..8d468956a7\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for zope.site.hooks.\n+[maurits]\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-09-03T18:27:02+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/98f314c89f5ac27bac9a440ce46bfaa9293fd4b0

Merge pull request #3167 from plone/maurits/fix-warnings

Fixed deprecation warning for zope.site.hooks.

Files changed:
A news/3130.bugfix
M Products/CMFPlone/browser/contact_info.py
M Products/CMFPlone/controlpanel/bbb/mail.py
M Products/CMFPlone/controlpanel/bbb/search.py
M Products/CMFPlone/controlpanel/bbb/security.py
M Products/CMFPlone/controlpanel/bbb/usergroups.py
M Products/CMFPlone/controlpanel/events.py

b'diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py\nindex a696e17790..72eacdb566 100644\n--- a/Products/CMFPlone/browser/contact_info.py\n+++ b/Products/CMFPlone/browser/contact_info.py\n@@ -12,7 +12,7 @@\n from smtplib import SMTPException\n from z3c.form import form, button\n from zope.component import getUtility\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n import logging\n \ndiff --git a/Products/CMFPlone/controlpanel/bbb/mail.py b/Products/CMFPlone/controlpanel/bbb/mail.py\nindex c9abf7e20c..91a2bcb385 100644\n--- a/Products/CMFPlone/controlpanel/bbb/mail.py\n+++ b/Products/CMFPlone/controlpanel/bbb/mail.py\n@@ -6,7 +6,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(IMailSchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/search.py b/Products/CMFPlone/controlpanel/bbb/search.py\nindex 1b001c6f01..40745cb424 100644\n--- a/Products/CMFPlone/controlpanel/bbb/search.py\n+++ b/Products/CMFPlone/controlpanel/bbb/search.py\n@@ -5,7 +5,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(ISearchSchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/security.py b/Products/CMFPlone/controlpanel/bbb/security.py\nindex 39edfc792e..4d5dcfc6d7 100644\n--- a/Products/CMFPlone/controlpanel/bbb/security.py\n+++ b/Products/CMFPlone/controlpanel/bbb/security.py\n@@ -6,7 +6,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(ISecuritySchema)\ndiff --git a/Products/CMFPlone/controlpanel/bbb/usergroups.py b/Products/CMFPlone/controlpanel/bbb/usergroups.py\nindex 7ee9659735..365beca9a8 100644\n--- a/Products/CMFPlone/controlpanel/bbb/usergroups.py\n+++ b/Products/CMFPlone/controlpanel/bbb/usergroups.py\n@@ -2,7 +2,7 @@\n from zope.component import adapts\n from zope.component import getUtility\n from zope.interface import implementer\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n from plone.registry.interfaces import IRegistry\n from Products.CMFPlone.interfaces import IUserGroupsSettingsSchema\n from Products.CMFPlone.interfaces import IPloneSiteRoot\ndiff --git a/Products/CMFPlone/controlpanel/events.py b/Products/CMFPlone/controlpanel/events.py\nindex 5170529cf0..267b0d9abd 100644\n--- a/Products/CMFPlone/controlpanel/events.py\n+++ b/Products/CMFPlone/controlpanel/events.py\n@@ -12,7 +12,7 @@\n from zope.component import queryUtility\n from zope.interface import implementer\n from zope.ramcache.interfaces.ram import IRAMCache\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n \n \n @implementer(IConfigurationChangedEvent)\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000000..8d468956a7\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for zope.site.hooks.\n+[maurits]\n'

