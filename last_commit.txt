Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-07-09T22:34:34+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/e4a2ad0285a85c5eed54d49c10d8390bef4ade57

Fix Plone 5.2.x deprecation message 'ILanguageSchema is deprecated'. (#976)

* Fix Plone 5.2.x deprecation message 'ILanguageSchema is deprecated'.

* Fix syntax error and flake8

Co-authored-by: ale-rt &lt;alessandro.pisa@gmail.com&gt;

Files changed:
A news/975.bugfix
M src/plone/restapi/controlpanels/__init__.py

b"diff --git a/news/975.bugfix b/news/975.bugfix\nnew file mode 100644\nindex 000000000..64b2e101f\n--- /dev/null\n+++ b/news/975.bugfix\n@@ -0,0 +1,2 @@\n+Fix Plone 5.2.x deprecation message 'ILanguageSchema is deprecated'.\n+[timo]\n\\ No newline at end of file\ndiff --git a/src/plone/restapi/controlpanels/__init__.py b/src/plone/restapi/controlpanels/__init__.py\nindex 3461a3c36..8585ab2af 100644\n--- a/src/plone/restapi/controlpanels/__init__.py\n+++ b/src/plone/restapi/controlpanels/__init__.py\n@@ -3,7 +3,6 @@\n from Products.CMFPlone.interfaces.controlpanel import IDateAndTimeSchema\n from Products.CMFPlone.interfaces.controlpanel import IEditingSchema\n from Products.CMFPlone.interfaces.controlpanel import IImagingSchema\n-from Products.CMFPlone.interfaces.controlpanel import ILanguageSchema\n from Products.CMFPlone.interfaces.controlpanel import IMailSchema\n from Products.CMFPlone.interfaces.controlpanel import IMarkupSchema\n from Products.CMFPlone.interfaces.controlpanel import INavigationSchema\n@@ -17,6 +16,11 @@\n from zope.publisher.interfaces import NotFound\n from plone.restapi.controlpanels.interfaces import IControlpanel\n \n+try:\n+    from plone.i18n.interfaces import ILanguageSchema\n+except ImportError:  # pragma: no cover\n+    from Products.CMFPlone.interfaces.controlpanel import ILanguageSchema\n+\n \n @implementer(IControlpanel)\n class RegistryConfigletPanel(object):\n"

