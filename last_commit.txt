Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-10-25T14:04:17+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/98dc3661009679dcca01618c3b8d6b618946db5b

Fix problem when adding a Plone site with a custom INonInstallable utility without a getNonInstallableProfiles method.

Fixes: #3862.

Files changed:
A news/3862.bugfix
M Products/CMFPlone/browser/admin.py

b'diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py\nindex 679c160383..44714defb8 100644\n--- a/Products/CMFPlone/browser/admin.py\n+++ b/Products/CMFPlone/browser/admin.py\n@@ -176,7 +176,11 @@ def profiles(self):\n         ]\n         utils = getAllUtilitiesRegisteredFor(INonInstallable)\n         for util in utils:\n-            not_installable.extend(util.getNonInstallableProfiles())\n+            not_installable.extend(\n+                util.getNonInstallableProfiles()\n+                if hasattr(util, "getNonInstallableProfiles")\n+                else []\n+            )\n \n         for info in profile_registry.listProfileInfo():\n             if info.get("type") == EXTENSION and info.get("for") in (\ndiff --git a/news/3862.bugfix b/news/3862.bugfix\nnew file mode 100644\nindex 0000000000..a9e0e6be6d\n--- /dev/null\n+++ b/news/3862.bugfix\n@@ -0,0 +1,3 @@\n+Fix problem when adding a Plone site with a custom INonInstallable utility without a getNonInstallableProfiles method.\n+\n+Fixes: #3862.\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-10-25T17:04:36+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/98e53c405b2f2a916594b0db15b17c36a71d6ee8

Merge pull request #3868 from plone/fix-addsite-no-getnoninstallableprofiles-60

Fix problem when adding a Plone site with a custom INonInstallable utâ€¦

Files changed:
A news/3862.bugfix
M Products/CMFPlone/browser/admin.py

b'diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py\nindex 679c160383..44714defb8 100644\n--- a/Products/CMFPlone/browser/admin.py\n+++ b/Products/CMFPlone/browser/admin.py\n@@ -176,7 +176,11 @@ def profiles(self):\n         ]\n         utils = getAllUtilitiesRegisteredFor(INonInstallable)\n         for util in utils:\n-            not_installable.extend(util.getNonInstallableProfiles())\n+            not_installable.extend(\n+                util.getNonInstallableProfiles()\n+                if hasattr(util, "getNonInstallableProfiles")\n+                else []\n+            )\n \n         for info in profile_registry.listProfileInfo():\n             if info.get("type") == EXTENSION and info.get("for") in (\ndiff --git a/news/3862.bugfix b/news/3862.bugfix\nnew file mode 100644\nindex 0000000000..a9e0e6be6d\n--- /dev/null\n+++ b/news/3862.bugfix\n@@ -0,0 +1,3 @@\n+Fix problem when adding a Plone site with a custom INonInstallable utility without a getNonInstallableProfiles method.\n+\n+Fixes: #3862.\n'

