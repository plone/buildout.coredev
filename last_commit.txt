Repository: plone.app.event


Branch: refs/heads/master
Date: 2024-08-14T14:31:02+02:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/76ed96879ed514946dbe68cbb35d40d44f8199af

Fix imports of widgets

Files changed:
M plone/app/event/dx/behaviors.py

b'diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py\nindex 95de9aa3..1f503cf6 100644\n--- a/plone/app/event/dx/behaviors.py\n+++ b/plone/app/event/dx/behaviors.py\n@@ -15,7 +15,9 @@\n from plone.app.event.dx.interfaces import IDXEvent\n from plone.app.event.dx.interfaces import IDXEventRecurrence\n from plone.app.textfield.value import RichTextValue\n-from plone.app.z3cform.widget import DatetimeFieldWidget\n+from plone.app.z3cform.widgets.datetime import DatetimeFieldWidget\n+from plone.app.z3cform.widgets.text import TextFieldWidget\n+from plone.app.z3cform.widgets.text import TextLinesFieldWidget\n from plone.autoform import directives\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.base.utils import safe_text\n@@ -28,8 +30,6 @@\n from plone.supermodel import model\n from plone.uuid.interfaces import IUUID\n from z3c.form.browser.checkbox import SingleCheckBoxFieldWidget\n-from z3c.form.browser.text import TextFieldWidget\n-from z3c.form.browser.textlines import TextLinesFieldWidget\n from zope import schema\n from zope.component import adapter\n from zope.globalrequest import getRequest\n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2024-08-14T14:31:11+02:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/5f706243847a3167b7454b6e333e070e82ad931c

add news

Files changed:
A news/396.bugfix

b'diff --git a/news/396.bugfix b/news/396.bugfix\nnew file mode 100644\nindex 000000000..68e959c90\n--- /dev/null\n+++ b/news/396.bugfix\n@@ -0,0 +1 @@\n+use widgets for behavior fields from `plone.app.z3cform` to make the formfields BS5 ready [1letter]\n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2024-08-14T15:27:07+02:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/733ee57196376e9c8cf2f1151fcf49497431f801

Fix imports, switch between Plon 6.1 and lower versions

Files changed:
M plone/app/event/dx/behaviors.py

b'diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py\nindex 1f503cf6..fd04d6ec 100644\n--- a/plone/app/event/dx/behaviors.py\n+++ b/plone/app/event/dx/behaviors.py\n@@ -16,8 +16,6 @@\n from plone.app.event.dx.interfaces import IDXEventRecurrence\n from plone.app.textfield.value import RichTextValue\n from plone.app.z3cform.widgets.datetime import DatetimeFieldWidget\n-from plone.app.z3cform.widgets.text import TextFieldWidget\n-from plone.app.z3cform.widgets.text import TextLinesFieldWidget\n from plone.autoform import directives\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.base.utils import safe_text\n@@ -41,6 +39,23 @@\n from zope.schema.interfaces import IContextAwareDefaultFactory\n \n \n+try:\n+    # Import fails for Plone < 6.1\n+    # version pin of plone.app.z3cform is set to plone.app.z3cform==4.3.2\n+    # TextLinesFieldWidget is introduced in plone.app.z3cform==4.4.0\n+    from plone.app.z3cform.widgets.text import TextFieldWidget\n+except ImportError:\n+    from z3c.form.browser.text import TextFieldWidget\n+\n+try:\n+    # Import fails for Plone < 6.1\n+    # version pin of plone.app.z3cform is set to plone.app.z3cform==4.3.2\n+    # TextLinesFieldWidget is introduced in plone.app.z3cform==4.4.0\n+    from z3c.form.browser.textlines import TextLinesFieldWidget\n+except ImportError:\n+    from z3c.form.browser.textlines import TextLinesFieldWidget\n+\n+\n def first_weekday_sun0():\n     return wkday_to_mon1(first_weekday())\n \n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2024-08-19T15:49:56+02:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/b5df68283fd1fbc9ea74cbec4880849f2c4f96f6

fix import

Files changed:
M plone/app/event/dx/behaviors.py

b'diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py\nindex fd04d6ec..d29addf2 100644\n--- a/plone/app/event/dx/behaviors.py\n+++ b/plone/app/event/dx/behaviors.py\n@@ -51,7 +51,7 @@\n     # Import fails for Plone < 6.1\n     # version pin of plone.app.z3cform is set to plone.app.z3cform==4.3.2\n     # TextLinesFieldWidget is introduced in plone.app.z3cform==4.4.0\n-    from z3c.form.browser.textlines import TextLinesFieldWidget\n+    from plone.app.z3cform.widgets.textlines import TextLinesFieldWidget\n except ImportError:\n     from z3c.form.browser.textlines import TextLinesFieldWidget\n \n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2024-08-19T16:38:57+02:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/0d2079c8dcce8c30c8bdb8789aa725291a6c869f

Merge pull request #403 from plone/fix-#396

Fix #396

Files changed:
A news/396.bugfix
M plone/app/event/dx/behaviors.py

b'diff --git a/news/396.bugfix b/news/396.bugfix\nnew file mode 100644\nindex 000000000..68e959c90\n--- /dev/null\n+++ b/news/396.bugfix\n@@ -0,0 +1 @@\n+use widgets for behavior fields from `plone.app.z3cform` to make the formfields BS5 ready [1letter]\ndiff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py\nindex 95de9aa3c..d29addf24 100644\n--- a/plone/app/event/dx/behaviors.py\n+++ b/plone/app/event/dx/behaviors.py\n@@ -15,7 +15,7 @@\n from plone.app.event.dx.interfaces import IDXEvent\n from plone.app.event.dx.interfaces import IDXEventRecurrence\n from plone.app.textfield.value import RichTextValue\n-from plone.app.z3cform.widget import DatetimeFieldWidget\n+from plone.app.z3cform.widgets.datetime import DatetimeFieldWidget\n from plone.autoform import directives\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.base.utils import safe_text\n@@ -28,8 +28,6 @@\n from plone.supermodel import model\n from plone.uuid.interfaces import IUUID\n from z3c.form.browser.checkbox import SingleCheckBoxFieldWidget\n-from z3c.form.browser.text import TextFieldWidget\n-from z3c.form.browser.textlines import TextLinesFieldWidget\n from zope import schema\n from zope.component import adapter\n from zope.globalrequest import getRequest\n@@ -41,6 +39,23 @@\n from zope.schema.interfaces import IContextAwareDefaultFactory\n \n \n+try:\n+    # Import fails for Plone < 6.1\n+    # version pin of plone.app.z3cform is set to plone.app.z3cform==4.3.2\n+    # TextLinesFieldWidget is introduced in plone.app.z3cform==4.4.0\n+    from plone.app.z3cform.widgets.text import TextFieldWidget\n+except ImportError:\n+    from z3c.form.browser.text import TextFieldWidget\n+\n+try:\n+    # Import fails for Plone < 6.1\n+    # version pin of plone.app.z3cform is set to plone.app.z3cform==4.3.2\n+    # TextLinesFieldWidget is introduced in plone.app.z3cform==4.4.0\n+    from plone.app.z3cform.widgets.textlines import TextLinesFieldWidget\n+except ImportError:\n+    from z3c.form.browser.textlines import TextLinesFieldWidget\n+\n+\n def first_weekday_sun0():\n     return wkday_to_mon1(first_weekday())\n \n'

