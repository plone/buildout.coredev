Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-03-16T09:59:47+01:00
Author: Jens Vagelpohl (dataflake) <jens@netz.ooo>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/37b68d3278d6cbb6812ece561b0eb1d88d591d24

- add support for Python 3.9 and parallelized tox runs

Files changed:
A news/164.feature
M .github/workflows/testing.yml
M .gitignore
M setup.py
M src/plone/recipe/zope2instance/ctl.py
M tox.ini

b'diff --git a/.github/workflows/testing.yml b/.github/workflows/testing.yml\nindex b6ab5f8..436bd3b 100644\n--- a/.github/workflows/testing.yml\n+++ b/.github/workflows/testing.yml\n@@ -11,6 +11,7 @@ jobs:\n         - "3.6"\n         - "3.7"\n         - "3.8"\n+        - "3.9"\n         zope-version:\n         - "zope-4"\n         - "zope-5"\n@@ -22,6 +23,8 @@ jobs:\n           python-version: "2.7"\n         - zope-version: "zope-5"\n           python-version: "2.7"\n+        - zope-version: "zope-4"\n+          python-version: "3.9"\n     runs-on: ${{ matrix.os }}\n     steps:\n       - uses: actions/checkout@v2\ndiff --git a/.gitignore b/.gitignore\nindex 7c98ef7..3ae8b35 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -14,7 +14,9 @@ parts\n pip-selfcheck.json\n pyvenv.cfg\n /.coverage\n+/.coverage.*\n /.installed.cfg\n /.tox\n /coverage.xml\n+/default.profraw\n /htmlcov\ndiff --git a/news/164.feature b/news/164.feature\nnew file mode 100644\nindex 0000000..ea72001\n--- /dev/null\n+++ b/news/164.feature\n@@ -0,0 +1,2 @@\n+Added support for Python 3.9\n+[dataflake]\ndiff --git a/setup.py b/setup.py\nindex 6dbc7ab..7f53da6 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -34,12 +34,14 @@\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n+        "Programming Language :: Python :: 3.9",\n         "Programming Language :: Python :: Implementation :: CPython",\n     ],\n     packages=find_packages(\'src\'),\n     include_package_data=True,\n     package_dir={\'\': \'src\'},\n     namespace_packages=[\'plone\', \'plone.recipe\'],\n+    python_requires=\'>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*\',\n     install_requires=[\n         \'zc.buildout\',\n         \'setuptools\',\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 35ecd90..75ae39c 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -955,7 +955,8 @@ def main(args=None):\n \n     if (os.environ.get(\'PLONE_ENV\')):\n         PLONE_ENV = os.environ.get(\'PLONE_ENV\')\n-        load_dotenv(os.path.join(options.directory, \'..\', \'..\', \'.env.{}\'.format(PLONE_ENV)))\n+        load_dotenv(os.path.join(options.directory,\n+                                 \'..\', \'..\', \'.env.{}\'.format(PLONE_ENV)))\n \n     # Run the right command depending on whether we have ZServer\n     options.interpreter = os.path.join(options.directory, \'bin\', \'interpreter\')\ndiff --git a/tox.ini b/tox.ini\nindex c2cf917..8381dba 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -4,6 +4,7 @@ envlist =\n     py36,\n     py37,\n     py38,\n+    py39,\n     flake8,\n     coverage\n \n@@ -25,6 +26,12 @@ setenv =\n basepython = python2.7\n skip_install = true\n deps = coverage\n+depends =\n+    py27\n+    py36\n+    py37\n+    py38\n+    py39\n setenv =\n     COVERAGE_FILE=.coverage\n commands =\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-03-16T10:07:33+01:00
Author: Jens Vagelpohl (dataflake) <jens@netz.ooo>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/68bb2e64c26c4a5a59d8dff58ad83bb26061fca5

- install wheel during test runs to minimize self-compiling

Files changed:
M .github/workflows/testing.yml

b'diff --git a/.github/workflows/testing.yml b/.github/workflows/testing.yml\nindex 436bd3b..67bc50c 100644\n--- a/.github/workflows/testing.yml\n+++ b/.github/workflows/testing.yml\n@@ -42,7 +42,7 @@ jobs:\n             ${{ runner.os }}-test\n       - name: Install dependencies\n         run: |\n-          pip install -U pip\n+          pip install -U pip wheel\n           pip install -r requirements-testing-${{ matrix.zope-version }}.txt\n       - name: Run Tests\n         run: |\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-03-16T16:13:30+01:00
Author: Jens Vagelpohl (dataflake) <jens@netz.ooo>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/b46a4fca448c392f48c9208c95dfb768319cc7ed

- restore support for Python 3.5, which is needed for full Zope 4 support

Files changed:
M .github/workflows/testing.yml
M README.rst
M news/164.feature
M setup.py
M tox.ini

b'diff --git a/.github/workflows/testing.yml b/.github/workflows/testing.yml\nindex 67bc50c..913e23d 100644\n--- a/.github/workflows/testing.yml\n+++ b/.github/workflows/testing.yml\n@@ -8,6 +8,7 @@ jobs:\n       matrix:\n         python-version:\n         - "2.7"\n+        - "3.5"\n         - "3.6"\n         - "3.7"\n         - "3.8"\n@@ -23,6 +24,8 @@ jobs:\n           python-version: "2.7"\n         - zope-version: "zope-5"\n           python-version: "2.7"\n+        - zope-version: "zope-5"\n+          python-version: "3.5"\n         - zope-version: "zope-4"\n           python-version: "3.9"\n     runs-on: ${{ matrix.os }}\ndiff --git a/README.rst b/README.rst\nindex 6597ce9..592523c 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -27,8 +27,9 @@ You can use it with a part like this::\n   zcml = my.distribution\n \n .. ATTENTION::\n-   This release is targeted at Plone 5.2, ZODB 5, Zope 4, and Python 2.7, 3.6 or 3.7.\n-   If you are using this recipe with earlier versions, you should use one of the releases from the 4.x series.\n+   This release is targeted at Plone 5.2, ZODB 5, Zope 4 and Zope 5, and\n+   Python 2.7 and 3.5-3.9. If you are using this recipe with earlier versions,\n+   you should use one of the releases from the 4.x series.\n \n \n .. contents:: **Contents**\ndiff --git a/news/164.feature b/news/164.feature\nindex ea72001..c4ef3af 100644\n--- a/news/164.feature\n+++ b/news/164.feature\n@@ -1,2 +1,2 @@\n-Added support for Python 3.9\n+Added support for Python 3.9 and restored support for Python 3.5 (needed for Zope 4)\n [dataflake]\ndiff --git a/setup.py b/setup.py\nindex 7f53da6..cd647d8 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -31,6 +31,7 @@\n         "Programming Language :: Python :: 2",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3",\n+        "Programming Language :: Python :: 3.5",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\ndiff --git a/tox.ini b/tox.ini\nindex 8381dba..fa62b55 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,7 @@\n [tox]\n envlist =\n     py27,\n+    py35,\n     py36,\n     py37,\n     py38,\n@@ -28,6 +29,7 @@ skip_install = true\n deps = coverage\n depends =\n     py27\n+    py35\n     py36\n     py37\n     py38\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-03-16T16:44:36+01:00
Author: Jens Vagelpohl (dataflake) <jens@netz.ooo>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/1ce67814ddca1bfaf8d00726b1fa7bc6460d0faa

- remove GitHub Actions test for Python 3.5 as experiment

Files changed:
M .github/workflows/testing.yml

b'diff --git a/.github/workflows/testing.yml b/.github/workflows/testing.yml\nindex 913e23d..67bc50c 100644\n--- a/.github/workflows/testing.yml\n+++ b/.github/workflows/testing.yml\n@@ -8,7 +8,6 @@ jobs:\n       matrix:\n         python-version:\n         - "2.7"\n-        - "3.5"\n         - "3.6"\n         - "3.7"\n         - "3.8"\n@@ -24,8 +23,6 @@ jobs:\n           python-version: "2.7"\n         - zope-version: "zope-5"\n           python-version: "2.7"\n-        - zope-version: "zope-5"\n-          python-version: "3.5"\n         - zope-version: "zope-4"\n           python-version: "3.9"\n     runs-on: ${{ matrix.os }}\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2021-03-16T23:23:33+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/b60a84d7210764383c0bfa15d4908358d0f89d90

Merge pull request #165 from plone/dataflake/py39

Add support for Python 3.9 and parallelized tox runs

Files changed:
A news/164.feature
M .github/workflows/testing.yml
M .gitignore
M README.rst
M setup.py
M src/plone/recipe/zope2instance/ctl.py
M tox.ini

b'diff --git a/.github/workflows/testing.yml b/.github/workflows/testing.yml\nindex b6ab5f8..67bc50c 100644\n--- a/.github/workflows/testing.yml\n+++ b/.github/workflows/testing.yml\n@@ -11,6 +11,7 @@ jobs:\n         - "3.6"\n         - "3.7"\n         - "3.8"\n+        - "3.9"\n         zope-version:\n         - "zope-4"\n         - "zope-5"\n@@ -22,6 +23,8 @@ jobs:\n           python-version: "2.7"\n         - zope-version: "zope-5"\n           python-version: "2.7"\n+        - zope-version: "zope-4"\n+          python-version: "3.9"\n     runs-on: ${{ matrix.os }}\n     steps:\n       - uses: actions/checkout@v2\n@@ -39,7 +42,7 @@ jobs:\n             ${{ runner.os }}-test\n       - name: Install dependencies\n         run: |\n-          pip install -U pip\n+          pip install -U pip wheel\n           pip install -r requirements-testing-${{ matrix.zope-version }}.txt\n       - name: Run Tests\n         run: |\ndiff --git a/.gitignore b/.gitignore\nindex 7c98ef7..3ae8b35 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -14,7 +14,9 @@ parts\n pip-selfcheck.json\n pyvenv.cfg\n /.coverage\n+/.coverage.*\n /.installed.cfg\n /.tox\n /coverage.xml\n+/default.profraw\n /htmlcov\ndiff --git a/README.rst b/README.rst\nindex 6597ce9..592523c 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -27,8 +27,9 @@ You can use it with a part like this::\n   zcml = my.distribution\n \n .. ATTENTION::\n-   This release is targeted at Plone 5.2, ZODB 5, Zope 4, and Python 2.7, 3.6 or 3.7.\n-   If you are using this recipe with earlier versions, you should use one of the releases from the 4.x series.\n+   This release is targeted at Plone 5.2, ZODB 5, Zope 4 and Zope 5, and\n+   Python 2.7 and 3.5-3.9. If you are using this recipe with earlier versions,\n+   you should use one of the releases from the 4.x series.\n \n \n .. contents:: **Contents**\ndiff --git a/news/164.feature b/news/164.feature\nnew file mode 100644\nindex 0000000..c4ef3af\n--- /dev/null\n+++ b/news/164.feature\n@@ -0,0 +1,2 @@\n+Added support for Python 3.9 and restored support for Python 3.5 (needed for Zope 4)\n+[dataflake]\ndiff --git a/setup.py b/setup.py\nindex 6dbc7ab..cd647d8 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -31,15 +31,18 @@\n         "Programming Language :: Python :: 2",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3",\n+        "Programming Language :: Python :: 3.5",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n+        "Programming Language :: Python :: 3.9",\n         "Programming Language :: Python :: Implementation :: CPython",\n     ],\n     packages=find_packages(\'src\'),\n     include_package_data=True,\n     package_dir={\'\': \'src\'},\n     namespace_packages=[\'plone\', \'plone.recipe\'],\n+    python_requires=\'>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*\',\n     install_requires=[\n         \'zc.buildout\',\n         \'setuptools\',\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 35ecd90..75ae39c 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -955,7 +955,8 @@ def main(args=None):\n \n     if (os.environ.get(\'PLONE_ENV\')):\n         PLONE_ENV = os.environ.get(\'PLONE_ENV\')\n-        load_dotenv(os.path.join(options.directory, \'..\', \'..\', \'.env.{}\'.format(PLONE_ENV)))\n+        load_dotenv(os.path.join(options.directory,\n+                                 \'..\', \'..\', \'.env.{}\'.format(PLONE_ENV)))\n \n     # Run the right command depending on whether we have ZServer\n     options.interpreter = os.path.join(options.directory, \'bin\', \'interpreter\')\ndiff --git a/tox.ini b/tox.ini\nindex c2cf917..fa62b55 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,9 +1,11 @@\n [tox]\n envlist =\n     py27,\n+    py35,\n     py36,\n     py37,\n     py38,\n+    py39,\n     flake8,\n     coverage\n \n@@ -25,6 +27,13 @@ setenv =\n basepython = python2.7\n skip_install = true\n deps = coverage\n+depends =\n+    py27\n+    py35\n+    py36\n+    py37\n+    py38\n+    py39\n setenv =\n     COVERAGE_FILE=.coverage\n commands =\n'

