Repository: plone.app.caching


Branch: refs/heads/master
Date: 2024-01-19T15:10:16+01:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.caching/commit/e23950d9ea24df782848ee0d2f83366eba42a9e0

change adapter registration to IDexterityContent

Files changed:
A news/136.bugfix
M plone/app/caching/purge.py

b'diff --git a/news/136.bugfix b/news/136.bugfix\nnew file mode 100644\nindex 0000000..0da2ed4\n--- /dev/null\n+++ b/news/136.bugfix\n@@ -0,0 +1,3 @@\n+Change PurgePath adapter registration to IDexterityContent\n+[erral]\n+\ndiff --git a/plone/app/caching/purge.py b/plone/app/caching/purge.py\nindex dbfe0ca..d5a92ed 100644\n--- a/plone/app/caching/purge.py\n+++ b/plone/app/caching/purge.py\n@@ -3,7 +3,7 @@\n from plone.app.caching.utils import isPurged\n from plone.cachepurging.interfaces import IPurgePathRewriter\n from plone.dexterity.content import get_assignable\n-from plone.dexterity.interfaces import IDexteritySchema\n+from plone.dexterity.interfaces import IDexterityContent\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.memoize.instance import memoize\n from plone.namedfile.interfaces import INamedBlobFileField\n@@ -172,7 +172,7 @@ def _getRoot(self):\n \n \n @implementer(IPurgePaths)\n-@adapter(IDexteritySchema)\n+@adapter(IDexterityContent)\n class ScalesPurgePaths:\n     """Paths to purge for Dexterity object fields"""\n \n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2024-02-07T19:41:20+01:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.caching/commit/af01365e701620b16e07a586a60cd4be4fbdcb60

Update news/136.bugfix

Co-authored-by: David Glick &lt;david.glick@plone.org&gt;

Files changed:
M news/136.bugfix

b'diff --git a/news/136.bugfix b/news/136.bugfix\nindex 0da2ed4..9f21de1 100644\n--- a/news/136.bugfix\n+++ b/news/136.bugfix\n@@ -1,3 +1,3 @@\n-Change PurgePath adapter registration to IDexterityContent\n+Fix purging of image scale paths for Dexterity content.\n [erral]\n \n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2024-02-07T21:36:49-08:00
Author: David Glick (davisagli) <david.glick@plone.org>
Commit: https://github.com/plone/plone.app.caching/commit/31efee7b774fe117147a9343b0d7edab23c006ac

Merge pull request #137 from plone/erral-issue-136

change download and images view purge path adapter registration to IDexterityContent

Files changed:
A news/136.bugfix
M plone/app/caching/purge.py

b'diff --git a/news/136.bugfix b/news/136.bugfix\nnew file mode 100644\nindex 0000000..9f21de1\n--- /dev/null\n+++ b/news/136.bugfix\n@@ -0,0 +1,3 @@\n+Fix purging of image scale paths for Dexterity content.\n+[erral]\n+\ndiff --git a/plone/app/caching/purge.py b/plone/app/caching/purge.py\nindex dbfe0ca..d5a92ed 100644\n--- a/plone/app/caching/purge.py\n+++ b/plone/app/caching/purge.py\n@@ -3,7 +3,7 @@\n from plone.app.caching.utils import isPurged\n from plone.cachepurging.interfaces import IPurgePathRewriter\n from plone.dexterity.content import get_assignable\n-from plone.dexterity.interfaces import IDexteritySchema\n+from plone.dexterity.interfaces import IDexterityContent\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.memoize.instance import memoize\n from plone.namedfile.interfaces import INamedBlobFileField\n@@ -172,7 +172,7 @@ def _getRoot(self):\n \n \n @implementer(IPurgePaths)\n-@adapter(IDexteritySchema)\n+@adapter(IDexterityContent)\n class ScalesPurgePaths:\n     """Paths to purge for Dexterity object fields"""\n \n'

