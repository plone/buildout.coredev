Repository: five.intid


Branch: refs/heads/master
Date: 2020-04-26T11:33:20+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/five.intid/commit/cc236ead2484340e11106a7c4a0edd8f3334ae93

fix deprecations and polish setup.py

Files changed:
M five/intid/README.rst
M five/intid/keyreference.py
M five/intid/site.py
M setup.py

b'diff --git a/five/intid/README.rst b/five/intid/README.rst\nindex c7ad47c..db340ae 100644\n--- a/five/intid/README.rst\n+++ b/five/intid/README.rst\n@@ -11,7 +11,7 @@ First, let make sure the ofs utility provides the interface::\n     >>> import five.intid.tests as tests\n     >>> from zope.interface.verify import verifyObject\n     >>> from zope.component import getAllUtilitiesRegisteredFor\n-    >>> from zope.site.hooks import setSite\n+    >>> from zope.component.hooks import setSite\n     >>> tests.setUp(self.app)\n \n \ndiff --git a/five/intid/keyreference.py b/five/intid/keyreference.py\nindex 744b41f..f0706f9 100644\n--- a/five/intid/keyreference.py\n+++ b/five/intid/keyreference.py\n@@ -6,7 +6,7 @@\n from ZPublisher.BaseRequest import RequestContainer\n from persistent import IPersistent\n from zope.component import adapter\n-from zope.site.hooks import getSite\n+from zope.component.hooks import getSite\n from zope.interface import implementer\n from zope.keyreference.interfaces import NotYet\n from zope.keyreference.interfaces import IKeyReference\ndiff --git a/five/intid/site.py b/five/intid/site.py\nindex c08d9a9..9ebcd48 100644\n--- a/five/intid/site.py\n+++ b/five/intid/site.py\n@@ -7,9 +7,9 @@\n from OFS.interfaces import IApplication\n from Products.Five import BrowserView\n from zope.component import getUtility, getSiteManager\n-from zope.component.interfaces import ComponentLookupError\n+from zope.interface.interfaces import ComponentLookupError\n from zope.location.interfaces import ISite\n-from zope.site.hooks import setSite, setHooks\n+from zope.component.hooks import setSite, setHooks\n \n \n class FiveIntIdsInstall(BrowserView):\ndiff --git a/setup.py b/setup.py\nindex 26e6604..793b1c0 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -10,10 +10,11 @@\n longdescripton += "\\n\\n"\n longdescripton += open("CHANGES.rst").read()\n \n+\n setup(\n     name=\'five.intid\',\n     version=version,\n-    description="Zope2 support for zope.intid",\n+    description="Zope support for zope.intid",\n     long_description=longdescripton,\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n@@ -24,6 +25,7 @@\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n+        "Programming Language :: Python :: 3.8",\n     ],\n     keywords="\'zope2 intid\'",\n     author=\'Whit Morris\',\n@@ -43,9 +45,9 @@\n         \'zope.interface\',\n         \'zope.lifecycleevent\',\n         \'zope.keyreference\',\n-        \'zope.site\',\n         \'zope.location\',\n         \'five.localsitemanager\',\n-        \'Zope2 >= 2.13\',\n+        \'Zope2 >= 2.13;python_version=="2.7"\',\n+        \'Zope >= 4;python_version>="3.6"\',\n     ],\n )\n'

