Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-02-09T17:48:57+01:00
Author: Víctor Fernández de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/293e859a6f6ad6596a455448a46d08864acf7f6f

Remove escape from @navigation endpoint (#1062)

Files changed:
A news/1061.bugfix
M src/plone/restapi/services/navigation/get.py

b'diff --git a/news/1061.bugfix b/news/1061.bugfix\nnew file mode 100644\nindex 000000000..d45b8ff62\n--- /dev/null\n+++ b/news/1061.bugfix\n@@ -0,0 +1,2 @@\n+- Remove ``escape``\'d titles\n+  [sneridagh]\ndiff --git a/src/plone/restapi/services/navigation/get.py b/src/plone/restapi/services/navigation/get.py\nindex 35b8694f6..b4799b33d 100644\n--- a/src/plone/restapi/services/navigation/get.py\n+++ b/src/plone/restapi/services/navigation/get.py\n@@ -27,11 +27,6 @@\n     # BBB for Plone 4.x, remove with plone.restapi 8 / Plone 6\n     from plone.app.controlpanel.navigation import INavigationSchema\n \n-try:\n-    from html import escape\n-except ImportError:\n-    from cgi import escape\n-\n \n @implementer(IExpandableElement)\n @adapter(Interface, Interface)\n@@ -199,7 +194,7 @@ def render_item(self, item, path):\n         item.update({"items": sub})\n \n         if "title" in item and item["title"]:\n-            item["title"] = escape(item["title"])\n+            item["title"] = item["title"]\n         if "path" in item:\n             del item["path"]\n         return item\n'

