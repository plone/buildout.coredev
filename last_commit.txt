Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2020-09-02T23:32:57+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFFormController/commit/24f5fe45bbaa5bd65688c9893de987615fdf2424

Removed security declaration for nonexistent method ZPythonScriptHTML_changePrefs.

Warnings on startup:

```
Class Products.CMFFormController.ControllerPythonScript.ControllerPythonScript has a security declaration for nonexistent method 'ZPythonScriptHTML_changePrefs'
Class Products.CMFFormController.ControllerValidator.ControllerValidator has a security declaration for nonexistent method 'ZPythonScriptHTML_changePrefs'
```

This method was removed from `Products.PythonScripts` in version 4.2, from October 2018.
Added `Products.PythonScripts&gt;=4.2` as dependency.

Files changed:
A news/3130.bugfix
M Products/CMFFormController/ControllerPythonScript.py
M Products/CMFFormController/ControllerValidator.py
M setup.py

b"diff --git a/Products/CMFFormController/ControllerPythonScript.py b/Products/CMFFormController/ControllerPythonScript.py\nindex 50cadad..ec3c805 100644\n--- a/Products/CMFFormController/ControllerPythonScript.py\n+++ b/Products/CMFFormController/ControllerPythonScript.py\n@@ -127,7 +127,7 @@ class ControllerPythonScript(BaseClass, ControllerBase):\n     security.declareProtected('Change Python Scripts',\n       'ZPythonScriptHTML_editAction',\n       'ZPythonScript_setTitle', 'ZPythonScript_edit',\n-      'ZPythonScriptHTML_upload', 'ZPythonScriptHTML_changePrefs')\n+      'ZPythonScriptHTML_upload')\n \n \n     def __init__(self, *args, **kwargs):\ndiff --git a/Products/CMFFormController/ControllerValidator.py b/Products/CMFFormController/ControllerValidator.py\nindex 99fa1b3..b1e7a1d 100644\n--- a/Products/CMFFormController/ControllerValidator.py\n+++ b/Products/CMFFormController/ControllerValidator.py\n@@ -116,7 +116,7 @@ class ControllerValidator(BaseClass, ControllerBase):\n     security.declareProtected('Change Python Scripts',\n       'ZPythonScriptHTML_editAction',\n       'ZPythonScript_setTitle', 'ZPythonScript_edit',\n-      'ZPythonScriptHTML_upload', 'ZPythonScriptHTML_changePrefs')\n+      'ZPythonScriptHTML_upload')\n \n \n     def __init__(self, *args, **kwargs):\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..2311e20\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,4 @@\n+Removed security declaration for nonexistent method ``ZPythonScriptHTML_changePrefs``.\n+This method was removed from ``Products.PythonScripts`` in version 4.2, from October 2018.\n+Added ``Products.PythonScripts>=4.2`` as dependency.\n+[maurits]\ndiff --git a/setup.py b/setup.py\nindex d0e5b95..10393e1 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -49,5 +49,6 @@\n         'Acquisition',\n         'transaction',\n         'Zope2>=4.0.a2',\n+        'Products.PythonScripts>=4.2',\n     ],\n )\n"

Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2020-09-03T01:14:40+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFFormController/commit/58d321506b51528dc0f8c20f2a9b7c2e6f0934a0

Merge pull request #24 from plone/maurits/fix-warnings

Removed security declaration for nonexistent method

Files changed:
A news/3130.bugfix
M Products/CMFFormController/ControllerPythonScript.py
M Products/CMFFormController/ControllerValidator.py
M setup.py

b"diff --git a/Products/CMFFormController/ControllerPythonScript.py b/Products/CMFFormController/ControllerPythonScript.py\nindex 50cadad..ec3c805 100644\n--- a/Products/CMFFormController/ControllerPythonScript.py\n+++ b/Products/CMFFormController/ControllerPythonScript.py\n@@ -127,7 +127,7 @@ class ControllerPythonScript(BaseClass, ControllerBase):\n     security.declareProtected('Change Python Scripts',\n       'ZPythonScriptHTML_editAction',\n       'ZPythonScript_setTitle', 'ZPythonScript_edit',\n-      'ZPythonScriptHTML_upload', 'ZPythonScriptHTML_changePrefs')\n+      'ZPythonScriptHTML_upload')\n \n \n     def __init__(self, *args, **kwargs):\ndiff --git a/Products/CMFFormController/ControllerValidator.py b/Products/CMFFormController/ControllerValidator.py\nindex 99fa1b3..b1e7a1d 100644\n--- a/Products/CMFFormController/ControllerValidator.py\n+++ b/Products/CMFFormController/ControllerValidator.py\n@@ -116,7 +116,7 @@ class ControllerValidator(BaseClass, ControllerBase):\n     security.declareProtected('Change Python Scripts',\n       'ZPythonScriptHTML_editAction',\n       'ZPythonScript_setTitle', 'ZPythonScript_edit',\n-      'ZPythonScriptHTML_upload', 'ZPythonScriptHTML_changePrefs')\n+      'ZPythonScriptHTML_upload')\n \n \n     def __init__(self, *args, **kwargs):\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..2311e20\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,4 @@\n+Removed security declaration for nonexistent method ``ZPythonScriptHTML_changePrefs``.\n+This method was removed from ``Products.PythonScripts`` in version 4.2, from October 2018.\n+Added ``Products.PythonScripts>=4.2`` as dependency.\n+[maurits]\ndiff --git a/setup.py b/setup.py\nindex d0e5b95..10393e1 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -49,5 +49,6 @@\n         'Acquisition',\n         'transaction',\n         'Zope2>=4.0.a2',\n+        'Products.PythonScripts>=4.2',\n     ],\n )\n"

