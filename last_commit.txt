Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-05-31T06:19:46+02:00
Author: Fulvio Casali (fulv) <fulviocasali@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/3488814e576d771345301d4188c3950ad20b0600

Add note about metadata. (#954)

Files changed:
M docs/source/searching.rst

b'diff --git a/docs/source/searching.rst b/docs/source/searching.rst\nindex 731af2016..7fe31507f 100644\n--- a/docs/source/searching.rst\n+++ b/docs/source/searching.rst\n@@ -28,12 +28,12 @@ In order to return specific metadata columns, see the documentation of the ``met\n .. note::\n         A search invoked on a container will by default **include that container\n         itself** as part of the search results. This is the same behavior as displayed by\n-        ZCatalog, which is used internally.\n+        `ZCatalog <https://zope.readthedocs.io/en/latest/zopebook/SearchingZCatalog.html>`_, which is used internally.\n         If you add the query string\n         parameter ``depth=1`` to your search, you will only get **immediate**\n         children of the container, and the container itself also won\'t be part\n         of the results. See the Plone docs on\n-        `searching for content within a folder <https://docs.plone.org/develop/plone/searching_and_indexing/query.html#searching-for-content-within-a-folder>`_.\n+        `searching for content within a folder <https://docs.plone.org/develop/plone/searching_and_indexing/query.html#searching-for-content-within-a-folder>`_\n         for more details.\n \n .. note::\n@@ -44,7 +44,7 @@ In order to return specific metadata columns, see the documentation of the ``met\n .. warning::\n         The @@search view or the Plone LiveSearch widget are coded in a way that the SearchableText parameter is expanded by including a * wildcard at the end.\n         This is done in order to match also the partial results of the beginning of a search term(s).\n-        plone.restapi @search endpoint will not do that for you. You\'ll have to add it if you want to keep this feature.\n+        The plone.restapi @search endpoint will not do that for you. You\'ll have to add it if you want to keep this feature.\n \n \n Query format\n@@ -138,6 +138,14 @@ In order to specify multiple columns, simply repeat the query string parameter o\n \n In order to retrieve all metadata columns that the catalog knows about, use ``metadata_fields=_all``.\n \n+.. note::\n+        There is a difference between the full set of fields contained in an object and the set of all possible metadata columns that can be specified with ``metadata_fields``.\n+        In other words, using ``metadata_fields=_all`` will produce objects with a set of fields that is generally smaller than the set of fields produced by ``fullobjects`` (see next section).\n+        Briefly, the fields in ``metadata_fields=_all`` are a subset of ``fullobjects``.\n+        A consequence of this is that certain fields can not be specifed with ``metadata_fields``.\n+        Doing so will result in a TypeError ``"No converter for making <...> JSON compatible."``\n+        In `ZCatalog <https://zope.readthedocs.io/en/latest/zopebook/SearchingZCatalog.html>`_ terms, this reflects the difference between *catalog brains* and objects that have been *woken up*.\n+\n \n Retrieving full objects\n -----------------------\n@@ -154,4 +162,4 @@ You do so by specifying the ``fullobjects`` parameter:\n \n .. warning::\n \n-    Be aware that this might induce performance issues when retrieving a lot of resources. Normally the search just serializes catalog brains, but with full objects, we wake up all the returned objects.\n+    Be aware that this might induce performance issues when retrieving a lot of resources. Normally the search just serializes catalog brains, but with ``fullobjects``, we wake up all the returned objects.\n'

