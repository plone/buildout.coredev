Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-07-13T23:58:27+02:00
Author: Roel Bruggink (jaroel) <roel@jaroel.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/1debe0e4993d96847e55e70a78176ad158714203

Disable explicit acquisition in Plone &lt; 7.

Set PUBLISHING_EXPLICIT_ACQUISITION=true to opt-in.

Files changed:
M Products/CMFPlone/__init__.py

b'diff --git a/Products/CMFPlone/__init__.py b/Products/CMFPlone/__init__.py\nindex 1659c74b6e..0cd0969e63 100644\n--- a/Products/CMFPlone/__init__.py\n+++ b/Products/CMFPlone/__init__.py\n@@ -9,6 +9,9 @@\n \n __version__ = pkg_resources.require("Products.CMFPlone")[0].version\n \n+if __version__ < \'7\':\n+    from Products.CMFCore.explicitacquisition import PTA_ENV_KEY\n+    os.environ[PTA_ENV_KEY] = os.environ.get(PTA_ENV_KEY, \'false\')\n \n cmfplone_globals = globals()\n this_module = sys.modules[__name__]\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-07-13T23:58:40+02:00
Author: Roel Bruggink (jaroel) <roel@jaroel.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/4fce55c9f3231fd25aab874d8106d768942d1460

towncrier news item

Files changed:
A news/explicitacquisition.bugfix

b'diff --git a/news/explicitacquisition.bugfix b/news/explicitacquisition.bugfix\nnew file mode 100644\nindex 0000000000..4b10bdf121\n--- /dev/null\n+++ b/news/explicitacquisition.bugfix\n@@ -0,0 +1,2 @@\n+Enable Products.CMFCore.explicitacquisition in Plone 7+\n+[jaroel]\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-07-13T23:58:47+02:00
Author: Roel Bruggink (jaroel) <roel@jaroel.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/7383edc6779304413ef7b69879c572d2a975c0ed

Update news/explicitacquisition.bugfix

Co-authored-by: Maurits van Rees &lt;maurits@vanrees.org&gt;

Files changed:
M news/explicitacquisition.bugfix

b'diff --git a/news/explicitacquisition.bugfix b/news/explicitacquisition.bugfix\nindex 4b10bdf121..d8467e1d6e 100644\n--- a/news/explicitacquisition.bugfix\n+++ b/news/explicitacquisition.bugfix\n@@ -1,2 +1,2 @@\n-Enable Products.CMFCore.explicitacquisition in Plone 7+\n+Explicitly disable ``Products.CMFCore.explicitacquisition`` in Plone 6.\n [jaroel]\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-07-14T10:19:54+02:00
Author: Roel Bruggink (jaroel) <roel@jaroel.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/3673d1c4fb6b95343bb4bf347cf023507a351bd2

Merge pull request #3824 from plone/explicitacquisition-6.0.x

Explicitly disable ``Products.CMFCore.explicitacquisition`` in Plone 6.

Files changed:
A news/explicitacquisition.bugfix
M Products/CMFPlone/__init__.py

b'diff --git a/Products/CMFPlone/__init__.py b/Products/CMFPlone/__init__.py\nindex 1659c74b6e..0cd0969e63 100644\n--- a/Products/CMFPlone/__init__.py\n+++ b/Products/CMFPlone/__init__.py\n@@ -9,6 +9,9 @@\n \n __version__ = pkg_resources.require("Products.CMFPlone")[0].version\n \n+if __version__ < \'7\':\n+    from Products.CMFCore.explicitacquisition import PTA_ENV_KEY\n+    os.environ[PTA_ENV_KEY] = os.environ.get(PTA_ENV_KEY, \'false\')\n \n cmfplone_globals = globals()\n this_module = sys.modules[__name__]\ndiff --git a/news/explicitacquisition.bugfix b/news/explicitacquisition.bugfix\nnew file mode 100644\nindex 0000000000..d8467e1d6e\n--- /dev/null\n+++ b/news/explicitacquisition.bugfix\n@@ -0,0 +1,2 @@\n+Explicitly disable ``Products.CMFCore.explicitacquisition`` in Plone 6.\n+[jaroel]\n'

