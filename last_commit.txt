Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2022-08-06T19:28:25+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/00d3f0c4f770cca3afec9583c7ed870eb5833b21

change test to make sure email is sent in utf-8

Files changed:
M Products/CMFPlone/tests/testRegistrationTool.py

b'diff --git a/Products/CMFPlone/tests/testRegistrationTool.py b/Products/CMFPlone/tests/testRegistrationTool.py\nindex 0a922935f1..c2131b93ce 100644\n--- a/Products/CMFPlone/tests/testRegistrationTool.py\n+++ b/Products/CMFPlone/tests/testRegistrationTool.py\n@@ -243,7 +243,7 @@ def testMailPasswordEncoding(self):\n         mail_settings.email_from_address = \'bar@baz.com\'\n \n         # Set the portal email encoding\n-        mail_settings.email_charset = \'us-ascii\'\n+        self.assertEqual(mail_settings.email_charset, "utf-8")\n \n         from zope.publisher.browser import TestRequest\n         self.registration.mailPassword(member_id, TestRequest())\n@@ -251,7 +251,7 @@ def testMailPasswordEncoding(self):\n         msg = message_from_bytes(mails.messages[0])\n \n         # Ensure charset (and thus Content-Type) were set via template\n-        self.assertEqual(msg[\'Content-Type\'], \'text/plain; charset="us-ascii"\')\n+        self.assertEqual(msg[\'Content-Type\'], \'text/plain; charset="utf-8"\')\n \n \n class TestPasswordGeneration(PloneTestCase.PloneTestCase):\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2022-08-06T19:29:29+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/f9fe79026c4ce77469d8a3351580e3fda445ce53

changelog

Files changed:
A news/3588.bugfix

b'diff --git a/news/3588.bugfix b/news/3588.bugfix\nnew file mode 100644\nindex 0000000000..5b6ba8ef04\n--- /dev/null\n+++ b/news/3588.bugfix\n@@ -0,0 +1,2 @@\n+Change test to make sure email is sent in utf-8\n+[erral]\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2022-08-13T16:52:51+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/485632bf1939aba8c002e9f1ec012e1e23477444

Merge pull request #3588 from plone/erral-issue-317-plone-app-layout-plone-5.2

change test to make sure email is sent in utf-8

Files changed:
A news/3588.bugfix
M Products/CMFPlone/tests/testRegistrationTool.py

b'diff --git a/Products/CMFPlone/tests/testRegistrationTool.py b/Products/CMFPlone/tests/testRegistrationTool.py\nindex 0a922935f1..c2131b93ce 100644\n--- a/Products/CMFPlone/tests/testRegistrationTool.py\n+++ b/Products/CMFPlone/tests/testRegistrationTool.py\n@@ -243,7 +243,7 @@ def testMailPasswordEncoding(self):\n         mail_settings.email_from_address = \'bar@baz.com\'\n \n         # Set the portal email encoding\n-        mail_settings.email_charset = \'us-ascii\'\n+        self.assertEqual(mail_settings.email_charset, "utf-8")\n \n         from zope.publisher.browser import TestRequest\n         self.registration.mailPassword(member_id, TestRequest())\n@@ -251,7 +251,7 @@ def testMailPasswordEncoding(self):\n         msg = message_from_bytes(mails.messages[0])\n \n         # Ensure charset (and thus Content-Type) were set via template\n-        self.assertEqual(msg[\'Content-Type\'], \'text/plain; charset="us-ascii"\')\n+        self.assertEqual(msg[\'Content-Type\'], \'text/plain; charset="utf-8"\')\n \n \n class TestPasswordGeneration(PloneTestCase.PloneTestCase):\ndiff --git a/news/3588.bugfix b/news/3588.bugfix\nnew file mode 100644\nindex 0000000000..5b6ba8ef04\n--- /dev/null\n+++ b/news/3588.bugfix\n@@ -0,0 +1,2 @@\n+Change test to make sure email is sent in utf-8\n+[erral]\n'

