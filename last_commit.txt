Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-10-17T14:10:42+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/86a732f863f9b66156965e1c69a151ab29f612b8

Fix some i18n issues.

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/author.pt
M Products/CMFPlone/browser/templates/plone-addsite.pt
M Products/CMFPlone/browser/templates/plone-overview.pt
M Products/CMFPlone/browser/templates/plone-upgrade.pt
M Products/CMFPlone/browser/templates/search.pt
M Products/CMFPlone/controlpanel/browser/quickinstaller.pt
M Products/CMFPlone/controlpanel/browser/resourceregistry.pt
M Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index f7453ba..c2f98e2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ Changelog
 5.0.1 (unreleased)
 ------------------
 
+- Fix some i18n issues.
+  [vincentfretin]
+
 - Add syndication for plone.app.contenttypes collections.
   [do3cc]
 
diff --git a/Products/CMFPlone/browser/templates/author.pt b/Products/CMFPlone/browser/templates/author.pt
index c4d6c4c..ba79905 100644
--- a/Products/CMFPlone/browser/templates/author.pt
+++ b/Products/CMFPlone/browser/templates/author.pt
@@ -62,6 +62,7 @@
 
                 <img src=""
                     alt="User portrait picture"
+                    i18n:attributes="alt"
                     class="portraitPhoto"
                     tal:attributes="src portrait/absolute_url" />
                 <h1 class="documentFirstHeading"
@@ -196,8 +197,8 @@
                                  i18n:attributes="summary summary_author_content_list;">
                               <thead>
                                 <tr>
-                                    <th>Date</th>
-                                    <th>Content</th>
+                                    <th i18n:translate="">Date</th>
+                                    <th i18n:translate="">Content</th>
                                 </tr>
                               </thead>
                               <tal:repeat repeat="item author_content">
diff --git a/Products/CMFPlone/browser/templates/plone-addsite.pt b/Products/CMFPlone/browser/templates/plone-addsite.pt
index 1009be0..05718a0 100644
--- a/Products/CMFPlone/browser/templates/plone-addsite.pt
+++ b/Products/CMFPlone/browser/templates/plone-addsite.pt
@@ -8,8 +8,8 @@
       i18n:domain="plone">
 
 <head>
-  <meta charset="utf-8">
-  <meta name="viewport" content="width=device-width, initial-scale=1">
+  <meta charset="utf-8"/>
+  <meta name="viewport" content="width=device-width, initial-scale=1"/>
   <title i18n:translate="">Create a Plone site</title>
   <link rel="stylesheet" type="text/css"
         tal:attributes="href string:${context/absolute_url}/++resource++plone-admin-ui.css"
@@ -91,7 +91,7 @@
       </div>
 
       <div class="field">
-        <label for="portal_timezone" i18n:translate="Default timezone">
+        <label for="portal_timezone" i18n:translate="">
           Default timezone
         </label>
 
diff --git a/Products/CMFPlone/browser/templates/plone-overview.pt b/Products/CMFPlone/browser/templates/plone-overview.pt
index ef57644..b179f87 100644
--- a/Products/CMFPlone/browser/templates/plone-overview.pt
+++ b/Products/CMFPlone/browser/templates/plone-overview.pt
@@ -8,10 +8,10 @@
       i18n:domain="plone">
 
 <head>
-  <meta charset="utf-8">
-  <meta name="viewport" content="width=device-width, initial-scale=1">
+  <meta charset="utf-8"/>
+  <meta name="viewport" content="width=device-width, initial-scale=1"/>
   <title>Plone</title>
-  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'>
+  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'/>
   <link rel="stylesheet" type="text/css"
         href="/++resource++plone-admin-ui.css"
         tal:attributes="href string:${context/absolute_url}/++resource++plone-admin-ui.css" />
@@ -123,7 +123,8 @@
                            i18n:attributes="value;"
                            value="Create a new Plone site" />
                     <a class="discreet"
-                       tal:attributes="href string:${context/absolute_url}/@@plone-addsite?site_id=Plone${site_number}&advanced=1"
+                       i18n:translate=""
+                       tal:attributes="href string:${context/absolute_url}/@@plone-addsite?site_id=Plone${site_number}&amp;advanced=1"
                        >Advanced</a>
                 </form>
             </li>
diff --git a/Products/CMFPlone/browser/templates/plone-upgrade.pt b/Products/CMFPlone/browser/templates/plone-upgrade.pt
index f29c03e..7a4e6b8 100644
--- a/Products/CMFPlone/browser/templates/plone-upgrade.pt
+++ b/Products/CMFPlone/browser/templates/plone-upgrade.pt
@@ -8,10 +8,10 @@
       i18n:domain="plone">
 
 <head>
-  <meta charset="utf-8">
-  <meta name="viewport" content="width=device-width, initial-scale=1">
+  <meta charset="utf-8"/>
+  <meta name="viewport" content="width=device-width, initial-scale=1"/>
   <title i18n:translate="">Upgrade this site</title>
-  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'>
+  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css' />
   <link rel="stylesheet" type="text/css"
         href="/++resource++plone-admin-ui.css"
         tal:attributes="href string:${context/absolute_url}/++resource++plone-admin-ui.css" />
diff --git a/Products/CMFPlone/browser/templates/search.pt b/Products/CMFPlone/browser/templates/search.pt
index e01b2b6..a98a5d9 100644
--- a/Products/CMFPlone/browser/templates/search.pt
+++ b/Products/CMFPlone/browser/templates/search.pt
@@ -13,7 +13,7 @@
           tal:define="here_url context/@@plone_context_state/object_url;"
           tal:condition="request/SearchableText|nothing"
           tal:attributes="href string:$here_url/search_rss?${request/QUERY_STRING}"/>
-    <link rel="home" title="Home" tal:attributes="href view/navroot_url" />
+    <link rel="home" title="Home" i18n:attributes="title" tal:attributes="href view/navroot_url" />
 
   </metal:block>
 
diff --git a/Products/CMFPlone/controlpanel/browser/quickinstaller.pt b/Products/CMFPlone/controlpanel/browser/quickinstaller.pt
index d0ccf1d..35865bc 100644
--- a/Products/CMFPlone/controlpanel/browser/quickinstaller.pt
+++ b/Products/CMFPlone/controlpanel/browser/quickinstaller.pt
@@ -35,11 +35,11 @@
         <section tal:define="products view/get_upgrades;
                          num_products python:len(products)"
              id="upgrade-products" class="portlet">
-          <header class="portletHeader">Upgrades</header>
+          <header class="portletHeader" i18n:translate="">Upgrades</header>
           <section tal:condition="not:products" class="portletContent">
             <div id="up-to-date-message" class="portalMessage info">
-                 <strong>No upgrades in this corner</strong>
-                 <span>You are up to date. High fives.</span>
+                 <strong i18n:translate="">No upgrades in this corner</strong>
+                 <span i18n:translate="">You are up to date. High fives.</span>
              </div>
           </section>
           <section class="portletContent" tal:condition="products">
@@ -50,23 +50,20 @@
                   <input type="hidden"
                                      name="prefs_reinstallProducts:list"
                                      tal:attributes="value pid;" />
-                  <span i18n:translate="label_product_upgrade_action">
-                    <span i18n:name="reinstall_button">
-                    <input class="standalone"
-                                     type="submit"
-                                     value="product"
-                                     name="form.submitted"
-                                     tal:attributes="value string:Upgrade ${pid};"/>
-                    </span>
-                  </span>
+                  <input class="standalone"
+                         type="submit"
+                         value="Upgrade ${pid}"
+                         name="form.submitted"
+                         i18n:attributes="value"
+                         tal:attributes="value string:Upgrade ${pid};"/>
                 </form>
                 <h3>
-                  <span tal:replace="product/title">
+                  <span tal:replace="product/title" i18n:translate="">
                     Add-on Name
                   </span>
                 </h3>
                 <p class="configletDescription discreet">
-                  <tal:span tal:condition="product/description" tal:content="product/description">add-on description</tal:span>
+                  <tal:span tal:condition="product/description" tal:content="product/description" i18n:translate="">add-on description</tal:span>
                   <em class="discreet"> – (<tal:span tal:content="string:${pid}"> plugin.app.name </tal:span>)</em>
                 </p>
                 <ul class="configletDetails">
@@ -105,14 +102,13 @@
                           name="prefs_reinstallProducts:list"
                           tal:attributes="value product/id;" />
                    </tal:products>
-                   <span i18n:translate="label_product_upgrade_all_action">
-                     <div>The question is, do you feel lucky, punk?</div>
-                     <span i18n:name="reinstall_all_button">
-                              <input class="context"
-                                     type="submit"
-                                     value="Upgrade them ALL!"
-                                     name="form.submitted" />
-                     </span>
+                   <span>
+                     <div i18n:translate="label_product_upgrade_all_action">The question is, do you feel lucky, punk?</div>
+                     <input class="context"
+                            type="submit"
+                            i18n:attributes="value"
+                            value="Upgrade them ALL!"
+                            name="form.submitted" />
                    </span>
                 </form>
                </li>
@@ -132,24 +128,22 @@
                    <input type="hidden"
                            name="install_products:list"
                            tal:attributes="value pid;" />
-                   <span i18n:translate="label_product_install_action">
-                      <span i18n:name="install_button">
-                         <input class="context"
+                   <input class="context"
                            type="submit"
-                           value="product"
+                           value="Install"
                            name="form.submitted"
-                           tal:attributes="value string:Install"/>
-                       </span>
-                   </span>
+                           i18n:attributes="value"/>
                 </form>
 
                 <h3>
-                  <span tal:replace="product/title">
+                  <span tal:replace="product/title" i18n:translate="">
                     Add-on Name
                   </span>
                 </h3>
                 <p class="configletDescription discreet">
-                  <tal:span tal:condition="product/description" tal:content="product/description">add-on description</tal:span>
+                  <tal:span tal:condition="product/description"
+                    i18n:translate=""
+                    tal:content="product/description">add-on description</tal:span>
                   <em class="discreet"> – (<tal:span tal:content="string:${pid}"> plugin.app.name </tal:span>)</em>
                 </p>
               </tal:product>
@@ -170,23 +164,21 @@
                     <input type="hidden"
                           name="uninstall_products:list"
                           tal:attributes="value pid;" />
-                      <span i18n:translate="label_product_uninstall_action">
-                        <span i18n:name="uninstall_button">
-                           <input class="destructive"
-                             type="submit"
-                             value="product"
-                             name="form.submitted"
-                             tal:attributes="value string:Uninstall;"/>
-                         </span>
-                     </span>
+                    <input class="destructive"
+                           type="submit"
+                           value="Uninstall"
+                           name="form.submitted"
+                           i18n:attributes="value"/>
                   </form>
                     <h3>
-                      <span tal:replace="product/title">
+                      <span tal:replace="product/title" i18n:translate="">
                         Add-on Name
                       </span>
                     </h3>
                     <p class="configletDescription discreet">
-                      <tal:span tal:condition="product/description" tal:content="product/description">add-on description</tal:span>
+                      <tal:span tal:condition="product/description"
+                        i18n:translate=""
+                        tal:content="product/description">add-on description</tal:span>
                       <em class="discreet"> – (<tal:span tal:content="string:${pid}"> plugin.app.name </tal:span>)</em>
                     </p>
                 </tal:product>
@@ -204,13 +196,13 @@
             <ul class="configlets">
               <li tal:repeat="product products">
                 <h3>
-                  <span tal:replace="product/productname">
+                  <span tal:replace="product/productname" i18n:translate="">
                     Add-on Name
                   </span>
                 </h3>
                 <p class="configletDescription discreet">
-                  <span tal:content="product/type">Error Type</span>
-                  <em class="discreet"> - <tal:span tal:content="product/value">Error Reason</tal:span></em>
+                  <span tal:content="product/type" i18n:translate="">Error Type</span>
+                  <em class="discreet"> - <tal:span tal:content="product/value" i18n:translate="">Error Reason</tal:span></em>
                 </p>
               </li>
             </ul>
diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
index 974caca..cc6994d 100644
--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.pt
@@ -31,18 +31,19 @@
       <span tal:replace="structure context/@@authenticator/authenticator"/>
       <div class="pat-resourceregistry" tal:attributes="data-pat-resourceregistry view/config">
         <div class="portalMessage info">
-          <strong>Info</strong>
-          If you see this, it is because there was an error rendering the resource registry
+          <strong i18n:translate="">Info</strong>
+          <span i18n:translate="">If you see this, it is because there was an error rendering the resource registry
           configuration. It's possible you saved a bundle that gives a JavaScript error
-          and it is prevening the resource registry from loading.
+          and it is prevening the resource registry from loading.</span>
         </div>
-        <h2>Available Options</h2>
+        <h2 i18n:translate="">Available Options</h2>
         <ul>
-          <li>Reload the page. There could be a intermittent issue.</li>
-          <li>Go to the <a href="${portal_url}/portal_registry">Configuration Registry</a>
+          <li i18n:translate="">Reload the page. There could be a intermittent issue.</li>
+          <li i18n:translate="">Go to the <a i18n:name="configuration_registry" i18n:translate=""
+              href="${portal_url}/portal_registry">Configuration Registry</a>
               and manually edit the configuration to enable development mode
               on the resource registry and try to rebuild.</li>
-          <li>You can also attempt to delete your customizations/builds and see if that fixes it.
+          <li i18n:translate="">You can also attempt to delete your customizations/builds and see if that fixes it.
             <ul>
               <tal:overrides tal:repeat="override python: view.get_overrides()">
                 <li>
@@ -50,7 +51,7 @@
                     <input type="hidden" name="action" value="delete-file" />
                     <input type="hidden" name="response" value="html" />
                     <input type="hidden" name="filepath" value="${override}" />
-                    <input type="submit" value="Delete ${override}" />
+                    <input type="submit" value="Delete ${override}" i18n:attributes="value" />
                   </form>
                 </li>
               </tal:overrides>
diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.pt
index 9f8d3be..86ab43e 100644
--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.pt
+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.pt
@@ -54,7 +54,7 @@
 
       <h1 class="documentFirstHeading"
           i18n:translate="heading_edit_groupproperties"
-          metal:define-slot="content-title">Group: ${view/grouptitle|nothing}</h1>
+          metal:define-slot="content-title">Group: <span i18n:name="groupname" tal:replace="view/grouptitle|nothing"/></h1>
 
       <div metal:use-macro="context/global_statusmessage/macros/portal_message">
         Portal status message


