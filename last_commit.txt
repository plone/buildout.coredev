Repository: plone.restapi


Branch: refs/heads/main
Date: 2024-04-29T21:27:10-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.restapi/commit/f2e365394f19d2841cf0417bc69b89b18cdcacb9

Fix event dates in docs (#1776)

* Fix event dates in docs

* changelog

Files changed:
A news/1776.documentation
M src/plone/restapi/tests/http-examples/event.resp
M src/plone/restapi/tests/test_documentation.py

b'diff --git a/news/1776.documentation b/news/1776.documentation\nnew file mode 100644\nindex 000000000..a1e34cf4a\n--- /dev/null\n+++ b/news/1776.documentation\n@@ -0,0 +1 @@\n+Fix event start & end timezone in documentation examples. @davisagli\ndiff --git a/src/plone/restapi/tests/http-examples/event.resp b/src/plone/restapi/tests/http-examples/event.resp\nindex a8538c9fc..2591e6180 100644\n--- a/src/plone/restapi/tests/http-examples/event.resp\n+++ b/src/plone/restapi/tests/http-examples/event.resp\n@@ -44,7 +44,7 @@ Content-Type: application/json\n     ],\n     "description": "This is an event",\n     "effective": null,\n-    "end": "2013-01-01T12:00:00",\n+    "end": "2013-01-01T12:00:00+00:00",\n     "event_url": null,\n     "exclude_from_nav": false,\n     "expires": null,\n@@ -78,7 +78,7 @@ Content-Type: application/json\n     "relatedItems": [],\n     "review_state": "private",\n     "rights": "",\n-    "start": "2013-01-01T10:00:00",\n+    "start": "2013-01-01T10:00:00+00:00",\n     "subjects": [],\n     "sync_uid": null,\n     "text": null,\ndiff --git a/src/plone/restapi/tests/test_documentation.py b/src/plone/restapi/tests/test_documentation.py\nindex e10c2e97c..9c0fc9d34 100644\n--- a/src/plone/restapi/tests/test_documentation.py\n+++ b/src/plone/restapi/tests/test_documentation.py\n@@ -1,5 +1,6 @@\n from base64 import b64encode\n from datetime import datetime\n+from datetime import timezone\n from pkg_resources import resource_filename\n from plone import api\n from plone.app.discussion.interfaces import ICommentAddedEvent\n@@ -319,8 +320,8 @@ def test_documentation_event(self):\n         self.portal.invokeFactory("Event", id="event")\n         self.portal.event.title = "Event"\n         self.portal.event.description = "This is an event"\n-        self.portal.event.start = datetime(2013, 1, 1, 10, 0)\n-        self.portal.event.end = datetime(2013, 1, 1, 12, 0)\n+        self.portal.event.start = datetime(2013, 1, 1, 10, 0, tzinfo=timezone.utc)\n+        self.portal.event.end = datetime(2013, 1, 1, 12, 0, tzinfo=timezone.utc)\n         transaction.commit()\n         response = self.api_session.get(self.portal.event.absolute_url())\n         save_request_and_response_for_docs("event", response)\n'

