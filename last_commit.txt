Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-05-02T13:20:11+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/fc371db8d07914ae482afa2b9c064d7f33d9be2e

Remove Deprecation: import INavigationRoot from plone.base

Files changed:
A news/3945.bugfix
M Products/CMFPlone/browser/admin.zcml
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/login/configure.zcml

b'diff --git a/Products/CMFPlone/browser/admin.zcml b/Products/CMFPlone/browser/admin.zcml\nindex 9fe107071b..8d6696c408 100644\n--- a/Products/CMFPlone/browser/admin.zcml\n+++ b/Products/CMFPlone/browser/admin.zcml\n@@ -51,7 +51,7 @@\n \n   <browser:page\n       name="plone-root-logout"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".admin.RootLogout"\n       permission="zope.Public"\n       />\ndiff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex 6145b40f82..36941da36b 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -14,7 +14,7 @@\n       />\n \n   <class class="Products.CMFPlone.Portal.PloneSite">\n-    <implements interface="plone.app.layout.navigation.interfaces.INavigationRoot" />\n+    <implements interface="plone.base.interfaces.INavigationRoot" />\n   </class>\n \n   <class class=".navtree.NavtreeQueryBuilder">\n@@ -40,7 +40,7 @@\n \n   <browser:page\n       name="favicon.ico"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".favicon.SiteFavicon"\n       permission="zope.Public"\n       />\n@@ -62,7 +62,7 @@\n \n   <browser:page\n       name="breadcrumbs_view"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".navigation.RootPhysicalNavigationBreadcrumbs"\n       allowed_attributes="breadcrumbs"\n       permission="zope.Public"\n@@ -139,7 +139,7 @@\n \n   <browser:page\n       name="accessibility-info"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       template="templates/accessibility-info.pt"\n       permission="zope.Public"\n       />\n@@ -189,7 +189,7 @@\n \n   <browser:page\n       name="robots.txt"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".robots.Robots"\n       permission="zope.Public"\n       />\n@@ -211,7 +211,7 @@\n \n   <browser:page\n       name="search"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".search.Search"\n       template="templates/search.pt"\n       permission="zope2.View"\n@@ -219,7 +219,7 @@\n \n   <browser:page\n       name="ajax-search"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".search.AjaxSearch"\n       permission="zope2.View"\n       />\ndiff --git a/Products/CMFPlone/browser/login/configure.zcml b/Products/CMFPlone/browser/login/configure.zcml\nindex 676495f81b..3840f7cde7 100644\n--- a/Products/CMFPlone/browser/login/configure.zcml\n+++ b/Products/CMFPlone/browser/login/configure.zcml\n@@ -8,7 +8,7 @@\n \n   <browser:page\n       name="insufficient-privileges"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.InsufficientPrivilegesView"\n       template="templates/insufficient_privileges.pt"\n       permission="zope.Public"\n@@ -18,7 +18,7 @@\n   <!-- LOGIN: form with plone page around, can be rendered in modal -->\n   <browser:page\n       name="login"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.LoginForm"\n       template="templates/login.pt"\n       permission="zope.Public"\n@@ -27,7 +27,7 @@\n   <!-- LOGIN: fail safe, simplified and unstyled form -->\n   <browser:page\n       name="failsafe_login"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.FailsafeLoginForm"\n       template="templates/login_failsafe.pt"\n       permission="zope.Public"\n@@ -36,7 +36,7 @@\n   <!-- LOGIN: BBB name, same as \'login\' do not use them to refer to the login -->\n   <browser:page\n       name="login_form"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.LoginForm"\n       template="templates/login.pt"\n       permission="zope.Public"\n@@ -45,7 +45,7 @@\n   <!-- LOGIN: BBB name, same as \'failsafe_login\' do not use it any longer-->\n   <browser:page\n       name="failsafe_login_form"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.FailsafeLoginForm"\n       template="templates/login_failsafe.pt"\n       permission="zope.Public"\n@@ -53,7 +53,7 @@\n \n   <browser:page\n       name="login-help"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login_help.LoginHelpForm"\n       template="templates/login_help.pt"\n       permission="zope.Public"\n@@ -62,7 +62,7 @@\n \n   <browser:page\n       name="logout"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".logout.LogoutView"\n       permission="zope.Public"\n       />\n@@ -70,7 +70,7 @@\n \n   <browser:page\n       name="logged-out"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".logout.LoggedOutView"\n       template="templates/logged_out.pt"\n       permission="zope.Public"\n@@ -85,7 +85,7 @@\n \n   <browser:page\n       name="initial-login-password-change"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.InitialLoginPasswordChange"\n       template="templates/initial_login_password_change.pt"\n       permission="cmf.SetOwnPassword"\n@@ -93,7 +93,7 @@\n \n   <browser:page\n       name="forced-password-change"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.ForcedPasswordChange"\n       template="templates/forced_password_change.pt"\n       permission="cmf.SetOwnPassword"\ndiff --git a/news/3945.bugfix b/news/3945.bugfix\nnew file mode 100644\nindex 0000000000..d6e4076422\n--- /dev/null\n+++ b/news/3945.bugfix\n@@ -0,0 +1,2 @@\n+Import INavigationRoot from plone.base, removes DeprecationWarning.\n+[@jensens]\n\\ No newline at end of file\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-05-02T14:07:19+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/51a6d035f2179b464677f69297955b749fa22bed

Merge pull request #3945 from plone/INavigationRoot-from-plone.base

Remove Deprecation: import INavigationRoot from plone.base

Files changed:
A news/3945.bugfix
M Products/CMFPlone/browser/admin.zcml
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/login/configure.zcml

b'diff --git a/Products/CMFPlone/browser/admin.zcml b/Products/CMFPlone/browser/admin.zcml\nindex 9fe107071b..8d6696c408 100644\n--- a/Products/CMFPlone/browser/admin.zcml\n+++ b/Products/CMFPlone/browser/admin.zcml\n@@ -51,7 +51,7 @@\n \n   <browser:page\n       name="plone-root-logout"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".admin.RootLogout"\n       permission="zope.Public"\n       />\ndiff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex 6145b40f82..36941da36b 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -14,7 +14,7 @@\n       />\n \n   <class class="Products.CMFPlone.Portal.PloneSite">\n-    <implements interface="plone.app.layout.navigation.interfaces.INavigationRoot" />\n+    <implements interface="plone.base.interfaces.INavigationRoot" />\n   </class>\n \n   <class class=".navtree.NavtreeQueryBuilder">\n@@ -40,7 +40,7 @@\n \n   <browser:page\n       name="favicon.ico"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".favicon.SiteFavicon"\n       permission="zope.Public"\n       />\n@@ -62,7 +62,7 @@\n \n   <browser:page\n       name="breadcrumbs_view"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".navigation.RootPhysicalNavigationBreadcrumbs"\n       allowed_attributes="breadcrumbs"\n       permission="zope.Public"\n@@ -139,7 +139,7 @@\n \n   <browser:page\n       name="accessibility-info"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       template="templates/accessibility-info.pt"\n       permission="zope.Public"\n       />\n@@ -189,7 +189,7 @@\n \n   <browser:page\n       name="robots.txt"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".robots.Robots"\n       permission="zope.Public"\n       />\n@@ -211,7 +211,7 @@\n \n   <browser:page\n       name="search"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".search.Search"\n       template="templates/search.pt"\n       permission="zope2.View"\n@@ -219,7 +219,7 @@\n \n   <browser:page\n       name="ajax-search"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".search.AjaxSearch"\n       permission="zope2.View"\n       />\ndiff --git a/Products/CMFPlone/browser/login/configure.zcml b/Products/CMFPlone/browser/login/configure.zcml\nindex 676495f81b..3840f7cde7 100644\n--- a/Products/CMFPlone/browser/login/configure.zcml\n+++ b/Products/CMFPlone/browser/login/configure.zcml\n@@ -8,7 +8,7 @@\n \n   <browser:page\n       name="insufficient-privileges"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.InsufficientPrivilegesView"\n       template="templates/insufficient_privileges.pt"\n       permission="zope.Public"\n@@ -18,7 +18,7 @@\n   <!-- LOGIN: form with plone page around, can be rendered in modal -->\n   <browser:page\n       name="login"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.LoginForm"\n       template="templates/login.pt"\n       permission="zope.Public"\n@@ -27,7 +27,7 @@\n   <!-- LOGIN: fail safe, simplified and unstyled form -->\n   <browser:page\n       name="failsafe_login"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.FailsafeLoginForm"\n       template="templates/login_failsafe.pt"\n       permission="zope.Public"\n@@ -36,7 +36,7 @@\n   <!-- LOGIN: BBB name, same as \'login\' do not use them to refer to the login -->\n   <browser:page\n       name="login_form"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.LoginForm"\n       template="templates/login.pt"\n       permission="zope.Public"\n@@ -45,7 +45,7 @@\n   <!-- LOGIN: BBB name, same as \'failsafe_login\' do not use it any longer-->\n   <browser:page\n       name="failsafe_login_form"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.FailsafeLoginForm"\n       template="templates/login_failsafe.pt"\n       permission="zope.Public"\n@@ -53,7 +53,7 @@\n \n   <browser:page\n       name="login-help"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login_help.LoginHelpForm"\n       template="templates/login_help.pt"\n       permission="zope.Public"\n@@ -62,7 +62,7 @@\n \n   <browser:page\n       name="logout"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".logout.LogoutView"\n       permission="zope.Public"\n       />\n@@ -70,7 +70,7 @@\n \n   <browser:page\n       name="logged-out"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".logout.LoggedOutView"\n       template="templates/logged_out.pt"\n       permission="zope.Public"\n@@ -85,7 +85,7 @@\n \n   <browser:page\n       name="initial-login-password-change"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.InitialLoginPasswordChange"\n       template="templates/initial_login_password_change.pt"\n       permission="cmf.SetOwnPassword"\n@@ -93,7 +93,7 @@\n \n   <browser:page\n       name="forced-password-change"\n-      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n+      for="plone.base.interfaces.INavigationRoot"\n       class=".login.ForcedPasswordChange"\n       template="templates/forced_password_change.pt"\n       permission="cmf.SetOwnPassword"\ndiff --git a/news/3945.bugfix b/news/3945.bugfix\nnew file mode 100644\nindex 0000000000..d6e4076422\n--- /dev/null\n+++ b/news/3945.bugfix\n@@ -0,0 +1,2 @@\n+Import INavigationRoot from plone.base, removes DeprecationWarning.\n+[@jensens]\n\\ No newline at end of file\n'

