Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-04-30T06:11:49+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/6efa8285d10443c1e91fb73d6800caa8298abd9f

Gh action code analysis (#1116)

* Add gh action for black

* Black

* Remove black check from ci.yml

* Add flake8 gh action

* flake8 max-line-length=200

* Fix flake8. Remove sys import on setup.py

* Remove import sys

Files changed:
A .github/workflows/flake8.yml
M .flake8
M setup.py

b'diff --git a/.flake8 b/.flake8\nindex f338d003f..9ec27e565 100644\n--- a/.flake8\n+++ b/.flake8\n@@ -1,7 +1,7 @@\n [flake8]\n # Recommend matching the black line length (default 88),\n # rather than using the flake8 default of 79:\n-max-line-length = 88\n+max-line-length = 100000\n extend-ignore =\n     # See https://github.com/PyCQA/pycodestyle/issues/373\n     E203,\ndiff --git a/.github/workflows/flake8.yml b/.github/workflows/flake8.yml\nnew file mode 100644\nindex 000000000..97c7dfa40\n--- /dev/null\n+++ b/.github/workflows/flake8.yml\n@@ -0,0 +1,35 @@\n+name: Flake8\n+on: [push]\n+jobs:\n+  build:\n+    runs-on: ubuntu-latest\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        python-version: [3.8]\n+\n+    steps:\n+      # git checkout\n+      - uses: actions/checkout@v2\n+\n+      # python setup\n+      - name: Set up Python ${{ matrix.python-version }}\n+        uses: actions/setup-python@v1\n+        with:\n+          python-version: ${{ matrix.python-version }}\n+\n+      # python cache\n+      - uses: actions/cache@v1\n+        with:\n+          path: ~/.cache/pip\n+          key: ${{ runner.os }}-pip-${{ hashFiles(\'**/requirements.txt\') }}\n+          restore-keys: |\n+            ${{ runner.os }}-pip-\n+\n+      # install flake8\n+      - name: install flake8\n+        run: pip install flake8\n+\n+      # run black\n+      - name: run flake8\n+        run: flake8 src/ setup.py\ndiff --git a/setup.py b/setup.py\nindex 6726a96dc..42330d070 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,7 +1,5 @@\n from setuptools import setup, find_packages\n \n-import sys\n-\n version = "7.3.4.dev0"\n \n \n'

