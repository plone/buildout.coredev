Repository: plone.dexterity


Branch: refs/heads/master
Date: 2020-09-16T14:28:30+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.dexterity/commit/bba2b7a6ffafc002d97bf93b8b11b841b2697df5

Removed call of listing macro in content-core view for containers.

It was broken.
We now show the same as for items: only the fields.
Fixes https://github.com/plone/Products.CMFPlone/issues/3177.

Looks like in core only `plone.app.versioningbehavior` calls this view.

Files changed:
A news/3177.bugfix
M plone/dexterity/browser/configure.zcml
M plone/dexterity/browser/containercontentcore.pt

b'diff --git a/news/3177.bugfix b/news/3177.bugfix\nnew file mode 100644\nindex 0000000..23c090e\n--- /dev/null\n+++ b/news/3177.bugfix\n@@ -0,0 +1,4 @@\n+Removed call of listing macro in ``content-core`` view for containers.\n+It was broken.  We now show the same as for items: only the fields.\n+Fixes `issue 3177 <https://github.com/plone/Products.CMFPlone/issues/3177>`_.\n+[maurits]\ndiff --git a/plone/dexterity/browser/configure.zcml b/plone/dexterity/browser/configure.zcml\nindex 393dcbd..b33c275 100644\n--- a/plone/dexterity/browser/configure.zcml\n+++ b/plone/dexterity/browser/configure.zcml\n@@ -13,7 +13,10 @@\n         />\n \n     <!-- Content core views -->\n-\n+    <!-- Note: the templaces are the same since the changes for\n+         https://github.com/plone/Products.CMFPlone/issues/3177\n+         That may be okay: makes it easier to customize\n+         only the template for items or for containers. -->\n     <browser:page\n         for="..interfaces.IDexterityItem"\n         name="content-core"\ndiff --git a/plone/dexterity/browser/containercontentcore.pt b/plone/dexterity/browser/containercontentcore.pt\nindex f95d8e8..2e07bdf 100644\n--- a/plone/dexterity/browser/containercontentcore.pt\n+++ b/plone/dexterity/browser/containercontentcore.pt\n@@ -18,11 +18,4 @@\n       </div>\n   </fieldset>\n \n-  <fieldset id="folder-listing">\n-      <legend>Contents</legend>\n-      <tal:block define="listing_macro context/folder_listing/macros/listing">\n-          <metal:use_macro use-macro="listing_macro" />\n-      </tal:block>\n-  </fieldset>\n-\n </metal:content-core>\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2020-09-25T19:33:42+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/312c19dea992430afba27fcd763dfdfe36e06c03

Merge pull request #132 from plone/maurits/content-core-issue-3177

Removed call of listing macro in content-core view for containers.

Files changed:
A news/3177.bugfix
M plone/dexterity/browser/configure.zcml
M plone/dexterity/browser/containercontentcore.pt

b'diff --git a/news/3177.bugfix b/news/3177.bugfix\nnew file mode 100644\nindex 0000000..23c090e\n--- /dev/null\n+++ b/news/3177.bugfix\n@@ -0,0 +1,4 @@\n+Removed call of listing macro in ``content-core`` view for containers.\n+It was broken.  We now show the same as for items: only the fields.\n+Fixes `issue 3177 <https://github.com/plone/Products.CMFPlone/issues/3177>`_.\n+[maurits]\ndiff --git a/plone/dexterity/browser/configure.zcml b/plone/dexterity/browser/configure.zcml\nindex 393dcbd..b33c275 100644\n--- a/plone/dexterity/browser/configure.zcml\n+++ b/plone/dexterity/browser/configure.zcml\n@@ -13,7 +13,10 @@\n         />\n \n     <!-- Content core views -->\n-\n+    <!-- Note: the templaces are the same since the changes for\n+         https://github.com/plone/Products.CMFPlone/issues/3177\n+         That may be okay: makes it easier to customize\n+         only the template for items or for containers. -->\n     <browser:page\n         for="..interfaces.IDexterityItem"\n         name="content-core"\ndiff --git a/plone/dexterity/browser/containercontentcore.pt b/plone/dexterity/browser/containercontentcore.pt\nindex f95d8e8..2e07bdf 100644\n--- a/plone/dexterity/browser/containercontentcore.pt\n+++ b/plone/dexterity/browser/containercontentcore.pt\n@@ -18,11 +18,4 @@\n       </div>\n   </fieldset>\n \n-  <fieldset id="folder-listing">\n-      <legend>Contents</legend>\n-      <tal:block define="listing_macro context/folder_listing/macros/listing">\n-          <metal:use_macro use-macro="listing_macro" />\n-      </tal:block>\n-  </fieldset>\n-\n </metal:content-core>\n'

