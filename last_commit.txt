Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2020-09-01T22:06:50+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.portlet.collection/commit/dde26387029b3c598a7b7d8b123cf7cdf4569207

Fixed deprecation warning for setDefaultRoles.

Files changed:
A news/3130.bugfix
M plone/portlet/collection/__init__.py

b'diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..b7b7451\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for ``setDefaultRoles``.\n+[maurits]\ndiff --git a/plone/portlet/collection/__init__.py b/plone/portlet/collection/__init__.py\nindex 10ae9b1..57208db 100644\n--- a/plone/portlet/collection/__init__.py\n+++ b/plone/portlet/collection/__init__.py\n@@ -1,10 +1,11 @@\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n-PloneMessageFactory = MessageFactory(\'plone\')\n \n-from Products.CMFCore.permissions import setDefaultRoles\n \n+PloneMessageFactory = MessageFactory("plone")\n PROJECTNAME = "plone.portlet.collection"\n DEFAULT_ADD_CONTENT_PERMISSION = "%s: Add collection portlet" % PROJECTNAME\n \n-setDefaultRoles(DEFAULT_ADD_CONTENT_PERMISSION,\n-                (\'Manager\', \'Site Administrator\', \'Owner\',))\n+addPermission(\n+    DEFAULT_ADD_CONTENT_PERMISSION, ("Manager", "Site Administrator", "Owner",)\n+)\n'

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2020-09-02T09:29:44+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.portlet.collection/commit/294ffe09e2991433672a455306f3e5c2235281a3

Merge pull request #22 from plone/maurits/fix-warnings

Fixed deprecation warning for setDefaultRoles.

Files changed:
A news/3130.bugfix
M plone/portlet/collection/__init__.py

b'diff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..b7b7451\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed deprecation warning for ``setDefaultRoles``.\n+[maurits]\ndiff --git a/plone/portlet/collection/__init__.py b/plone/portlet/collection/__init__.py\nindex 10ae9b1..57208db 100644\n--- a/plone/portlet/collection/__init__.py\n+++ b/plone/portlet/collection/__init__.py\n@@ -1,10 +1,11 @@\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n-PloneMessageFactory = MessageFactory(\'plone\')\n \n-from Products.CMFCore.permissions import setDefaultRoles\n \n+PloneMessageFactory = MessageFactory("plone")\n PROJECTNAME = "plone.portlet.collection"\n DEFAULT_ADD_CONTENT_PERMISSION = "%s: Add collection portlet" % PROJECTNAME\n \n-setDefaultRoles(DEFAULT_ADD_CONTENT_PERMISSION,\n-                (\'Manager\', \'Site Administrator\', \'Owner\',))\n+addPermission(\n+    DEFAULT_ADD_CONTENT_PERMISSION, ("Manager", "Site Administrator", "Owner",)\n+)\n'

