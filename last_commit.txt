Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2020-09-10T17:38:25+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.PortalTransforms/commit/6af2f2b5b16d3aefb657cce7d36f2f19c7baaba2

Fixed invalid escape sequences.

Files changed:
A news/3130.bugfix
M Products/PortalTransforms/libtransforms/commandtransform.py
M Products/PortalTransforms/unsafe_transforms/xml.py

b'diff --git a/Products/PortalTransforms/libtransforms/commandtransform.py b/Products/PortalTransforms/libtransforms/commandtransform.py\nindex db9f343..f333481 100644\n--- a/Products/PortalTransforms/libtransforms/commandtransform.py\n+++ b/Products/PortalTransforms/libtransforms/commandtransform.py\n@@ -43,7 +43,7 @@ def initialize_tmpdir(self, data, **kwargs):\n     def subObjects(self, tmpdir):\n         imgs = []\n         for f in os.listdir(tmpdir):\n-            result = re.match("^.+\\.(?P<ext>.+)$", f)\n+            result = re.match(r"^.+\\.(?P<ext>.+)$", f)\n             if result is not None:\n                 ext = result.group(\'ext\')\n                 if ext in (\'png\', \'jpg\', \'gif\'):\ndiff --git a/Products/PortalTransforms/unsafe_transforms/xml.py b/Products/PortalTransforms/unsafe_transforms/xml.py\nindex 9352cc7..0a6947b 100644\n--- a/Products/PortalTransforms/unsafe_transforms/xml.py\n+++ b/Products/PortalTransforms/unsafe_transforms/xml.py\n@@ -142,8 +142,9 @@ def invokeCommand(self, input_name, xsl):\n def register():\n     return XsltTransform()\n \n-DT_RGX = re.compile(\'<!DOCTYPE \\w* PUBLIC \\"([^"]*)\\" \\"([^"]*)\\"\')\n-DT_RGX2 = re.compile(\'<!DOCTYPE \\w* SYSTEM \\"([^"]*)\\"\')\n+\n+DT_RGX = re.compile(r\'<!DOCTYPE \\w* PUBLIC "([^"]*)" "([^"]*)"\')\n+DT_RGX2 = re.compile(r\'<!DOCTYPE \\w* SYSTEM "([^"]*)"\')\n \n \n class DTException(Exception):\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..c763a41\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed invalid escape sequences.\n+[maurits]\n'

Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2020-09-10T22:06:37+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.PortalTransforms/commit/8e0483278f0a4453ec6cb92b4ba6569436442d82

Merge pull request #42 from plone/maurits/fix-warnings-2

Fixed invalid escape sequences.

Files changed:
A news/3130.bugfix
M Products/PortalTransforms/libtransforms/commandtransform.py
M Products/PortalTransforms/unsafe_transforms/xml.py

b'diff --git a/Products/PortalTransforms/libtransforms/commandtransform.py b/Products/PortalTransforms/libtransforms/commandtransform.py\nindex db9f343..f333481 100644\n--- a/Products/PortalTransforms/libtransforms/commandtransform.py\n+++ b/Products/PortalTransforms/libtransforms/commandtransform.py\n@@ -43,7 +43,7 @@ def initialize_tmpdir(self, data, **kwargs):\n     def subObjects(self, tmpdir):\n         imgs = []\n         for f in os.listdir(tmpdir):\n-            result = re.match("^.+\\.(?P<ext>.+)$", f)\n+            result = re.match(r"^.+\\.(?P<ext>.+)$", f)\n             if result is not None:\n                 ext = result.group(\'ext\')\n                 if ext in (\'png\', \'jpg\', \'gif\'):\ndiff --git a/Products/PortalTransforms/unsafe_transforms/xml.py b/Products/PortalTransforms/unsafe_transforms/xml.py\nindex 9352cc7..0a6947b 100644\n--- a/Products/PortalTransforms/unsafe_transforms/xml.py\n+++ b/Products/PortalTransforms/unsafe_transforms/xml.py\n@@ -142,8 +142,9 @@ def invokeCommand(self, input_name, xsl):\n def register():\n     return XsltTransform()\n \n-DT_RGX = re.compile(\'<!DOCTYPE \\w* PUBLIC \\"([^"]*)\\" \\"([^"]*)\\"\')\n-DT_RGX2 = re.compile(\'<!DOCTYPE \\w* SYSTEM \\"([^"]*)\\"\')\n+\n+DT_RGX = re.compile(r\'<!DOCTYPE \\w* PUBLIC "([^"]*)" "([^"]*)"\')\n+DT_RGX2 = re.compile(r\'<!DOCTYPE \\w* SYSTEM "([^"]*)"\')\n \n \n class DTException(Exception):\ndiff --git a/news/3130.bugfix b/news/3130.bugfix\nnew file mode 100644\nindex 0000000..c763a41\n--- /dev/null\n+++ b/news/3130.bugfix\n@@ -0,0 +1,2 @@\n+Fixed invalid escape sequences.\n+[maurits]\n'

