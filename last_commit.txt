Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2024-03-20T16:43:12+01:00
Author: Katja SuÌˆss (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.app.discussion/commit/5e89f7c1c6bd281e6cdd1904aac687544c8a4014

Apply validation for all captchas

Files changed:
A news/234.bugfix
M plone/app/discussion/browser/validator.py

b'diff --git a/news/234.bugfix b/news/234.bugfix\nnew file mode 100644\nindex 00000000..8bfc3559\n--- /dev/null\n+++ b/news/234.bugfix\n@@ -0,0 +1 @@\n+Apply validation for all captchas. @ksuess\n\\ No newline at end of file\ndiff --git a/plone/app/discussion/browser/validator.py b/plone/app/discussion/browser/validator.py\nindex 734b6c2d..0605764b 100644\n--- a/plone/app/discussion/browser/validator.py\n+++ b/plone/app/discussion/browser/validator.py\n@@ -49,7 +49,7 @@ def validate(self, value):\n         registry = queryUtility(IRegistry)\n         settings = registry.forInterface(IDiscussionSettings, check=False)\n \n-        if settings.captcha in ("captcha", "recaptcha", "norobots"):\n+        if settings.captcha != \'disabled\':\n             captcha = getMultiAdapter(\n                 (aq_inner(self.context), self.request), name=settings.captcha\n             )\n'

Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2024-03-20T15:47:15Z
Author: pre-commit-ci[bot] (pre-commit-ci[bot]) <66853113+pre-commit-ci[bot]@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.discussion/commit/750128fe2c4034dca23b5abc26ee7b5d765a5ee3

[pre-commit.ci] auto fixes from pre-commit.com hooks

for more information, see https://pre-commit.ci

Files changed:
M plone/app/discussion/browser/validator.py

b'diff --git a/plone/app/discussion/browser/validator.py b/plone/app/discussion/browser/validator.py\nindex 0605764b..18db7d02 100644\n--- a/plone/app/discussion/browser/validator.py\n+++ b/plone/app/discussion/browser/validator.py\n@@ -49,7 +49,7 @@ def validate(self, value):\n         registry = queryUtility(IRegistry)\n         settings = registry.forInterface(IDiscussionSettings, check=False)\n \n-        if settings.captcha != \'disabled\':\n+        if settings.captcha != "disabled":\n             captcha = getMultiAdapter(\n                 (aq_inner(self.context), self.request), name=settings.captcha\n             )\n'

Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2024-03-20T23:48:06+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.discussion/commit/3d60532720c96bf807cf892492e1e914f6c7d674

Merge pull request #234 from plone/hcaptcha-fix-master-branch

Apply validation for all captchas

Files changed:
A news/234.bugfix
M plone/app/discussion/browser/validator.py

b'diff --git a/news/234.bugfix b/news/234.bugfix\nnew file mode 100644\nindex 00000000..8bfc3559\n--- /dev/null\n+++ b/news/234.bugfix\n@@ -0,0 +1 @@\n+Apply validation for all captchas. @ksuess\n\\ No newline at end of file\ndiff --git a/plone/app/discussion/browser/validator.py b/plone/app/discussion/browser/validator.py\nindex 734b6c2d..18db7d02 100644\n--- a/plone/app/discussion/browser/validator.py\n+++ b/plone/app/discussion/browser/validator.py\n@@ -49,7 +49,7 @@ def validate(self, value):\n         registry = queryUtility(IRegistry)\n         settings = registry.forInterface(IDiscussionSettings, check=False)\n \n-        if settings.captcha in ("captcha", "recaptcha", "norobots"):\n+        if settings.captcha != "disabled":\n             captcha = getMultiAdapter(\n                 (aq_inner(self.context), self.request), name=settings.captcha\n             )\n'

