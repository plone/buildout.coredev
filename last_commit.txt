Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-12-21T10:37:33+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/Products.CMFPlone/commit/5f638f8e22bc4764ecf18668d96d98ae3f76041e

Add data-bundle="diazo" back and add a data-bundle="plonecustomcss" also for @@customcss stylesheet

Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI). Add a data-bundle="plonecustomcss" also for @@customcss stylesheet

Files changed:
M Products/CMFPlone/resources/browser/resource.py

b'diff --git a/Products/CMFPlone/resources/browser/resource.py b/Products/CMFPlone/resources/browser/resource.py\nindex 9e5808da57..8ddcf4767b 100644\n--- a/Products/CMFPlone/resources/browser/resource.py\n+++ b/Products/CMFPlone/resources/browser/resource.py\n@@ -242,6 +242,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_js"] if external else None,\n                 crossorigin="anonymous" if external else None,\n                 integrity=not external,\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Theme CSS\n@@ -264,6 +265,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_css"] if external else None,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Custom CSS\n@@ -280,6 +282,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 group=root_group_css,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "plonecustomcss"},\n             )\n \n         self.renderer = {}\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2023-12-21T10:40:20+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/Products.CMFPlone/commit/989b5952bf7cf035113b64911dc9a74d985e17a8

Create 3889.bugfix

Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI). Add a data-bundle="plonecustomcss" also for @@CustomCss stylesheet

Files changed:
A news/3889.bugfix

b'diff --git a/news/3889.bugfix b/news/3889.bugfix\nnew file mode 100644\nindex 0000000000..e56c02faf9\n--- /dev/null\n+++ b/news/3889.bugfix\n@@ -0,0 +1,3 @@\n+Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI).\n+Add a data-bundle="plonecustomcss" also for @@custom.css stylesheet\n+[yurj]\n'

Repository: Products.CMFPlone


Branch: refs/heads/6.0.x
Date: 2024-01-08T16:30:57+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/9797416e6b2deb7c97e22739b229466ec3cdf974

Merge pull request #3889 from plone/yurj-diazo-bundle

Add data-bundle="diazo" back and add a data-bundle="plonecustomcss" aâ€¦

Files changed:
A news/3889.bugfix
M Products/CMFPlone/resources/browser/resource.py

b'diff --git a/Products/CMFPlone/resources/browser/resource.py b/Products/CMFPlone/resources/browser/resource.py\nindex 9e5808da57..8ddcf4767b 100644\n--- a/Products/CMFPlone/resources/browser/resource.py\n+++ b/Products/CMFPlone/resources/browser/resource.py\n@@ -242,6 +242,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_js"] if external else None,\n                 crossorigin="anonymous" if external else None,\n                 integrity=not external,\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Theme CSS\n@@ -264,6 +265,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_css"] if external else None,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Custom CSS\n@@ -280,6 +282,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 group=root_group_css,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "plonecustomcss"},\n             )\n \n         self.renderer = {}\ndiff --git a/news/3889.bugfix b/news/3889.bugfix\nnew file mode 100644\nindex 0000000000..e56c02faf9\n--- /dev/null\n+++ b/news/3889.bugfix\n@@ -0,0 +1,3 @@\n+Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI).\n+Add a data-bundle="plonecustomcss" also for @@custom.css stylesheet\n+[yurj]\n'

