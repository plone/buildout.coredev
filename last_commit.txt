Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-08-20T23:54:28+02:00
Author: Gauthier Bastien (gbastien) <g.bastien@imio.be>
Commit: https://github.com/plone/plone.restapi/commit/4412adcd16e5f34fa86822cd81324ca2640cb537

Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer (#972)

* Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer since it is handled in DefaultJSONSummarySerializer, see #970

* black

* Clean

Files changed:
A news/970.bugfix
M setup.py
M src/plone/restapi/search/handler.py
M src/plone/restapi/serializer/catalog.py

b'diff --git a/news/970.bugfix b/news/970.bugfix\nnew file mode 100644\nindex 000000000..1f6446b3f\n--- /dev/null\n+++ b/news/970.bugfix\n@@ -0,0 +1 @@\n+Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer since it is handled in DefaultJSONSummarySerializer. [gbastien]\ndiff --git a/setup.py b/setup.py\nindex f79aed47d..87d7af1a3 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -2,7 +2,7 @@\n \n import sys\n \n-version = \'6.13.8.dev0\'\n+version = "6.13.8.dev0"\n \n \n def read(filename):\n@@ -18,6 +18,7 @@ def read(filename):\n         contents = myfile.read()\n         return contents.decode("utf-8")\n \n+\n long_description = (\n     read("README.rst")\n     + "\\n"\ndiff --git a/src/plone/restapi/search/handler.py b/src/plone/restapi/search/handler.py\nindex a1d969b9f..032435003 100644\n--- a/src/plone/restapi/search/handler.py\n+++ b/src/plone/restapi/search/handler.py\n@@ -74,16 +74,12 @@ def search(self, query=None):\n         else:\n             fullobjects = False\n \n-        metadata_fields = query.pop("metadata_fields", [])\n-        if not isinstance(metadata_fields, list):\n-            metadata_fields = [metadata_fields]\n-\n         self._constrain_query_by_path(query)\n         query = self._parse_query(query)\n \n         lazy_resultset = self.catalog.searchResults(query)\n         results = getMultiAdapter((lazy_resultset, self.request), ISerializeToJson)(\n-            metadata_fields=metadata_fields, fullobjects=fullobjects\n+            fullobjects=fullobjects\n         )\n \n         return results\ndiff --git a/src/plone/restapi/serializer/catalog.py b/src/plone/restapi/serializer/catalog.py\nindex fb33d3407..3e8c5e736 100644\n--- a/src/plone/restapi/serializer/catalog.py\n+++ b/src/plone/restapi/serializer/catalog.py\n@@ -24,7 +24,7 @@ def __init__(self, lazy_resultset, request):\n         self.lazy_resultset = lazy_resultset\n         self.request = request\n \n-    def __call__(self, metadata_fields=(), fullobjects=False):\n+    def __call__(self, fullobjects=False):\n         batch = HypermediaBatch(self.request, self.lazy_resultset)\n \n         results = {}\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-08-20T23:55:15+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/a47b4db898b4461e1f7afae78951131f6e1010fe

Fix changelog

Files changed:
M CHANGES.rst

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 5ec63d614..bc05ba923 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,8 +14,8 @@ Changelog\n Bug fixes:\n \n \n-- - Add a Decimal() converter\n-    [fulv] (#963)\n+- Add a Decimal() converter\n+  [fulv] (#963)\n \n \n 6.13.6 (2020-07-09)\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-08-20T23:56:07+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/18a38bd3d0a48a7bc209236664ededc60590b7dc

Preparing release 6.13.8

Files changed:
M CHANGES.rst
M setup.py
D news/970.bugfix

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex bc05ba923..259a5fb97 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -8,6 +8,15 @@ Changelog\n \n .. towncrier release notes start\n \n+6.13.8 (2020-08-20)\n+-------------------\n+\n+Bug fixes:\n+\n+\n+- Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer since it is handled in DefaultJSONSummarySerializer. [gbastien] (#970)\n+\n+\n 6.13.7 (2020-07-16)\n -------------------\n \ndiff --git a/news/970.bugfix b/news/970.bugfix\ndeleted file mode 100644\nindex 1f6446b3f..000000000\n--- a/news/970.bugfix\n+++ /dev/null\n@@ -1 +0,0 @@\n-Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer since it is handled in DefaultJSONSummarySerializer. [gbastien]\ndiff --git a/setup.py b/setup.py\nindex 87d7af1a3..47358d7b7 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -2,7 +2,7 @@\n \n import sys\n \n-version = "6.13.8.dev0"\n+version = "6.13.8"\n \n \n def read(filename):\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-08-20T23:56:48+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/a512e5985e7367f53313a64e7627d1628a876644

Back to development: 6.13.9

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 47358d7b7..ef087fa93 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -2,7 +2,7 @@\n \n import sys\n \n-version = "6.13.8"\n+version = "6.13.9.dev0"\n \n \n def read(filename):\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-08-20T23:58:37+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/2883c9697cd863c597a3fbc47892d7f0115bc97b

Merge branch '6.x.x'

Files changed:
M CHANGES.rst

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex c7e46fc72..1314fa9c2 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -8,7 +8,6 @@ Changelog\n \n .. towncrier release notes start\n \n-\n 7.0.0a4 (2020-05-15)\n --------------------\n \n@@ -62,14 +61,22 @@ New features:\n   [buchi,timo,cekk] (#808)\n \n \n+6.13.8 (2020-08-20)\n+-------------------\n+\n+Bug fixes:\n+\n+- Removed useless management of metadata_fields in SearchHandler/LazyCatalogResultSerializer since it is handled in DefaultJSONSummarySerializer. [gbastien] (#970)\n+\n+\n 6.13.7 (2020-07-16)\n -------------------\n \n Bug fixes:\n \n \n-- - Add a Decimal() converter\n-    [fulv] (#963)\n+- Add a Decimal() converter\n+  [fulv] (#963)\n \n \n 6.13.6 (2020-07-09)\n'

