Repository: plone.batching


Branch: refs/heads/master
Date: 2023-05-16T22:29:04+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/9e7e81fd1201fecfb87db12a74eed6c88b8dbe6c

Configuring with plone/meta

Files changed:
A .github/workflows/coverage.yml
A news/12f48b08.internal
M .meta.toml
M pyproject.toml
M setup.cfg
M tox.ini

b'diff --git a/.github/workflows/coverage.yml b/.github/workflows/coverage.yml\nnew file mode 100644\nindex 0000000..d07d88f\n--- /dev/null\n+++ b/.github/workflows/coverage.yml\n@@ -0,0 +1,17 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+name: Coverage\n+on:\n+  push:\n+    branches:\n+      - master\n+      - main\n+  pull_request:\n+    branches:\n+      - master\n+      - main\n+  workflow_dispatch:\n+\n+jobs:\n+  coverage:\n+    uses: plone/meta/.github/workflows/coverage.yml@master\ndiff --git a/.meta.toml b/.meta.toml\nindex 2058a18..4314559 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -7,7 +7,7 @@ additional-ignores = [\n \n [meta]\n template = "default"\n-commit-id = "e42131fe"\n+commit-id = "12f48b08"\n \n [dependencies]\n mappings = [\ndiff --git a/news/12f48b08.internal b/news/12f48b08.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/12f48b08.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 2039265..212526b 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -42,5 +42,44 @@ profile = "plone"\n [tool.black]\n target-version = ["py38"]\n \n+\n [tool.dependencychecker]\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # ExtensionClass own provided namespaces\n+  \'ExtensionClass\', \'ComputedAttribute\', \'MethodObject\',\n+  # Zope dependencies\n+  \'AccessControl\', \'Acquisition\', \'AuthEncoding\', \'beautifulsoup4\', \'BTrees\',\n+  \'cffi\', \'Chameleon\', \'DateTime\', \'DocumentTemplate\',\n+  \'MultiMapping\', \'multipart\', \'PasteDeploy\', \'Persistence\', \'persistent\',\n+  \'pycparser\', \'python-gettext\', \'pytz\', \'RestrictedPython\', \'roman\',\n+  \'soupsieve\', \'transaction\', \'waitress\', \'WebOb\', \'WebTest\', \'WSGIProxy2\',\n+  \'z3c.pt\', \'zc.lockfile\', \'ZConfig\', \'zExceptions\', \'ZODB\', \'zodbpickle\',\n+  \'zope.annotation\', \'zope.browser\', \'zope.browsermenu\', \'zope.browserpage\',\n+  \'zope.browserresource\', \'zope.cachedescriptors\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.contentprovider\',\n+  \'zope.contenttype\', \'zope.datetime\', \'zope.deferredimport\',\n+  \'zope.deprecation\', \'zope.dottedname\', \'zope.event\', \'zope.exceptions\',\n+  \'zope.filerepresentation\', \'zope.globalrequest\', \'zope.hookable\',\n+  \'zope.i18n\', \'zope.i18nmessageid\', \'zope.interface\', \'zope.lifecycleevent\',\n+  \'zope.location\', \'zope.pagetemplate\', \'zope.processlifetime\', \'zope.proxy\',\n+  \'zope.ptresource\', \'zope.publisher\', \'zope.schema\', \'zope.security\',\n+  \'zope.sequencesort\', \'zope.site\', \'zope.size\', \'zope.structuredtext\',\n+  \'zope.tal\', \'zope.tales\', \'zope.testbrowser\', \'zope.testing\',\n+  \'zope.traversing\', \'zope.viewlet\'\n+]\n+\'Products.CMFCore\' = [\n+  \'docutils\', \'five.localsitemanager\', \'Missing\', \'Products.BTreeFolder2\',\n+  \'Products.GenericSetup\', \'Products.MailHost\', \'Products.PythonScripts\',\n+  \'Products.StandardCacheManagers\', \'Products.ZCatalog\', \'Record\',\n+  \'zope.sendmail\', \'Zope\'\n+]\n+\'plone.base\' = [\n+  \'plone.batching\', \'plone.registry\', \'plone.schema\',\'plone.z3cform\',\n+  \'Products.CMFCore\', \'Products.CMFDynamicViewFTI\',\n+]\n+python-dateutil = [\'dateutil\']\n Zope = [\'Products.Five\', \'ZTUtils\']\ndiff --git a/setup.cfg b/setup.cfg\nindex a73e9e1..9ca3756 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -21,5 +21,4 @@ ignore =\n     .meta.toml\n     .pre-commit-config.yaml\n     tox.ini\n-    lint-requirements.txt\n     conf.py\ndiff --git a/tox.ini b/tox.ini\nindex f71ccfe..db2fcdb 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,8 @@\n # Generated from:\n # https://github.com/plone/meta/tree/master/config/default\n [tox]\n+# We need 4.4.0 for constrain_package_deps.\n+min_version = 4.4.0\n envlist =\n     format\n     lint\n@@ -30,21 +32,45 @@ commands =\n     pre-commit run -a\n \n [testenv:dependencies]\n-description = check if the package defines all its dependencies and generate a graph out of them\n+description = check if the package defines all its dependencies\n+skip_install = true\n deps =\n+    build\n     z3c.dependencychecker==2.11\n+commands =\n+    python -m build --sdist --no-isolation\n+    dependencychecker\n+\n+[testenv:dependencies-graph]\n+description = generate a graph out of the package\'s dependencies\n+deps =\n     pipdeptree==2.5.1\n     graphviz  # optional dependency of pipdeptree\n commands =\n-    dependencychecker\n-    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+    sh -c \'pipdeptree --exclude setuptools,wheel,pipdeptree,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n \n [testenv:test]\n-usedevelop = true\n+use_develop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --all --test-path={toxinidir} -s plone.batching {posargs}\n+extras =\n+    test\n+\n+[testenv:coverage]\n+use_develop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n deps =\n+    coverage\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.batching\n+    coverage run {envbindir}/zope-testrunner --quiet --all --test-path={toxinidir} -s plone.batching {posargs}\n+    coverage report -m --format markdown\n extras =\n     test\n'

Repository: plone.batching


Branch: refs/heads/master
Date: 2023-05-16T22:29:04+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/b1b69f02c144c5dbace4e452ecdf29f540f87da4

fix .meta.toml

Files changed:
M .meta.toml
M pyproject.toml

b'diff --git a/.meta.toml b/.meta.toml\nindex 4314559..c55cc61 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -8,11 +8,3 @@ additional-ignores = [\n [meta]\n template = "default"\n commit-id = "12f48b08"\n-\n-[dependencies]\n-mappings = [\n-    "Zope = [\'Products.Five\', \'ZTUtils\']",\n-    ]\n-\n-[tests]\n-gha = true\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 212526b..639f77a 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -82,4 +82,3 @@ Zope = [\n   \'Products.CMFCore\', \'Products.CMFDynamicViewFTI\',\n ]\n python-dateutil = [\'dateutil\']\n-Zope = [\'Products.Five\', \'ZTUtils\']\n'

Repository: plone.batching


Branch: refs/heads/master
Date: 2023-05-18T09:47:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.batching/commit/e1280d6d8b49aee2e365d41f74b7dcdb9000b35d

Merge pull request #48 from plone/config-with-default-template-428139cd

Config with default template (coverage reports edition)

Files changed:
A .github/workflows/coverage.yml
A news/12f48b08.internal
M .meta.toml
M pyproject.toml
M setup.cfg
M tox.ini

b'diff --git a/.github/workflows/coverage.yml b/.github/workflows/coverage.yml\nnew file mode 100644\nindex 0000000..d07d88f\n--- /dev/null\n+++ b/.github/workflows/coverage.yml\n@@ -0,0 +1,17 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+name: Coverage\n+on:\n+  push:\n+    branches:\n+      - master\n+      - main\n+  pull_request:\n+    branches:\n+      - master\n+      - main\n+  workflow_dispatch:\n+\n+jobs:\n+  coverage:\n+    uses: plone/meta/.github/workflows/coverage.yml@master\ndiff --git a/.meta.toml b/.meta.toml\nindex 2058a18..c55cc61 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -7,12 +7,4 @@ additional-ignores = [\n \n [meta]\n template = "default"\n-commit-id = "e42131fe"\n-\n-[dependencies]\n-mappings = [\n-    "Zope = [\'Products.Five\', \'ZTUtils\']",\n-    ]\n-\n-[tests]\n-gha = true\n+commit-id = "12f48b08"\ndiff --git a/news/12f48b08.internal b/news/12f48b08.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/12f48b08.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 2039265..639f77a 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -42,5 +42,43 @@ profile = "plone"\n [tool.black]\n target-version = ["py38"]\n \n+\n [tool.dependencychecker]\n-Zope = [\'Products.Five\', \'ZTUtils\']\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # ExtensionClass own provided namespaces\n+  \'ExtensionClass\', \'ComputedAttribute\', \'MethodObject\',\n+  # Zope dependencies\n+  \'AccessControl\', \'Acquisition\', \'AuthEncoding\', \'beautifulsoup4\', \'BTrees\',\n+  \'cffi\', \'Chameleon\', \'DateTime\', \'DocumentTemplate\',\n+  \'MultiMapping\', \'multipart\', \'PasteDeploy\', \'Persistence\', \'persistent\',\n+  \'pycparser\', \'python-gettext\', \'pytz\', \'RestrictedPython\', \'roman\',\n+  \'soupsieve\', \'transaction\', \'waitress\', \'WebOb\', \'WebTest\', \'WSGIProxy2\',\n+  \'z3c.pt\', \'zc.lockfile\', \'ZConfig\', \'zExceptions\', \'ZODB\', \'zodbpickle\',\n+  \'zope.annotation\', \'zope.browser\', \'zope.browsermenu\', \'zope.browserpage\',\n+  \'zope.browserresource\', \'zope.cachedescriptors\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.contentprovider\',\n+  \'zope.contenttype\', \'zope.datetime\', \'zope.deferredimport\',\n+  \'zope.deprecation\', \'zope.dottedname\', \'zope.event\', \'zope.exceptions\',\n+  \'zope.filerepresentation\', \'zope.globalrequest\', \'zope.hookable\',\n+  \'zope.i18n\', \'zope.i18nmessageid\', \'zope.interface\', \'zope.lifecycleevent\',\n+  \'zope.location\', \'zope.pagetemplate\', \'zope.processlifetime\', \'zope.proxy\',\n+  \'zope.ptresource\', \'zope.publisher\', \'zope.schema\', \'zope.security\',\n+  \'zope.sequencesort\', \'zope.site\', \'zope.size\', \'zope.structuredtext\',\n+  \'zope.tal\', \'zope.tales\', \'zope.testbrowser\', \'zope.testing\',\n+  \'zope.traversing\', \'zope.viewlet\'\n+]\n+\'Products.CMFCore\' = [\n+  \'docutils\', \'five.localsitemanager\', \'Missing\', \'Products.BTreeFolder2\',\n+  \'Products.GenericSetup\', \'Products.MailHost\', \'Products.PythonScripts\',\n+  \'Products.StandardCacheManagers\', \'Products.ZCatalog\', \'Record\',\n+  \'zope.sendmail\', \'Zope\'\n+]\n+\'plone.base\' = [\n+  \'plone.batching\', \'plone.registry\', \'plone.schema\',\'plone.z3cform\',\n+  \'Products.CMFCore\', \'Products.CMFDynamicViewFTI\',\n+]\n+python-dateutil = [\'dateutil\']\ndiff --git a/setup.cfg b/setup.cfg\nindex a73e9e1..9ca3756 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -21,5 +21,4 @@ ignore =\n     .meta.toml\n     .pre-commit-config.yaml\n     tox.ini\n-    lint-requirements.txt\n     conf.py\ndiff --git a/tox.ini b/tox.ini\nindex f71ccfe..db2fcdb 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,8 @@\n # Generated from:\n # https://github.com/plone/meta/tree/master/config/default\n [tox]\n+# We need 4.4.0 for constrain_package_deps.\n+min_version = 4.4.0\n envlist =\n     format\n     lint\n@@ -30,21 +32,45 @@ commands =\n     pre-commit run -a\n \n [testenv:dependencies]\n-description = check if the package defines all its dependencies and generate a graph out of them\n+description = check if the package defines all its dependencies\n+skip_install = true\n deps =\n+    build\n     z3c.dependencychecker==2.11\n+commands =\n+    python -m build --sdist --no-isolation\n+    dependencychecker\n+\n+[testenv:dependencies-graph]\n+description = generate a graph out of the package\'s dependencies\n+deps =\n     pipdeptree==2.5.1\n     graphviz  # optional dependency of pipdeptree\n commands =\n-    dependencychecker\n-    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+    sh -c \'pipdeptree --exclude setuptools,wheel,pipdeptree,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n \n [testenv:test]\n-usedevelop = true\n+use_develop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --all --test-path={toxinidir} -s plone.batching {posargs}\n+extras =\n+    test\n+\n+[testenv:coverage]\n+use_develop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n deps =\n+    coverage\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.batching\n+    coverage run {envbindir}/zope-testrunner --quiet --all --test-path={toxinidir} -s plone.batching {posargs}\n+    coverage report -m --format markdown\n extras =\n     test\n'

