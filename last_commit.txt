Repository: plone.restapi


Branch: refs/heads/main
Date: 2024-06-16T20:07:16+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/fd222a10efdd0614838a658457fb9432707e4e35

Run docs check against Python 3.12 (#1794)

* Run docs check against Python 3.12

* Add changelog and update more references to 3.9

* Make py 3.12 the default and print python/plone version

* Update 1794.internal

---------

Co-authored-by: David Glick &lt;david@glicksoftware.com&gt;

Files changed:
A news/1794.internal
M .python-version
M test-no-uncommitted-doc-changes

b'diff --git a/.python-version b/.python-version\nindex bd28b9c5c2..e4fba21835 100644\n--- a/.python-version\n+++ b/.python-version\n@@ -1 +1 @@\n-3.9\n+3.12\ndiff --git a/news/1794.internal b/news/1794.internal\nnew file mode 100644\nindex 0000000000..4ef267bc40\n--- /dev/null\n+++ b/news/1794.internal\n@@ -0,0 +1 @@\n+Update test-no-uncommitted-doc-changes to run on Python 3.12 instead of 3.9. @tisto, @davisagli\ndiff --git a/test-no-uncommitted-doc-changes b/test-no-uncommitted-doc-changes\nindex 420234a383..b9dfab019a 100755\n--- a/test-no-uncommitted-doc-changes\n+++ b/test-no-uncommitted-doc-changes\n@@ -13,12 +13,14 @@ function red {\n     echo "$RED $1 $RESET"\n }\n \n-if [ "$PLONE_VERSION" == "6.0" ] && [ "$PYTHON_VERSION" == \'3.9\' ]; then\n-    echo "Running check for undocumented changes for Plone 6.0.x on Python 3.9"\n+if [ "$PLONE_VERSION" == "6.0" ] && [ "$PYTHON_VERSION" == \'3.12\' ]; then\n+    echo "Running check for undocumented changes for Plone 6.0.x on Python 3.12"\n else\n     # request/response dumps have known differences for different Python/Plone combinations\n     # => skip, we can\'t have the Plone 5 build fail because of those\n-    echo "Skipping checks for undocumented changes for everything except Plone 6.0.x on Python 3.9"\n+    echo "Skipping checks for undocumented changes for everything except Plone 6.0.x on Python 3.12"\n+    echo "PLONE_VERSION=$PLONE_VERSION"\n+    echo "PYTHON_VERSION=$PYTHON_VERSION"\n     exit 0\n fi\n \n'

