Repository: plone.portlet.static


Branch: refs/heads/master
Date: 2020-08-22T11:32:01+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.portlet.static/commit/c6f7714b964d2d13731fece14498117629d7227f

Fixed startup warning for setDefaultRoles.

```
DeprecationWarning: setDefaultRoles is deprecated. Please use addPermission from AccessControl.Permission.
```

Files changed:
A news/17.bugfix
M plone/portlet/static/__init__.py

b"diff --git a/news/17.bugfix b/news/17.bugfix\nnew file mode 100644\nindex 0000000..c87b380\n--- /dev/null\n+++ b/news/17.bugfix\n@@ -0,0 +1,2 @@\n+Fixed startup warning for setDefaultRoles.\n+[maurits]\ndiff --git a/plone/portlet/static/__init__.py b/plone/portlet/static/__init__.py\nindex d65704c..0c37cfb 100644\n--- a/plone/portlet/static/__init__.py\n+++ b/plone/portlet/static/__init__.py\n@@ -1,10 +1,11 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n \n+\n PloneMessageFactory = MessageFactory('plone')\n \n-setDefaultRoles(\n+addPermission(\n     'plone.portlet.static: Add static portlet',\n     ('Manager', 'Site Administrator', 'Owner', )\n )\n"

Repository: plone.portlet.static


Branch: refs/heads/master
Date: 2020-08-24T12:30:48+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.portlet.static/commit/0b06f03e9ad4fc081e0d0b035615d6759072f943

Merge pull request #17 from plone/maurits/fix-startup-warnings

Fixed startup warning for setDefaultRoles.

Files changed:
A news/17.bugfix
M plone/portlet/static/__init__.py

b"diff --git a/news/17.bugfix b/news/17.bugfix\nnew file mode 100644\nindex 0000000..c87b380\n--- /dev/null\n+++ b/news/17.bugfix\n@@ -0,0 +1,2 @@\n+Fixed startup warning for setDefaultRoles.\n+[maurits]\ndiff --git a/plone/portlet/static/__init__.py b/plone/portlet/static/__init__.py\nindex d65704c..0c37cfb 100644\n--- a/plone/portlet/static/__init__.py\n+++ b/plone/portlet/static/__init__.py\n@@ -1,10 +1,11 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n from zope.i18nmessageid import MessageFactory\n \n+\n PloneMessageFactory = MessageFactory('plone')\n \n-setDefaultRoles(\n+addPermission(\n     'plone.portlet.static: Add static portlet',\n     ('Manager', 'Site Administrator', 'Owner', )\n )\n"

