Repository: plone.i18n


Branch: refs/heads/4.x
Date: 2021-09-07T16:16:18+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.i18n/commit/ed1343aaf2582b321d55ba86cd3ab168007236a7

Support Cyrillic and Latin character sets for Serbian.

See https://github.com/collective/plone.app.locales/issues/326

Let 'sr' be general Serbian. Can be Latin or Cyrillic.
You can influence which character set is used, by choosing one of three values in an environment variable:

```
zope_i18n_allowed_languages sr
zope_i18n_allowed_languages sr@Cyrl
zope_i18n_allowed_languages sr@Latn
```

Default character set in Plone 5.2 is Cyrillic, but this may change to Latin in 6.0.

Files changed:
A news/326.feature
M plone/i18n/locales/languages.py

b'diff --git a/news/326.feature b/news/326.feature\nnew file mode 100644\nindex 0000000..784a46f\n--- /dev/null\n+++ b/news/326.feature\n@@ -0,0 +1,3 @@\n+Support Cyrillic and Latin character sets for Serbian.\n+See `locales issue 326 <https://github.com/collective/plone.app.locales/issues/326>`_.\n+[maurits, fredvd]\ndiff --git a/plone/i18n/locales/languages.py b/plone/i18n/locales/languages.py\nindex 0ffec69..69a06a5 100644\n--- a/plone/i18n/locales/languages.py\n+++ b/plone/i18n/locales/languages.py\n@@ -4,6 +4,7 @@\n from plone.i18n.locales.interfaces import IMetadataLanguageAvailability\n from zope.interface import implementer\n \n+import os\n import six\n \n \n@@ -469,6 +470,8 @@ class MetadataLanguageAvailability(LanguageAvailability):\n         u\'flag\': u\'/++resource++country-flags/al.gif\',\n     },\n     u\'sr\': {\n+        # Note: we support two character sets for this language.\n+        # See zope_i18n_allowed_languages below.\n         u\'native\': \'\xd1\x81\xd1\x80\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8\',\n         u\'name\': \'Serbian\',\n         u\'flag\': u\'/++resource++country-flags/cs.gif\',\n@@ -562,6 +565,23 @@ class MetadataLanguageAvailability(LanguageAvailability):\n     },\n }\n \n+# Character sets are a thing now.\n+# See https://github.com/collective/plone.app.locales/issues/326\n+# At the moment only for Serbian.\n+_zope_i18n_allowed_languages = os.environ.get("zope_i18n_allowed_languages", "")\n+if \'sr@Latn\' in _zope_i18n_allowed_languages:\n+    _languagelist[u\'sr\'] = {\n+        u\'native\': \'Srpski\',\n+        u\'name\': \'Serbian (Latin)\',\n+        u\'flag\': u\'/++resource++country-flags/cs.gif\',\n+    }\n+elif \'sr@Cyrl\' in _zope_i18n_allowed_languages:\n+    _languagelist[u\'sr\'] = {\n+        u\'native\': \'\xd1\x81\xd1\x80\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8\',\n+        u\'name\': \'Serbian (Cyrillic)\',\n+        u\'flag\': u\'/++resource++country-flags/cs.gif\',\n+    }\n+\n # convert the utf-8 encoded values to unicode\n for code in _languagelist:\n     value = _languagelist[code]\n'

Repository: plone.i18n


Branch: refs/heads/4.x
Date: 2021-10-14T12:40:41+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.i18n/commit/8cbc7212955de32f7b14dbdfca4608c9855c8b6c

Merge pull request #37 from plone/maurits/serbian-4x

Support Cyrillic and Latin character sets for Serbian. [4.x]

Files changed:
A news/326.feature
M plone/i18n/locales/languages.py

b'diff --git a/news/326.feature b/news/326.feature\nnew file mode 100644\nindex 0000000..784a46f\n--- /dev/null\n+++ b/news/326.feature\n@@ -0,0 +1,3 @@\n+Support Cyrillic and Latin character sets for Serbian.\n+See `locales issue 326 <https://github.com/collective/plone.app.locales/issues/326>`_.\n+[maurits, fredvd]\ndiff --git a/plone/i18n/locales/languages.py b/plone/i18n/locales/languages.py\nindex 0ffec69..69a06a5 100644\n--- a/plone/i18n/locales/languages.py\n+++ b/plone/i18n/locales/languages.py\n@@ -4,6 +4,7 @@\n from plone.i18n.locales.interfaces import IMetadataLanguageAvailability\n from zope.interface import implementer\n \n+import os\n import six\n \n \n@@ -469,6 +470,8 @@ class MetadataLanguageAvailability(LanguageAvailability):\n         u\'flag\': u\'/++resource++country-flags/al.gif\',\n     },\n     u\'sr\': {\n+        # Note: we support two character sets for this language.\n+        # See zope_i18n_allowed_languages below.\n         u\'native\': \'\xd1\x81\xd1\x80\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8\',\n         u\'name\': \'Serbian\',\n         u\'flag\': u\'/++resource++country-flags/cs.gif\',\n@@ -562,6 +565,23 @@ class MetadataLanguageAvailability(LanguageAvailability):\n     },\n }\n \n+# Character sets are a thing now.\n+# See https://github.com/collective/plone.app.locales/issues/326\n+# At the moment only for Serbian.\n+_zope_i18n_allowed_languages = os.environ.get("zope_i18n_allowed_languages", "")\n+if \'sr@Latn\' in _zope_i18n_allowed_languages:\n+    _languagelist[u\'sr\'] = {\n+        u\'native\': \'Srpski\',\n+        u\'name\': \'Serbian (Latin)\',\n+        u\'flag\': u\'/++resource++country-flags/cs.gif\',\n+    }\n+elif \'sr@Cyrl\' in _zope_i18n_allowed_languages:\n+    _languagelist[u\'sr\'] = {\n+        u\'native\': \'\xd1\x81\xd1\x80\xd0\xbf\xd1\x81\xd0\xba\xd0\xb8\',\n+        u\'name\': \'Serbian (Cyrillic)\',\n+        u\'flag\': u\'/++resource++country-flags/cs.gif\',\n+    }\n+\n # convert the utf-8 encoded values to unicode\n for code in _languagelist:\n     value = _languagelist[code]\n'

