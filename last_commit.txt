Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2024-04-15T16:23:49-03:00
Author: wesleybl (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/plone.app.discussion/commit/1f502a8d7de0ad6a5c990e4fe0d0fa92826ba79a

Fix robot test `Add a Comment to a Document and bulk delete it`

The screenshot shows that the "Select all" checkbox is checked, but the
other checkboxes are not. It may be that the test clicked on "Select
all" before the event that selects all was attached to the checkbox.
Then we wait for the event to be attached before clicking.

Files changed:
A news/238.internal
M plone/app/discussion/tests/robot/test_moderation.robot

b'diff --git a/news/238.internal b/news/238.internal\nnew file mode 100644\nindex 00000000..290918c3\n--- /dev/null\n+++ b/news/238.internal\n@@ -0,0 +1 @@\n+Fix robot test `Add a Comment to a Document and bulk delete it` 2. @wesleybl\ndiff --git a/plone/app/discussion/tests/robot/test_moderation.robot b/plone/app/discussion/tests/robot/test_moderation.robot\nindex b37447f2..c44add7f 100644\n--- a/plone/app/discussion/tests/robot/test_moderation.robot\n+++ b/plone/app/discussion/tests/robot/test_moderation.robot\n@@ -73,6 +73,7 @@ I add a comment and delete it\n   Wait Until Element Is Enabled  css=[name=check_all]\n   Wait Until Element Is Visible  css=[name="paths:list"]\n   Wait Until Element Is Enabled  css=[name="paths:list"]\n+  Wait for Condition   return jQuery._data( jQuery(\'[name=check_all]\')[0], "events" ).click.length == 2\n   Select Checkbox  name=check_all\n   Wait Until Element Is Visible  css=[name="paths:list"]:checked\n   Wait For Then Click Element  css=button[name="form.button.BulkAction"]\n'

