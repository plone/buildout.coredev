Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-09-16T09:19:53+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/a7efe6d70ed4590137c092173df944485473f827

PloneBatch: define __bool__ as copy of __nonzero__.

Python 2 calls __nonzero__, Python 3 calls __bool__.

Files changed:
A news/3175.bugfix
M Products/CMFPlone/PloneBatch.py

b"diff --git a/Products/CMFPlone/PloneBatch.py b/Products/CMFPlone/PloneBatch.py\nindex 2541454075..2f8737297c 100644\n--- a/Products/CMFPlone/PloneBatch.py\n+++ b/Products/CMFPlone/PloneBatch.py\n@@ -27,11 +27,14 @@ def __len__(self):\n                           'Use the `sequence_length` attribute for the size of the '\n                           'entire sequence. '))\n \n-    def __nonzero__(self):\n-        # Without __nonzero__ a bool(self) would call len(self), which\n+    def __bool__(self):\n+        # Without __bool__ a bool(self) would call len(self), which\n         # gives a deprecation warning.\n         return bool(self.length)\n \n+    # For Python 2 compatibility:\n+    __nonzero__ = __bool__\n+\n     def initialize(self, start, end, size):\n         super(Batch, self).initialize(start, end, size)\n         self.pagerange, self.pagerangestart, self.pagerangeend = \\\ndiff --git a/news/3175.bugfix b/news/3175.bugfix\nnew file mode 100644\nindex 0000000000..87c3366fe6\n--- /dev/null\n+++ b/news/3175.bugfix\n@@ -0,0 +1,3 @@\n+PloneBatch: define ``__bool__`` as copy of ``__nonzero__``.\n+Python 3 calls ``__bool__`` when doing ``bool(batch)``.\n+[maurits]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-09-16T10:53:27+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/728b3e44403d101400d431d927255e36d7b75cd7

Merge pull request #3175 from plone/maurits/batch-bool

PloneBatch: define __bool__ as copy of __nonzero__.

Files changed:
A news/3175.bugfix
M Products/CMFPlone/PloneBatch.py

b"diff --git a/Products/CMFPlone/PloneBatch.py b/Products/CMFPlone/PloneBatch.py\nindex 2541454075..2f8737297c 100644\n--- a/Products/CMFPlone/PloneBatch.py\n+++ b/Products/CMFPlone/PloneBatch.py\n@@ -27,11 +27,14 @@ def __len__(self):\n                           'Use the `sequence_length` attribute for the size of the '\n                           'entire sequence. '))\n \n-    def __nonzero__(self):\n-        # Without __nonzero__ a bool(self) would call len(self), which\n+    def __bool__(self):\n+        # Without __bool__ a bool(self) would call len(self), which\n         # gives a deprecation warning.\n         return bool(self.length)\n \n+    # For Python 2 compatibility:\n+    __nonzero__ = __bool__\n+\n     def initialize(self, start, end, size):\n         super(Batch, self).initialize(start, end, size)\n         self.pagerange, self.pagerangestart, self.pagerangeend = \\\ndiff --git a/news/3175.bugfix b/news/3175.bugfix\nnew file mode 100644\nindex 0000000000..87c3366fe6\n--- /dev/null\n+++ b/news/3175.bugfix\n@@ -0,0 +1,3 @@\n+PloneBatch: define ``__bool__`` as copy of ``__nonzero__``.\n+Python 3 calls ``__bool__`` when doing ``bool(batch)``.\n+[maurits]\n"

