Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2020-09-21T11:42:20+02:00
Author: Martin Peeters (mpeeters) <martin.peeters@affinitic.be>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/3733250e3c50b7056826c50cb1aa2f6ebb960ff4

Add `max_request_body_size` option

Files changed:
A news/155.feature
M README.rst
M src/plone/recipe/zope2instance/recipe.py

b'diff --git a/README.rst b/README.rst\nindex 1d82d08..dec801b 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -111,6 +111,10 @@ wsgi\n    The WSGI configuration file will not be created for you in this case,\n    unlike the built-in ``waitress`` support. You have to provide it yourself.\n \n+max-request-body-size\n+   Specify the maximum request body size in bytes\n+   The default is 1073741824 (since this is the waitress default)\n+\n \n Theme resources\n ---------------\ndiff --git a/news/155.feature b/news/155.feature\nnew file mode 100644\nindex 0000000..c66c27d\n--- /dev/null\n+++ b/news/155.feature\n@@ -0,0 +1,3 @@\n+Added option ``max-request-body-size``, with default 1073741824.\n+See `waitress documentation <https://waitress.readthedocs.io/en/latest/arguments.html?highlight=max_request_body_size>`_.\n+[mpeeters]\ndiff --git a/src/plone/recipe/zope2instance/recipe.py b/src/plone/recipe/zope2instance/recipe.py\nindex 888ce45..2eb83ac 100644\n--- a/src/plone/recipe/zope2instance/recipe.py\n+++ b/src/plone/recipe/zope2instance/recipe.py\n@@ -815,6 +815,8 @@ def build_wsgi_ini(self):\n             \'listen_port\': \'8080\',\n             # /todo\n             \'location\': options[\'location\'],\n+            \'max_request_body_size\': options.get(\n+                \'max-request-body-size\', 1073741824),\n             \'pipeline\': pipeline,\n             \'root_handlers\': root_handlers,\n             \'sentry_dsn\': sentry_dsn,\n@@ -1374,6 +1376,7 @@ def render_file_storage(self, file_storage, blob_storage,\n %(fast-listen)slisten = %(http_address)s\n threads = %(threads)s\n clear_untrusted_proxy_headers = %(clear_untrusted_proxy_headers)s\n+max_request_body_size = %(max_request_body_size)s\n """\n \n wsgi_server_main_templates[\'win32\'] = """\\\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2020-09-21T11:54:31+02:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/208b916a03dc8a8e8afa7942dce621f4be863ad4

Merge pull request #156 from affinitic/master

Add `max_request_body_size` option

Files changed:
A news/155.feature
M README.rst
M src/plone/recipe/zope2instance/recipe.py

b'diff --git a/README.rst b/README.rst\nindex 1d82d08..dec801b 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -111,6 +111,10 @@ wsgi\n    The WSGI configuration file will not be created for you in this case,\n    unlike the built-in ``waitress`` support. You have to provide it yourself.\n \n+max-request-body-size\n+   Specify the maximum request body size in bytes\n+   The default is 1073741824 (since this is the waitress default)\n+\n \n Theme resources\n ---------------\ndiff --git a/news/155.feature b/news/155.feature\nnew file mode 100644\nindex 0000000..c66c27d\n--- /dev/null\n+++ b/news/155.feature\n@@ -0,0 +1,3 @@\n+Added option ``max-request-body-size``, with default 1073741824.\n+See `waitress documentation <https://waitress.readthedocs.io/en/latest/arguments.html?highlight=max_request_body_size>`_.\n+[mpeeters]\ndiff --git a/src/plone/recipe/zope2instance/recipe.py b/src/plone/recipe/zope2instance/recipe.py\nindex 888ce45..2eb83ac 100644\n--- a/src/plone/recipe/zope2instance/recipe.py\n+++ b/src/plone/recipe/zope2instance/recipe.py\n@@ -815,6 +815,8 @@ def build_wsgi_ini(self):\n             \'listen_port\': \'8080\',\n             # /todo\n             \'location\': options[\'location\'],\n+            \'max_request_body_size\': options.get(\n+                \'max-request-body-size\', 1073741824),\n             \'pipeline\': pipeline,\n             \'root_handlers\': root_handlers,\n             \'sentry_dsn\': sentry_dsn,\n@@ -1374,6 +1376,7 @@ def render_file_storage(self, file_storage, blob_storage,\n %(fast-listen)slisten = %(http_address)s\n threads = %(threads)s\n clear_untrusted_proxy_headers = %(clear_untrusted_proxy_headers)s\n+max_request_body_size = %(max_request_body_size)s\n """\n \n wsgi_server_main_templates[\'win32\'] = """\\\n'

