Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T11:28:48+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/1000ce798c16854393776c5f343bb6a1df172832

Fix regression for disabled state of action buttons in folder contents that are using &lt;a&gt; tag and not &lt;button&gt; or &lt;input&gt;
(this revert part of https://github.com/plone/mockup/commit/b470e3505b870896009a40ef9e54ce28e7af4529)

Files changed:
A news/996.bugfix
M mockup/js/ui/views/button.js

b"diff --git a/mockup/js/ui/views/button.js b/mockup/js/ui/views/button.js\nindex 117c2b6a7..4f3d4ef02 100644\n--- a/mockup/js/ui/views/button.js\n+++ b/mockup/js/ui/views/button.js\n@@ -53,7 +53,7 @@ define([\n     },\n     handleClick: function(e) {\n       e.preventDefault();\n-      if (!this.$el.prop('disabled')) {\n+      if (!this.$el.is('.disabled')) {\n         this.uiEventTrigger('click', this, e);\n       }\n     },\n@@ -61,10 +61,10 @@ define([\n       return _.extend({'icon': '', 'title': ''}, this.options);\n     },\n     disable: function() {\n-      this.$el.prop('disabled', true);\n+      this.$el.addClass('disabled');\n     },\n     enable: function() {\n-      this.$el.prop('disabled', false);\n+      this.$el.removeClass('disabled');\n     }\n   });\n \ndiff --git a/news/996.bugfix b/news/996.bugfix\nnew file mode 100644\nindex 000000000..e7dc0a9da\n--- /dev/null\n+++ b/news/996.bugfix\n@@ -0,0 +1,3 @@\n+Fix regression for disabled state of action buttons in folder contents\n+This fixes https://github.com/plone/Products.CMFPlone/issues/2296\n+[vincentfretin]\n"

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T14:03:35+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/b2586a3b9f3768535a0d4df9eeff034c505de29b

use the disabled class instead of disabled attribute on a &lt;a&gt; tag for the AnchorView component

Files changed:
M mockup/js/ui/views/anchor.js

b"diff --git a/mockup/js/ui/views/anchor.js b/mockup/js/ui/views/anchor.js\nindex 3d373ee2b..26a92cff7 100644\n--- a/mockup/js/ui/views/anchor.js\n+++ b/mockup/js/ui/views/anchor.js\n@@ -38,7 +38,7 @@ define([\n     },\n     handleClick: function(e) {\n       e.preventDefault();\n-      if (!this.$el.prop('disabled')) {\n+      if (!this.$el.is('.disabled')) {\n         this.uiEventTrigger('click', this, e);\n       }\n     },\n@@ -46,10 +46,10 @@ define([\n       return _.extend({'icon': '', 'title': '', 'shortcut': ''}, this.options);\n     },\n     disable: function() {\n-      this.$el.prop('disabled', true);\n+      this.$el.addClass('disabled');\n     },\n     enable: function() {\n-      this.$el.prop('disabled', false);\n+      this.$el.removeClass('disabled');\n     }\n   });\n \n"

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T17:36:58+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/df39cb4f2575685f9f8ad797d8499d7626199eae

correctly bind the function to add extraClasses like it was fixed for ButtonView

Files changed:
M mockup/js/ui/views/anchor.js

b"diff --git a/mockup/js/ui/views/anchor.js b/mockup/js/ui/views/anchor.js\nindex 26a92cff7..d1fa18bac 100644\n--- a/mockup/js/ui/views/anchor.js\n+++ b/mockup/js/ui/views/anchor.js\n@@ -33,7 +33,7 @@ define([\n         this.$el.attr('aria-label', this.options.title || this.options.tooltip || '');\n         _.each(this.extraClasses, function(klass) {\n           this.$el.addClass(klass);\n-        });\n+        }.bind(this));\n       }, this);\n     },\n     handleClick: function(e) {\n"

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T17:52:51+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/dcf3f087319a1ec5c989e0c09113474a57e80fd8

add style for disabled state of the AnchorView component used in thememapper for the Tools-&gt;Build CSS button

Files changed:
M mockup/patterns/filemanager/pattern.filemanager.less

b'diff --git a/mockup/patterns/filemanager/pattern.filemanager.less b/mockup/patterns/filemanager/pattern.filemanager.less\nindex ed7c07a34..946c01c70 100644\n--- a/mockup/patterns/filemanager/pattern.filemanager.less\n+++ b/mockup/patterns/filemanager/pattern.filemanager.less\n@@ -57,6 +57,10 @@\n             min-width: 250px;\n         }\n     }\n+    .alink.disabled {\n+        cursor: @cursor-disabled;\n+        .opacity(.65);\n+    }\n     .input-group:extend(.input-group all){}\n     .input-group-addon:extend(.input-group-addon all){}\n     .input-group-btn:extend(.input-group-btn all){}\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T17:58:49+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/dbfe1e1e212f3c820469d7e6bbe8e4d5f9135aea

changelog entry for the Build CSS button that was fixed as well

Files changed:
M news/996.bugfix

b'diff --git a/news/996.bugfix b/news/996.bugfix\nindex e7dc0a9da..be6fb9f1c 100644\n--- a/news/996.bugfix\n+++ b/news/996.bugfix\n@@ -1,3 +1,4 @@\n-Fix regression for disabled state of action buttons in folder contents\n+Fix regression for the disabled state of action buttons in folder contents\n+and the Tools/Build CSS button in thememapper.\n This fixes https://github.com/plone/Products.CMFPlone/issues/2296\n [vincentfretin]\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-07-05T18:00:54+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/mockup/commit/cc8a3070048f00d56f87b05bda25233fc1f18857

Merge pull request #996 from plone/fix-disabled-a-tag-btn

Fix regression for disabled state of action buttons in folder contents

Files changed:
A news/996.bugfix
M mockup/js/ui/views/anchor.js
M mockup/js/ui/views/button.js
M mockup/patterns/filemanager/pattern.filemanager.less

b"diff --git a/mockup/js/ui/views/anchor.js b/mockup/js/ui/views/anchor.js\nindex 3d373ee2b..d1fa18bac 100644\n--- a/mockup/js/ui/views/anchor.js\n+++ b/mockup/js/ui/views/anchor.js\n@@ -33,12 +33,12 @@ define([\n         this.$el.attr('aria-label', this.options.title || this.options.tooltip || '');\n         _.each(this.extraClasses, function(klass) {\n           this.$el.addClass(klass);\n-        });\n+        }.bind(this));\n       }, this);\n     },\n     handleClick: function(e) {\n       e.preventDefault();\n-      if (!this.$el.prop('disabled')) {\n+      if (!this.$el.is('.disabled')) {\n         this.uiEventTrigger('click', this, e);\n       }\n     },\n@@ -46,10 +46,10 @@ define([\n       return _.extend({'icon': '', 'title': '', 'shortcut': ''}, this.options);\n     },\n     disable: function() {\n-      this.$el.prop('disabled', true);\n+      this.$el.addClass('disabled');\n     },\n     enable: function() {\n-      this.$el.prop('disabled', false);\n+      this.$el.removeClass('disabled');\n     }\n   });\n \ndiff --git a/mockup/js/ui/views/button.js b/mockup/js/ui/views/button.js\nindex 117c2b6a7..4f3d4ef02 100644\n--- a/mockup/js/ui/views/button.js\n+++ b/mockup/js/ui/views/button.js\n@@ -53,7 +53,7 @@ define([\n     },\n     handleClick: function(e) {\n       e.preventDefault();\n-      if (!this.$el.prop('disabled')) {\n+      if (!this.$el.is('.disabled')) {\n         this.uiEventTrigger('click', this, e);\n       }\n     },\n@@ -61,10 +61,10 @@ define([\n       return _.extend({'icon': '', 'title': ''}, this.options);\n     },\n     disable: function() {\n-      this.$el.prop('disabled', true);\n+      this.$el.addClass('disabled');\n     },\n     enable: function() {\n-      this.$el.prop('disabled', false);\n+      this.$el.removeClass('disabled');\n     }\n   });\n \ndiff --git a/mockup/patterns/filemanager/pattern.filemanager.less b/mockup/patterns/filemanager/pattern.filemanager.less\nindex ed7c07a34..946c01c70 100644\n--- a/mockup/patterns/filemanager/pattern.filemanager.less\n+++ b/mockup/patterns/filemanager/pattern.filemanager.less\n@@ -57,6 +57,10 @@\n             min-width: 250px;\n         }\n     }\n+    .alink.disabled {\n+        cursor: @cursor-disabled;\n+        .opacity(.65);\n+    }\n     .input-group:extend(.input-group all){}\n     .input-group-addon:extend(.input-group-addon all){}\n     .input-group-btn:extend(.input-group-btn all){}\ndiff --git a/news/996.bugfix b/news/996.bugfix\nnew file mode 100644\nindex 000000000..be6fb9f1c\n--- /dev/null\n+++ b/news/996.bugfix\n@@ -0,0 +1,4 @@\n+Fix regression for the disabled state of action buttons in folder contents\n+and the Tools/Build CSS button in thememapper.\n+This fixes https://github.com/plone/Products.CMFPlone/issues/2296\n+[vincentfretin]\n"

