Repository: plone.scale


Branch: refs/heads/master
Date: 2020-08-10T21:19:33+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.scale/commit/5267ff148f74991efdf51a10f01b49a89593bb5f

Avoid a deprecation warning

As the comment on the code says, if we only want py3.3+ compatibility we can already remove it, as long as we want py2 compatibility we need to keep the fallback.

Files changed:
M plone/scale/storage.py

b"diff --git a/plone/scale/storage.py b/plone/scale/storage.py\nindex be5e129..85436c1 100644\n--- a/plone/scale/storage.py\n+++ b/plone/scale/storage.py\n@@ -2,7 +2,6 @@\n from persistent.dict import PersistentDict\n from plone.scale.interfaces import IImageScaleFactory\n from six import integer_types\n-from collections import MutableMapping\n from uuid import uuid4\n from ZODB.POSException import ConflictError\n from zope.annotation import IAnnotations\n@@ -13,6 +12,13 @@\n import pprint\n import warnings\n \n+# BBB From python 3.3 it will work and from 3.9 it will be an error\n+# the fallback is kept for py2 compatibility\n+try:\n+    from collections.abc import MutableMapping\n+except ImportError:\n+    from collections import MutableMapping\n+\n \n logger = logging.getLogger('plone.scale')\n # Keep old scales around for this amount of milliseconds.\n"

Repository: plone.scale


Branch: refs/heads/master
Date: 2020-09-02T18:21:44+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.scale/commit/89638bb6325f1119fde76cf47b2c5813ad582387

Create 42.misc

Files changed:
A news/42.misc

b'diff --git a/news/42.misc b/news/42.misc\nnew file mode 100644\nindex 0000000..aff0802\n--- /dev/null\n+++ b/news/42.misc\n@@ -0,0 +1 @@\n+Resolve deprecation warning [gfrorcada]\n'

Repository: plone.scale


Branch: refs/heads/master
Date: 2020-09-02T18:21:51+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.scale/commit/a6e6dface039f0b8af752168a46e7de76a2dde06

Merge pull request #42 from plone/gforcada-patch-1

Avoid a deprecation warning

Files changed:
A news/42.misc
M plone/scale/storage.py

b"diff --git a/news/42.misc b/news/42.misc\nnew file mode 100644\nindex 0000000..aff0802\n--- /dev/null\n+++ b/news/42.misc\n@@ -0,0 +1 @@\n+Resolve deprecation warning [gfrorcada]\ndiff --git a/plone/scale/storage.py b/plone/scale/storage.py\nindex be5e129..85436c1 100644\n--- a/plone/scale/storage.py\n+++ b/plone/scale/storage.py\n@@ -2,7 +2,6 @@\n from persistent.dict import PersistentDict\n from plone.scale.interfaces import IImageScaleFactory\n from six import integer_types\n-from collections import MutableMapping\n from uuid import uuid4\n from ZODB.POSException import ConflictError\n from zope.annotation import IAnnotations\n@@ -13,6 +12,13 @@\n import pprint\n import warnings\n \n+# BBB From python 3.3 it will work and from 3.9 it will be an error\n+# the fallback is kept for py2 compatibility\n+try:\n+    from collections.abc import MutableMapping\n+except ImportError:\n+    from collections import MutableMapping\n+\n \n logger = logging.getLogger('plone.scale')\n # Keep old scales around for this amount of milliseconds.\n"

