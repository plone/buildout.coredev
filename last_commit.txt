Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2022-01-04T16:28:47+01:00
Author: Thomas Schorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.app.contentlisting/commit/68edb7488bca249c08cdd9ea87d563c451b828d7

Do not throw an error if the contenttype is not in the mimetyes_registry

Files changed:
M plone/app/contentlisting/contentlisting.py

b"diff --git a/plone/app/contentlisting/contentlisting.py b/plone/app/contentlisting/contentlisting.py\nindex e01d2c6..2dc6588 100644\n--- a/plone/app/contentlisting/contentlisting.py\n+++ b/plone/app/contentlisting/contentlisting.py\n@@ -174,9 +174,10 @@ def MimeTypeIcon(self):\n                 'mimetypes_registry',\n             )\n             ctype = mtt.lookup(contenttype)\n-            mimeicon = os.path.join(\n-                navroot,\n-                guess_icon_path(ctype[0]),\n-            )\n+            if ctype:\n+                mimeicon = os.path.join(\n+                    navroot,\n+                    guess_icon_path(ctype[0]),\n+                )\n \n         return mimeicon\n"

Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2022-01-04T16:35:10+01:00
Author: Thomas Schorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.app.contentlisting/commit/aa25e23573a84ab31c715be26dea99c33ee29c7a

add changelog entry

Files changed:
A news/41.bugfix

b'diff --git a/news/41.bugfix b/news/41.bugfix\nnew file mode 100644\nindex 0000000..dc89f76\n--- /dev/null\n+++ b/news/41.bugfix\n@@ -0,0 +1,2 @@\n+Do not throw an error when the contenttype is not in the mimetypes_registry.\n+[tschorr]\n'

Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2022-01-07T10:56:41+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contentlisting/commit/175f00805c6c1999ffaaa08449b45d5878dc2777

Merge pull request #41 from plone/ct_not_in_mimetypes_registry

Do not throw an error if the contenttype is not in the mimetyes_registry

Files changed:
A news/41.bugfix
M plone/app/contentlisting/contentlisting.py

b"diff --git a/news/41.bugfix b/news/41.bugfix\nnew file mode 100644\nindex 0000000..dc89f76\n--- /dev/null\n+++ b/news/41.bugfix\n@@ -0,0 +1,2 @@\n+Do not throw an error when the contenttype is not in the mimetypes_registry.\n+[tschorr]\ndiff --git a/plone/app/contentlisting/contentlisting.py b/plone/app/contentlisting/contentlisting.py\nindex e01d2c6..2dc6588 100644\n--- a/plone/app/contentlisting/contentlisting.py\n+++ b/plone/app/contentlisting/contentlisting.py\n@@ -174,9 +174,10 @@ def MimeTypeIcon(self):\n                 'mimetypes_registry',\n             )\n             ctype = mtt.lookup(contenttype)\n-            mimeicon = os.path.join(\n-                navroot,\n-                guess_icon_path(ctype[0]),\n-            )\n+            if ctype:\n+                mimeicon = os.path.join(\n+                    navroot,\n+                    guess_icon_path(ctype[0]),\n+                )\n \n         return mimeicon\n"

