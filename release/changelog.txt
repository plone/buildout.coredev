Zope 5.9 → 5.10
---------------

- Recognize Page Templates by file extension for WebDAV.
  (`#1212 <https://github.com/zopefoundation/Zope/issues/1212>`_)

- Clean up and fix installation documentation.

- Officially support Python 3.12.1.
  (`#1188 <https://github.com/zopefoundation/Zope/issues/1188>`_)

- Fix redirections to URLs with host given as IP-literal with brackets.
  Fixes `#1191 <https://github.com/zopefoundation/Zope/issues/1191>`_.

- Introduce the decorator ``ZPublisher.zpublish`` to explicitly
  control publication by ``ZPublisher``.
  For details see
  `#1197 <https://github.com/zopefoundation/Zope/pull/1197>`_.

- Fix ``Content-Disposition`` filename for clients without rfc6266 support.
  (`#1198 <https://github.com/zopefoundation/Zope/pull/1198>`_)

- Support ``Chameleon`` ``structure`` expression type.
  Fixes `#1077 <https://github.com/zopefoundation/Zope/issues/1077>`_.

- Fix authentication error viewing ZMI with a user defined outside of zope root.
  Fixes `#1195 <https://github.com/zopefoundation/Zope/issues/1195>`_ and
  `#1203 <https://github.com/zopefoundation/Zope/issues/1195>`_.

- Work around ``Products.CMFCore`` and ``Products.CMFPlone`` design bug
  (registering non callable constructors).
  For details, see
  `#1202 <https://github.com/zopefoundation/Zope/issues/1202>`_.


diazo: 2.0.1 → 2.0.2
--------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


Plone: 6.0.11 → 6.0.12
----------------------
- Release 6.0.12.
  [maurits]


plone.api: 2.1.0 → 2.2.2
------------------------
New features:

- Report if a permission does not exist
  when calling `api.user.has_permission`.
  [gforcada] (#515)

Bug fixes:

- Removed `portal_properties` from documentation and tests.
  [maurits] (#125)

- In relation.create: Fix edge case where existing RelationList value is None. @davisagli (#535)

Documentation:

- Overhaul contributing documentation for Plone 6. @stevepiercy (#539)

- Use correct syntax for `no-index` in documentation. @stevepiercy (#540)

Internal:

- Update configuration files.
  [plone devs] (cfffba8c)


plone.app.caching: 3.1.4 → 3.1.5
--------------------------------
Bug fixes:

- Add Zope to dependencies.  Update config files with plone/meta.
  [maurits] #1


plone.app.content: 4.1.2 → 4.1.5
--------------------------------
Bug fixes:

- Fix BS styling in ``content_status_history`` template and replace deprecated ``toggleSelect()`` with ``pat-checklist``
  [petschki] (#285)

- getVocabulary: Speed improvement for large vocabularies (#287)

- No longer check ``visible_ids`` on the 'select default page' form.
  Usage of ``visible_ids`` was largely removed in Plone 5.0 already, and you cannot change the setting on the portal or the member.
  This was using the deprecated ``portal_properties`` tool.
  [maurits] (#125)

- Remove usage of CMFPlone skins script [@jensens] (#281)


plone.app.contentmenu: 3.0.4 → 3.0.5
------------------------------------
Bug fixes:

- Wider ``content_status_history`` modal.
  [petschki] (#67)


plone.app.contentrules: 5.0.3 → 5.0.4
-------------------------------------
Bug fixes:

- Remove hard dependency on plone.app.discussion. [@jensens] (rm-pa-discussion-dependency)


plone.app.contenttypes: 3.0.7 → 3.0.8
-------------------------------------
Bug fixes:

- Support using the file template on objects that have no file attributes. [ale-rt] (#688)

- Fixed p.a.widgets `moved` DeprecationWarning [jensens] (#690)


plone.app.event: 5.1.2 → 5.1.5
------------------------------
Bug fixes:

- Fix calendar portlet to work when selected item is a Collection [erral] (#399)

- Don't error out on 'Africa/Abidjan' timezone [gyst] (#393)

- Conditionally load the zcml for our portlets.
  [maurits] (#3923)


plone.app.layout: 4.1.0 → 4.1.1
-------------------------------
Bug fixes:

- Less DeprecationWarnings by using `plone.base.navigationroot.*` [@jensens] (#364)

- Less DeprecationWarnings by using `plone.app.dexterity.behaviors.nextprevious.*` [@jensens] (#365)

- Remove long outdated (Plone 5) deprecation `moved` for `dashboard` [@jensens] (#366)


plone.app.linkintegrity: 4.0.3 → 4.0.6
--------------------------------------
Bug fixes:

- Fix potential issue calculating breaches with objects sharing the same prefix
  [pgrunewald] (#97)

- Improve performance for calculating breaches.
  [pgrunewald] (#100)

- Fix breaches reporting for documents with multiple links.
  [pgrunewald] (#102)

Tests

- Add regression-test for broken copy&paste. See https://github.com/plone/Products.CMFPlone/issues/2866
  [pbauer] (#71)


plone.app.locales: 6.0.21 → 6.0.23
----------------------------------
Bug fixes:

- Hindi translation [iRohitSingh] (#427)

- German translation [Jesse-Grass, Jensens, Ksuess] (#428)

- Chinese translation [RickyLam11] (#429)

- Add new messages to translate (92f5f74d9)

- Spanish translation (b11099882)

- Basque translation (b297d3362)


plone.app.lockingbehavior: 2.0.0 → 2.0.1
----------------------------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


plone.app.querystring: 2.1.1 → 2.1.2
------------------------------------
Tests

- Remove unused ``portal_properties`` code from tests.
  [maurits] (#125)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.redirector: 3.0.2 → 3.0.3
-----------------------------------
Tests

- Remove test `test_find_first_parent_not_viewable` that lost its environment in Plone 6 [@jensens] (#42)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.registry: 2.0.4 → 2.0.5
---------------------------------
Bug fixes:

- Removes duplicate `<article id="content">`
  [@szakitibi] (#84)

- Fix misleading portal message when NOT deleting records @gforcada


plone.app.robotframework: 2.1.2 → 2.1.3
---------------------------------------
Bug fixes:

- Makes ``Wait For Then Click Element`` keyword more robust. @wesleybl (#157)


plone.app.testing: 7.0.2 → 7.1.0
--------------------------------
New features:

- PloneFixture: explicitly install plone.app.contenttypes:default.
  The `addPloneSite` factory in Plone 6.1 no longer installs this by default.
  [maurits] (#3961)

Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


plone.app.upgrade: 3.1.4 → 3.1.5
--------------------------------
Bug fixes:

- Fix upgrading `plone.app.iterate` to specific version.
  In Plone 6.1 the deprecated GS profile with id `plone.app.iterate` has been removed, and only `default` remains, as is usual.
  [maurits] (#99)

- 6.1: Remove the portal_properties tool completely.
  This tool is deprecated, and we said we would remove it in 6.1.
  [maurits] (#125)

- 6.1: Add upgrade step that removes After the Deadline settings.
  [reinhardt] (#328)

Internal:

- Added upgrade to 6023, Plone 6.0.12.
  [maurits] (#6023)

- Added upgrade to 6103, Plone 6.1.0a4.
  [maurits] (#6103)


plone.app.users: 3.0.6 → 3.0.7
------------------------------
Bug fixes:

- Fix error on personal-information page when you leave an existing portrait unchanged.
  The previous release added validation, but this caused a regression.
  [maurits] (#126)

- Remove unused and broken member-registration control panel.
  This still tried to use the ``portal_properties`` tool.
  Since Plone 5.0 the ``member-fields`` control panel is used instead.
  [maurits] (#127)


plone.app.versioningbehavior: 2.0.2 → 2.0.3
-------------------------------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.event: 2.0.1 → 2.0.2
--------------------------
Bug fixes:

- Keep the rrule UNTIL property UTC specifier, if defined.
  [mamico] (30-2)

- Set the rrule's EXDATE to the same time as the event's start time.
  In our implementation we want the rrule's EXDATE property to have the same time as the event's start time.
  Otherwise recurrence dates might be included where they should not due to an user-undefined EXDATE time.
  [mamico] (#30)


plone.namedfile: 6.3.0 → 6.3.1
------------------------------
Bug fixes:

- Fix: Upload a svg without width and height set  @dobri1408 (#161)


plone.recipe.zope2instance: 6.13.0 → 7.0.0
------------------------------------------
Breaking changes:

- Drop support for Python 3.7 and lower, Zope 4, Plone 5.2.
  [maurits] (#194)


plone.restapi: 9.6.1 → 9.7.1
----------------------------
New features:

- Add cache rules for `@site` and `@navroot`. @mamico (#1779)

- Added TeaserBlockSerializer which updates the contents of a teaser block from its target if the block has `"overwrite": false`. @pbauer, @davisagli (#1788)

Bug fixes:

- Remove use of `portal_properties` in context navigation.
  Theoretically we checked `portal_properties.site_properties.sortAttribute`.
  [maurits] (#125)

- Returns an error message when an Invalid error occurs when validating a controlpanel field. Also translates the message. @wesleybl (#1771)

- Users service: Fixed edge case AttributeError if a user is enumerated but doesn't actually exist. @davisagli (#1775)

- Add Plone 6.1 support to classifiers and test against it. @tisto (#1780)

- Make plone.app.discussion an optional dependency (core add-on). @jensens (#1781)

- Fix require plone.app.iterate on test extras. @jensens (#1782)

- Fix require plone.app.upgrade on test extras. @jensens (#1783)

Documentation:

- Fix event start & end timezone in documentation examples. @davisagli (#1776)

- Move sharing endpoint docs to the correct section. @davisagli (#1778)

Internal:

- Update test-no-uncommitted-doc-changes to run on Python 3.12 instead of 3.9. @tisto, @davisagli (#1794)


plone.scale: 4.1.2 → 4.1.3
--------------------------
Bug fixes:

- Set PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True to try to load damaged images. @davisagli (#14)


plone.testing: 9.0.1 → 9.0.2
----------------------------
Bug fixes:

- makeTestRequest: use BytesIO to set up the test Response. @gotcha (fix_makeTestRequest)


plone.volto: 4.4.0 → 4.4.3
--------------------------
Bug fixes:

- Fix getting the the variation when migrating collections to listing blocks. @pbauer (#158)

- Remove runtime dependency on plone.app.upgrade. @davisagli (#142)

- Do not fail on startup when the ``requests`` library is missing.
  Conditionally load the views to migrate to Volto: only when the ``requests`` library is available.
  We don't want to make this a hard dependency.
  If you need the migration views, you should include the ``requests`` package yourself.
  [maurits] (#152)

- Do not set the nonfolderish_tabs registry to False. @wesleybl (#145)

- Fix for preview_image_link image_scales adapter when the field is empty.
  Swap condition for `image_field` indexer, `preview_image_link` first, then the default `preview_image`
  [sneridagh] (#148)


Products.CMFDiffTool: 4.0.3 → 4.0.4
-----------------------------------
Tests

- Fix tests to run with plone.app.discussion as core add-on. [@jensens] (#57)


Products.CMFPlacefulWorkflow: 3.0.3 → 3.0.4
-------------------------------------------
Tests

- Prepare to work with plone.app.discussion as a core add-on. [@jensens] (#63)


Products.CMFPlone: 6.0.11 → 6.0.12
----------------------------------
Bug fixes:

- Using @@plone_patterns_settings browserview avoid deprecation warnings
  [yurj] #3970

Internal:

- Updated metadata version to 6023.
  [maurits] #6023


Products.PlonePAS: 8.0.2 → 8.0.4
--------------------------------
Bug fixes:

- Restore searching for member when query uses bytes instead of text.
  [maurits] (#125)

- searchForMembers: always use utf-8 instead of checking default_charset.
  This code was still getting the ``IPropertiesTool`` utility.
  [maurits] (#125)

Tests

- Do not test with ``visible_ids`` boolean property, as this may get removed.
  [maurits] (#125)


