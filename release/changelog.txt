Zope 5.9 → 5.10
---------------

- Recognize Page Templates by file extension for WebDAV.
  (`#1212 <https://github.com/zopefoundation/Zope/issues/1212>`_)

- Clean up and fix installation documentation.

- Officially support Python 3.12.1.
  (`#1188 <https://github.com/zopefoundation/Zope/issues/1188>`_)

- Fix redirections to URLs with host given as IP-literal with brackets.
  Fixes `#1191 <https://github.com/zopefoundation/Zope/issues/1191>`_.

- Introduce the decorator ``ZPublisher.zpublish`` to explicitly
  control publication by ``ZPublisher``.
  For details see
  `#1197 <https://github.com/zopefoundation/Zope/pull/1197>`_.

- Fix ``Content-Disposition`` filename for clients without rfc6266 support.
  (`#1198 <https://github.com/zopefoundation/Zope/pull/1198>`_)

- Support ``Chameleon`` ``structure`` expression type.
  Fixes `#1077 <https://github.com/zopefoundation/Zope/issues/1077>`_.

- Fix authentication error viewing ZMI with a user defined outside of zope root.
  Fixes `#1195 <https://github.com/zopefoundation/Zope/issues/1195>`_ and
  `#1203 <https://github.com/zopefoundation/Zope/issues/1195>`_.

- Work around ``Products.CMFCore`` and ``Products.CMFPlone`` design bug
  (registering non callable constructors).
  For details, see
  `#1202 <https://github.com/zopefoundation/Zope/issues/1202>`_.


diazo: 2.0.1 → 2.0.2
--------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


Plone: 6.1.0a3 → 6.1.0a4
------------------------
- Release 6.1.0a4.
  [maurits]


plone.api: 2.1.0 → 2.2.2
------------------------
New features:

- Report if a permission does not exist
  when calling `api.user.has_permission`.
  [gforcada] (#515)

Bug fixes:

- Removed `portal_properties` from documentation and tests.
  [maurits] (#125)

- In relation.create: Fix edge case where existing RelationList value is None. @davisagli (#535)

Documentation:

- Overhaul contributing documentation for Plone 6. @stevepiercy (#539)

- Use correct syntax for `no-index` in documentation. @stevepiercy (#540)

Internal:

- Update configuration files.
  [plone devs] (cfffba8c)


plone.app.caching: 3.1.4 → 3.1.5
--------------------------------
Bug fixes:

- Add Zope to dependencies.  Update config files with plone/meta.
  [maurits] #1


plone.app.content: 4.1.2 → 4.1.5
--------------------------------
Bug fixes:

- Fix BS styling in ``content_status_history`` template and replace deprecated ``toggleSelect()`` with ``pat-checklist``
  [petschki] (#285)

- getVocabulary: Speed improvement for large vocabularies (#287)

- No longer check ``visible_ids`` on the 'select default page' form.
  Usage of ``visible_ids`` was largely removed in Plone 5.0 already, and you cannot change the setting on the portal or the member.
  This was using the deprecated ``portal_properties`` tool.
  [maurits] (#125)

- Remove usage of CMFPlone skins script [@jensens] (#281)


plone.app.contentmenu: 3.0.4 → 3.0.5
------------------------------------
Bug fixes:

- Wider ``content_status_history`` modal.
  [petschki] (#67)


plone.app.contentrules: 5.0.3 → 5.0.4
-------------------------------------
Bug fixes:

- Remove hard dependency on plone.app.discussion. [@jensens] (rm-pa-discussion-dependency)


plone.app.contenttypes: 3.0.7 → 3.0.9
-------------------------------------
Bug fixes:

- No longer set ``portal_properties.site_properties.visible_ids`` on site creation.
  The ``portal_properties`` tools is deprecated, ``visible_ids`` was not set as real property, and usage of ``visible_ids`` was largely removed in Plone 5.0 already.
  You already can no longer set ``visible ids`` in the Editing control panel, nor in the member preferences.
  The only remaining use for ``visible_ids``, if set to true, was to show the page ids on the 'select default page' form.
  [maurits] (#125)

- Support using the file template on objects that have no file attributes. [ale-rt] (#688)

- Fixed p.a.widgets `moved` DeprecationWarning [jensens] (#690)


plone.app.dexterity: 3.2.0 → 4.0.0
----------------------------------
Bug fixes:

- Remove a DeprecationWarning from a moved p.a.z3cform.widgets import. [@jensens] (#387)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.event: 5.1.2 → 5.1.5
------------------------------
Bug fixes:

- Fix calendar portlet to work when selected item is a Collection [erral] (#399)

- Don't error out on 'Africa/Abidjan' timezone [gyst] (#393)

- Conditionally load the zcml for our portlets.
  [maurits] (#3923)


plone.app.iterate: 5.0.5 → 6.0.0
--------------------------------
Breaking changes:

- Remove old GenericSetup profile with id `plone.app.iterate`.
  See `issue 99 <https://github.com/plone/plone.app.iterate/issues/99#issuecomment-1484686642>`_.
  [maurits] (#99)


plone.app.layout: 4.1.0 → 5.0.0
-------------------------------
Breaking changes:

- Remove `portal_properties` code.  Remove `plone_tools.properties`.
  [maurits] (#125)

Bug fixes:

- Fix `DefaultBodyClasses` adapter registration.
  [gforcada]

- Less DeprecationWarnings by using `plone.base.navigationroot.*` [@jensens] (#364)

- Less DeprecationWarnings by using `plone.app.dexterity.behaviors.nextprevious.*` [@jensens] (#365)

- Remove long outdated (Plone 5) deprecation `moved` for `dashboard` [@jensens] (#366)


plone.app.linkintegrity: 4.0.3 → 4.0.6
--------------------------------------
Bug fixes:

- Fix potential issue calculating breaches with objects sharing the same prefix
  [pgrunewald] (#97)

- Improve performance for calculating breaches.
  [pgrunewald] (#100)

- Fix breaches reporting for documents with multiple links.
  [pgrunewald] (#102)

Tests

- Add regression-test for broken copy&paste. See https://github.com/plone/Products.CMFPlone/issues/2866
  [pbauer] (#71)


plone.app.locales: 6.0.22 → 6.0.23
----------------------------------
Bug fixes:

- Hindi translation [iRohitSingh] (#427)

- German translation [Jesse-Grass, Jensens, Ksuess] (#428)

- Chinese translation [RickyLam11] (#429)


plone.app.lockingbehavior: 2.0.0 → 2.0.1
----------------------------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


plone.app.multilingual: 8.1.1 → 8.1.2
-------------------------------------
Bug fixes:

- Removed DeprecationWarning from CatalogVocabularyFactory import. [@jensens] (#454)

Internal:

- Update configuration files.
  [plone devs]


plone.app.portlets: 5.0.7 → 6.0.0
---------------------------------
Breaking changes:

- Remove use of portal_properties.
  Theoretically we were using this for sorting the navigation portlet.
  [maurits] (#125)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.querystring: 2.1.1 → 2.1.2
------------------------------------
Tests

- Remove unused ``portal_properties`` code from tests.
  [maurits] (#125)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.redirector: 3.0.2 → 3.0.3
-----------------------------------
Tests

- Remove test `test_find_first_parent_not_viewable` that lost its environment in Plone 6 [@jensens] (#42)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.registry: 2.0.4 → 2.0.5
---------------------------------
Bug fixes:

- Removes duplicate `<article id="content">`
  [@szakitibi] (#84)

- Fix misleading portal message when NOT deleting records @gforcada


plone.app.robotframework: 2.1.2 → 2.1.3
---------------------------------------
Bug fixes:

- Makes ``Wait For Then Click Element`` keyword more robust. @wesleybl (#157)


plone.app.testing: 7.0.2 → 7.1.0
--------------------------------
New features:

- PloneFixture: explicitly install plone.app.contenttypes:default.
  The `addPloneSite` factory in Plone 6.1 no longer installs this by default.
  [maurits] (#3961)

Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)


plone.app.textfield: 2.0.1 → 3.0.0
----------------------------------
Breaking changes:

- Remove usage of ``portal_properties`` in ``getAllowedContentTypes``.
  This code was still checking `portal_properties.site_properties.forbidden_contenttypes`.
  [maurits] (#125)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.theming: 5.0.8 → 5.0.9
--------------------------------
Bug fixes:

- Fix an issue with unicode characters happening with lxml 5 [ale-rt] (#238)


plone.app.upgrade: 3.1.4 → 3.1.5
--------------------------------
Bug fixes:

- Fix upgrading `plone.app.iterate` to specific version.
  In Plone 6.1 the deprecated GS profile with id `plone.app.iterate` has been removed, and only `default` remains, as is usual.
  [maurits] (#99)

- 6.1: Remove the portal_properties tool completely.
  This tool is deprecated, and we said we would remove it in 6.1.
  [maurits] (#125)

- 6.1: Add upgrade step that removes After the Deadline settings.
  [reinhardt] (#328)

Internal:

- Added upgrade to 6023, Plone 6.0.12.
  [maurits] (#6023)

- Added upgrade to 6103, Plone 6.1.0a4.
  [maurits] (#6103)


plone.app.users: 3.0.6 → 3.0.7
------------------------------
Bug fixes:

- Fix error on personal-information page when you leave an existing portrait unchanged.
  The previous release added validation, but this caused a regression.
  [maurits] (#126)

- Remove unused and broken member-registration control panel.
  This still tried to use the ``portal_properties`` tool.
  Since Plone 5.0 the ``member-fields`` control panel is used instead.
  [maurits] (#127)


plone.app.versioningbehavior: 2.0.2 → 2.0.3
-------------------------------------------
Bug fixes:

- Remove setuptools fossils.
  [maurits] (#72)

Internal:

- Update configuration files.
  [plone devs] (6e36bcc4)


plone.app.vocabularies: 5.0.5 → 6.0.1
-------------------------------------
Breaking changes:

- Remove usage of ``portal_properties``.
  In ``getForbiddenContentTypes`` we used to check ``portal_properties.site_properties.forbidden_contenttypes``.
  Now we return nothing, so deprecate ``getForbiddenContentTypes``, to be removed in Plone 7.
  [maurits] (#125)

Bug fixes:

- Implemented sorting of ReallyUserFriendlyTypes using `unidecode`.
  [rohnsha0] (#3985)


plone.app.z3cform: 4.6.0 → 4.6.1
--------------------------------
Internal:

- Date/time widget: Fix data converter adaption.
  Get the data converter for the date and datetime widgets via adaption and remove the _converter attribute hack.
  This aligns the code to z3c.form standards and allows to override the data converter which was previously not easily possible.
  [thet] (#204)


plone.base: 1.4.0 → 2.0.1
-------------------------
Breaking changes:

- Mockup TinyMCE settings: Remove deprecated AtD plugin settings. (#33)

- Mockup TinyMCE settings: Remove unused AtD related views and interfaces. (#33)

- Remove ISearchSchemas types_not_searched "Discussion Item" value to make plone.app.discussion a core addon.
  It is actually not needed anyway, also not part of the underlying vocabulary and would be lost on first save in control-panel.
  See https://github.com/zopefoundation/Products.CMFCore/blob/8d765b8ce7ec4e053e58f5c8dc45d08db01ce3e0/src/Products/CMFCore/TypesTool.py#L768
  [@jensens] (#65)

Internal:

- Manually fix up changelog.  I tried to release 2.0.0 today,
  but I already released it two weeks ago.  [maurits]


plone.event: 2.0.1 → 2.0.2
--------------------------
Bug fixes:

- Keep the rrule UNTIL property UTC specifier, if defined.
  [mamico] (30-2)

- Set the rrule's EXDATE to the same time as the event's start time.
  In our implementation we want the rrule's EXDATE property to have the same time as the event's start time.
  Otherwise recurrence dates might be included where they should not due to an user-undefined EXDATE time.
  [mamico] (#30)


plone.namedfile: 6.3.0 → 6.3.1
------------------------------
Bug fixes:

- Fix: Upload a svg without width and height set  @dobri1408 (#161)


plone.recipe.zope2instance: 6.13.0 → 7.0.0
------------------------------------------
Breaking changes:

- Drop support for Python 3.7 and lower, Zope 4, Plone 5.2.
  [maurits] (#194)


plone.restapi: 9.6.1 → 9.7.1
----------------------------
New features:

- Add cache rules for `@site` and `@navroot`. @mamico (#1779)

- Added TeaserBlockSerializer which updates the contents of a teaser block from its target if the block has `"overwrite": false`. @pbauer, @davisagli (#1788)

Bug fixes:

- Remove use of `portal_properties` in context navigation.
  Theoretically we checked `portal_properties.site_properties.sortAttribute`.
  [maurits] (#125)

- Returns an error message when an Invalid error occurs when validating a controlpanel field. Also translates the message. @wesleybl (#1771)

- Users service: Fixed edge case AttributeError if a user is enumerated but doesn't actually exist. @davisagli (#1775)

- Add Plone 6.1 support to classifiers and test against it. @tisto (#1780)

- Make plone.app.discussion an optional dependency (core add-on). @jensens (#1781)

- Fix require plone.app.iterate on test extras. @jensens (#1782)

- Fix require plone.app.upgrade on test extras. @jensens (#1783)

Documentation:

- Fix event start & end timezone in documentation examples. @davisagli (#1776)

- Move sharing endpoint docs to the correct section. @davisagli (#1778)

Internal:

- Update test-no-uncommitted-doc-changes to run on Python 3.12 instead of 3.9. @tisto, @davisagli (#1794)


plone.scale: 4.1.2 → 4.1.3
--------------------------
Bug fixes:

- Set PIL.ImageFile.LOAD_TRUNCATED_IMAGES = True to try to load damaged images. @davisagli (#14)


plone.staticresources: 2.2.0a7 → 2.2.0a8
----------------------------------------
Bug fixes:

- Upgrade `mockup==5.2.0-alpha.8`.
  For more information please see https://github.com/plone/mockup/releases/tag/5.2.0-alpha.8
  [petschki] (#344)


plone.testing: 9.0.1 → 9.0.2
----------------------------
Bug fixes:

- makeTestRequest: use BytesIO to set up the test Response. @gotcha (fix_makeTestRequest)


plone.volto: 4.4.0 → 4.4.3
--------------------------
Bug fixes:

- Fix getting the the variation when migrating collections to listing blocks. @pbauer (#158)

- Remove runtime dependency on plone.app.upgrade. @davisagli (#142)

- Do not fail on startup when the ``requests`` library is missing.
  Conditionally load the views to migrate to Volto: only when the ``requests`` library is available.
  We don't want to make this a hard dependency.
  If you need the migration views, you should include the ``requests`` package yourself.
  [maurits] (#152)

- Do not set the nonfolderish_tabs registry to False. @wesleybl (#145)

- Fix for preview_image_link image_scales adapter when the field is empty.
  Swap condition for `image_field` indexer, `preview_image_link` first, then the default `preview_image`
  [sneridagh] (#148)


plonetheme.barceloneta: 3.2.0a4 → 3.2.0a5
-----------------------------------------
New features:

- Add styles for details/summary based collapsibles.
  Add support for labels wrapping input fields.
  Ref: https://github.com/plone/Products.CMFPlone/pull/3976 #374

- [yurj] Add the portal_url parameter to be used with Diazo rules and implement it in backend.xml #376


Products.CMFDiffTool: 4.0.3 → 4.0.4
-----------------------------------
Tests

- Fix tests to run with plone.app.discussion as core add-on. [@jensens] (#57)


Products.CMFPlacefulWorkflow: 3.0.3 → 3.0.4
-------------------------------------------
Tests

- Prepare to work with plone.app.discussion as a core add-on. [@jensens] (#63)


Products.CMFPlone: 6.1.0a3 → 6.1.0a4
------------------------------------
Breaking changes:

- Remove `propertiestool` import step and usage of `portal_properties`.
  Remove `site_properties` from `main_template.pt` and ajax template.
  Remove `PropertiesTool` module.
  [maurits] #125

Bug fixes:

- Mockup TinyMCE settings: Remove unused loadingBaseUrl option. 3765-1

- Mockup TinyMCE settings: Remove deprecated AtD plugin settings. 3765-2

- Mockup TinyMCE settings: Remove unused AtD related views. 3765-3

- Mockup TinyMCE settings: Remove unused ITinyMCESpellCheckerSchema and ITinyMCESpellCheckerForm. 3765-4

- Fix deprecation warnings in "navtree" code + some micro optimizations
  [jensens] #3756

- Use details element for collapsibles in the resource registry.
  Makes it possible to toggle elements even with broken or missing javascript.
  Also properly connect form labels with their inputs.
  Fixes #3942

- Import INavigationRoot from plone.base, removes DeprecationWarning.
  [@jensens] #3945

- Use `context` instead of `here` in templates.
  Call `@@main_template` (with prefix `@@`) to optimize lookup.
  [@jensens] #3946

- Reduce DeprecationWarnings. [@jensens] #3949

- Fix TypeError in getGroups sorting
  [@rohnsha0] #3952

- Remove queryCatalog and getFolderContents skins script.
  This includes a refactoring in the search RSS and updates to soe tests
  [@jensens] #3960

- Products.CMFPlone  must not depend on plone.api [@jensens] #3962

- Removes duplicate `<article id="content">` in controlpanel templates
  [@szakitibi] #3964

- Do not test types_not_searched for a element that is not part of the underlying vocabulary.
  [@jensens] #3965

- Remove unused leftover reference to the Zope2 package from test. [@jensens] #3966

- Fix: Traceback in maintenance control panel on shutdown if feature is not available.
  Hide button if action is not possible.
  [@jensens] #3967

- Fixed RegistrationTool to take user email with `__+__@abc.com`.
  [@rohnsha0] #3968

- Plone upgrade page: show error when upgrade is needed but no upgrades are available.
  Especially show a note when the `plone.app.upgrade` package is not available.
  [maurits] #3975

- Plone upgrade page: show list of previously installed packages that are currently missing.
  For example: `plone.app.discussion` may be missing in Plone 6.1, unless you explicitly add it, or depend on the `Plone` package.
  [maurits] #3975

Internal:

- Update the link to the PLIPs page for Plone 6 Documentation. @stevepiercy #3988

- Resourceregistry controlpanel: zprettify template.
  [thet] #3942

- Automatically set the label to `03 type: feature (plip)` for PLIPs. @stevepiercy #3982

- Automatically add a PLIP issue to the PLIP project board. @stevepiercy #3984

- Updated metadata version to 6103.
  [maurits] #6103


Products.PlonePAS: 8.0.2 → 8.0.4
--------------------------------
Bug fixes:

- Restore searching for member when query uses bytes instead of text.
  [maurits] (#125)

- searchForMembers: always use utf-8 instead of checking default_charset.
  This code was still getting the ``IPropertiesTool`` utility.
  [maurits] (#125)

Tests

- Do not test with ``visible_ids`` boolean property, as this may get removed.
  [maurits] (#125)


